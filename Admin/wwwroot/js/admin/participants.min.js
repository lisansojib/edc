(function(){function f(){i.bootstrapTable("destroy");i.bootstrapTable({toolbar:"#tblToolbar",search:!0,searchOnEnterKey:!0,showSearchClearButton:!0,showExport:!0,showColumns:!0,exportTypes:"['csv', 'excel']",pagination:!0,sidePagination:"server",pageList:"[10, 20, 50, 100, 200]",cache:!1,sortable:!0,columns:[{sortable:!1,searchable:!1,title:"Actions",align:"center",width:125,formatter:function(){return`<a class="btn btn-primary btn-sm edit" title="Edit Participant">
                              <i class="fa fa-edit" aria-hidden="true"></i> 
                            </a>
                            <a class="btn btn-danger btn-sm ml-2 remove" href="javascript:" title="Delete Participant">
                              <i class="fa fa-trash" aria-hidden="true"></i>
                            </a>`},events:{"click .edit":function(n,t,i){n.preventDefault();o(i.id)},"click .remove":function(n,t,r){n.preventDefault();showBootboxConfirm("Delete Participant","Are you sure you want to delete this?",function(n){n&&axios.delete(`/api/participants/${r.id}`).then(function(){toastr.success(appConstants.ITEM_DELETED_SUCCESSFULLY);i.bootstrapTable("refresh")}).catch(showResponseError)})}}},{sortable:!0,searchable:!0,field:"username",title:"Username",width:100},{field:"password",title:"Password",width:100},{sortable:!0,searchable:!0,field:"email",title:"Email",width:100},{sortable:!0,searchable:!0,field:"firstName",title:"FirstName",width:100},{sortable:!0,searchable:!0,field:"lastName",title:"LastName",width:100},{sortable:!0,searchable:!0,field:"title",title:"Title",width:100},{sortable:!0,searchable:!0,field:"emailCorp",title:"Email Corp",width:100},{sortable:!0,searchable:!0,field:"phoneCorp",title:"Phone Corp",width:100},{sortable:!0,searchable:!0,field:"companyName",title:"Company Name",width:100},{sortable:!0,searchable:!1,field:"active",title:"Active",width:100,formatter:function(n){return n?"Yes":"No"}},{sortable:!0,searchable:!1,field:"verified",title:"Verified",width:100,formatter:function(n){return n?"Yes":"No"}}],onPageChange:function(t,i){var u=(t-1)*i,f=i;(n.offset!=u||n.limit!=f)&&(n.offset=u,n.limit=f,r())},onSort:function(t,i){n.sort=t;n.order=i;n.offset=0;r()},onRefresh:function(){e();r()},onSearch:function(t){n.filter=t;r()}})}function r(){i.bootstrapTable("showLoading");var t=$.param(n),r=`/api/participants?${t}`;axios.get(r).then(function(n){i.bootstrapTable("load",n.data);i.bootstrapTable("hideLoading")}).catch(function(n){i.bootstrapTable("hideLoading");showResponseError(n)})}function e(){n.offset=0;n.limit=10;n.filter="";n.sort="username";n.order=""}function o(n){axios.get(`/api/participants/${n}`).then(function(n){setFormData(t,n.data);previewFileInput(n.data.id,n.data.photoUrl,$("#photo"));$("#participant-modal-label").text("Edit Participant");$("#participant-modal").modal("show")}).catch(showResponseError)}function s(n){var i,f,o,l,s;if(n.preventDefault(),i=$(this),f=i.html(),setLoadingButton(i),initializeValidation(t,u),o=isValidForm(t,u),o){showValidationToast(o);resetLoadingButton(i,f);return}resetValidationState(t);var e=getFormData(t),h=parseInt(t.find("#Id").val()),c=$("#photo")[0].files;c.length>0&&e.append("photo",c[0]);l=$("input[name='primaryEmail']:checked").val()==="work"?t.find("#emailCorp"):t.find("#emailPersonal");e.append("email",l);s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}};isNaN(h)||h<=0?axios.post("/api/participants",e,s).then(function(){toastr.success("Participant added successfully!");resetLoadingButton(i,f);$("#participant-modal").modal("hide");r()}).catch(function(n){resetLoadingButton(i,f);showResponseError(n)}):axios.put("/api/participants",e,s).then(function(){toastr.success("Participant updated successfully!");resetLoadingButton(i,f);$("#participant-modal").modal("hide");r()}).catch(function(n){resetLoadingButton(i,f);showResponseError(n)})}var i,t,u={firstName:{presence:!0,length:{maximum:100}},lastName:{presence:!0,length:{maximum:100}},emailCorp:{email:!0,length:{maximum:500}},emailPersonal:{email:!0,length:{maximum:500}},phone:{length:{maximum:20}},PhoneCorp:{length:{maximum:20}},title:{length:{maximum:100}},linkedinUrl:{length:{maximum:250}}},n={offset:0,limit:10,sort:"username",order:"",filter:""};$(document).ready(function(){i=$("#tblList");f();r();t=$("#participant-form");$("#add-new-participant").click(function(){$("#participant-modal-label").text("Add new Participant");t.trigger("reset");initNewFileInput($("#photo"));$("#participant-modal").modal("show")});$("#btn-save-participant").click(s)})})();