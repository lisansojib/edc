(function(){function f(){t.bootstrapTable("destroy");t.bootstrapTable({toolbar:"#tblToolbar",search:!0,searchOnEnterKey:!0,showSearchClearButton:!0,showExport:!0,showColumns:!0,exportTypes:"['csv', 'excel']",pagination:!0,sidePagination:"server",pageList:"[10, 20, 50, 100, 200]",cache:!1,sortable:!0,columns:[{sortable:!1,searchable:!1,title:"Actions",align:"center",width:125,formatter:function(){return`<a class="btn btn-primary btn-sm edit"  title="Edit Team">
                              <i class="fa fa-edit" aria-hidden="true"></i> 
                            </a>
                            <a class="btn btn-danger btn-sm ml-2 remove" href="javascript:" title="Delete Team">
                              <i class="fa fa-trash" aria-hidden="true"></i>
                            </a>`},events:{"click .edit":function(n,t,i){n.preventDefault();s(i.id)},"click .remove":function(n,i,r){n.preventDefault();showBootboxConfirm("Delete Team","Are you sure you want to delete this?",function(n){n&&axios.delete(`/api/teams/${r.id}`).then(function(){toastr.success(appConstants.ITEM_DELETED_SUCCESSFULLY);t.bootstrapTable("refresh")}).catch(function(n){toastr.error(n.response.data.message)})})}}},{sortable:!0,searchable:!0,field:"name",title:"Name",width:100},{sortable:!0,searchable:!0,field:"description",title:"Description",width:100},{sortable:!0,searchable:!0,field:"participants",title:"Participants",width:100}],onPageChange:function(t,i){var u=(t-1)*i,f=i;(n.offset!=u||n.limit!=f)&&(n.offset=u,n.limit=f,r())},onSort:function(t,i){n.sort=t;n.order=i;n.offset=0;r()},onRefresh:function(){e();r()},onSearch:function(t){n.filter=t;r()}})}function r(){t.bootstrapTable("showLoading");var i=$.param(n),r=`/api/teams?${i}`;axios.get(r).then(function(n){t.bootstrapTable("load",n.data);t.bootstrapTable("hideLoading")}).catch(function(n){toastr.error(n.response.data.Message)})}function e(){n.offset=0;n.limit=10;n.filter="";n.sort="name";n.order=""}function o(){axios.get(`/api/select-options/participants`).then(function(n){initSelect2($("#participants"),n.data);$("#team-modal-label").text("Add new Team");i.trigger("reset");$("#team-modal").modal("show")}).catch(function(n){toastr.error(n.response.data)})}function s(n){axios.get(`/api/teams/${n}`).then(function(n){setFormData(i,n.data,!0);$("#team-modal-label").text("Edit Team");$("#team-modal").modal("show")}).catch(function(n){toastr.error(n.response.data)})}function h(n){var f,e,o,t,s;if(n.preventDefault(),f=$(this),e=f.html(),setLoadingButton(f),initializeValidation(i,u),o=isValidForm(i,u),o){showValidationToast(o);resetLoadingButton(f,e);return}if(resetValidationState(i),t=formDataToJson(i),t.id=parseInt(t.id),isNaN(t.id)&&(t.id=0),s=$("#participants").val(),t.participants=s.map(function(n){return parseInt(n)}),!t.participants.length){resetLoadingButton(f,e);toastr.error("Please add participants");return}t.id<=0?axios.post("/api/teams",t).then(function(){toastr.success("Team created successfully!");resetLoadingButton(f,e);$("#team-modal").modal("hide");r()}).catch(function(n){resetLoadingButton(f,e);showResponseError(n)}):axios.put("/api/teams",t).then(function(){toastr.success("Team updated successfully!");resetLoadingButton(f,e);$("#team-modal").modal("hide");r()}).catch(function(n){resetLoadingButton(f,e);showResponseError(n)})}var t,i,u={name:{presence:!0,length:{maximum:100}},participants:{presence:!0}},n={offset:0,limit:10,sort:"name",order:"",filter:""};$(document).ready(function(){t=$("#tblList");f();r();i=$("#team-form");$("#add-new-team").click(o);$("#btn-save-team").click(h)})})();