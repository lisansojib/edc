var handleClientLoad;(function(){function h(){r.bootstrapTable("destroy");r.bootstrapTable({search:!0,searchOnEnterKey:!0,showSearchClearButton:!0,pagination:!0,sidePagination:"server",pageList:"[10, 20, 50, 100, 200]",cache:!1,sortable:!0,columns:[{title:"Actions",align:"center",formatter:function(n,t){return`<div class="dropdown">
                                <button class="btn pt-2" type="button" id="dropdownTblAction-${t.id}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="More Options">
                                    <i class="icon-lg text-muted pb-3px fa fa-ellipsis-h"></i> Options
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTblAction-${t.id}">
                                    <a class="dropdown-item d-flex align-items-center add-to-google-calendar" href="#"><i class="icon-sm mr-2 fa fa-calendar-plus-o"></i> <span class="">Add to Google</span></a>
                                    <a class="dropdown-item d-flex align-items-center add-to-outlook-calendar" href="#"><i class="icon-sm mr-2 fa fa-calendar-plus-o"></i> <span class="">Add to Outlook</span></a>
                                    <a class="dropdown-item d-flex align-items-center apply-to-speak" href="#"><i class="icon-sm mr-2 fa fa-commenting-o"></i> <span class="">Apply to Speak</span></a>
                                    <a class="dropdown-item d-flex align-items-center refer-to-speak" href="#"><i class="icon-sm mr-2 fa fa-share"></i> <span class="">Refer to Speaker</span></a>
                                </div>
                            </div>`},events:{"click .add-to-google-calendar":function(n,t,i){n.preventDefault();try{!gapi.auth2.getAuthInstance().isSignedIn.get()}catch(n){gapi.auth2.getAuthInstance().signIn()}finally{b(i)}gapi.auth2.getAuthInstance().isSignedIn.get()||gapi.auth2.getAuthInstance().signIn()},"click .add-to-outlook-calendar":function(n){n.preventDefault();alert("This feature is not enabled yet.")},"click .apply-to-speak":function(n){n.preventDefault();l()},"click .refer-to-speak":function(n){n.preventDefault();a()}}},{sortable:!0,searchable:!0,field:"title",title:"Title"},{sortable:!0,searchable:!0,field:"speakers",title:"Speakers"},{sortable:!0,searchable:!0,field:"sponsors",title:"Sponsors"},{sortable:!0,searchable:!0,field:"eventDate",title:"Event Date",formatter:function(n){return formatDateToDDMMYYYY(n)}},{sortable:!0,searchable:!0,field:"description",title:"Description"}],onPageChange:function(i,r){var u=(i-1)*r,f=r;(n.offset!=u||n.limit!=f)&&(n.offset=u,n.limit=f,t())},onSort:function(i,r){n.sort=i;n.order=r;n.offset=0;t()},onRefresh:function(){c();t()},onSearch:function(i){n.filter=i;t()}})}function t(){r.bootstrapTable("showLoading");var t=$.param(n),i=`/api/portals/events?${t}`;axios.get(i).then(function(n){r.bootstrapTable("load",n.data);r.bootstrapTable("hideLoading")}).catch(function(n){toastr.error(n.response.data.Message)})}function c(){n.offset=0;n.limit=10;n.filter="";n.sort="name";n.order=""}function l(){axios.get(`/api/schedules/new-speaker`).then(function(n){var t=n.data;console.log(t);setFormData(u,t);$("#add-speaker-modal").modal("show")}).catch(function(n){showResponseError(n)})}function a(){axios.get(`/api/schedules/new-speaker`).then(function(n){var t=n.data;console.log(t);setFormData(f,t);$("#refer-speaker-modal").modal("show")}).catch(function(n){showResponseError(n)})}function v(n){var i,r,o,f;if(n.preventDefault(),i=$(this),r=i.html(),setLoadingButton(i),initializeValidation(u,e),o=isValidForm(u,e),o){showValidationToast(o);resetLoadingButton(i,r);return}resetValidationState(u);f=formDataToJson(u);f.panelId=parseInt(f.panelId);axios.post("/api/schedules/save-speaker",f).then(function(){resetLoadingButton(i,r);toastr.success("Successfully Applied to Speak");$("#add-speaker-modal").modal("hide");t()}).catch(function(n){resetLoadingButton(i,r);console.log(n);showResponseError(n)})}function y(n){var r,u,e,i;if(n.preventDefault(),r=$(this),u=r.html(),setLoadingButton(r),initializeValidation(f,o),e=isValidForm(f,o),e){showValidationToast(e);resetLoadingButton(r,u);return}resetValidationState(f);i=formDataToJson(f);i.panelId=parseInt(i.panelId);i.companyId=parseInt(i.companyId);i.isReferer=!0;axios.post("/api/schedules/save-speaker",i).then(function(){resetLoadingButton(r,u);toastr.success("Successfully Reffered to Speak");$("#refer-speaker-modal").modal("hide");t()}).catch(function(n){resetLoadingButton(r,u);console.log(n);showResponseError(n)})}function p(){gapi.client.init({apiKey:"AIzaSyBTop7xBzBNvLyUyOhN_zvIkjd6v-MRfVU",clientId:"27017976469-p9svugd1uksek2kmeod8o7ce1v1lvhp4.apps.googleusercontent.com",discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(s);s(gapi.auth2.getAuthInstance().isSignedIn.get())},function(n){console.log(JSON.stringify(n,null,2))})}function s(n){n&&w()}function w(){gapi.client.calendar.events.list({calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"}).then(function(n){var u=n.result.items,t,r;if(console.log("Upcoming events:"),u.length>0)for(i=0;i<u.length;i++)t=u[i],r=t.start.dateTime,r||(r=t.start.date),console.log(t.summary+" ("+r+")");else console.log("No upcoming events found.")})}function b(n){var t={summary:n.title,description:n.description,start:{dateTime:n.eventDate,timeZone:"America/New_York"},end:{dateTime:n.eventDate,timeZone:"America/New_York"},recurrence:["RRULE:FREQ=DAILY;COUNT=2"],attendees:[{email:"lpage@example.com"},{email:"sbrin@example.com"}],reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]}},i=gapi.client.calendar.events.insert({calendarId:"primary",resource:t});i.execute(function(n){console.log(n);toastr.success("Calendar event created successfully in your google calendar.")})}var r,u,f,e={firstName:{length:{maximum:100}},lastName:{length:{maximum:100}},email:{presence:!0,email:!0,length:{maximum:500}},phone:{length:{maximum:20}},panelId:{presence:!0},interestInTopic:{presence:!0,length:{maximum:500}},linkedinUrl:{length:{maximum:500}}},o={firstName:{length:{maximum:100}},lastName:{length:{maximum:100}},email:{presence:!0,email:!0,length:{maximum:500}},phone:{length:{maximum:20}},panelId:{presence:!0},interestInTopic:{presence:!0,length:{maximum:500}},note:{length:{maximum:500}},linkedinUrl:{length:{maximum:500}},companyId:{presence:!0}},n;$(function(){r=$("#tblEvents");h();t();u=$("#add-speaker-form");f=$("#refer-speaker-form");$("#btn-save-reffered-speaker").click(y);$("#btn-save-speaker").click(v)});n={offset:0,limit:10,sort:"title",order:"",filter:""};window.DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];window.SCOPES="https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events";handleClientLoad=function(){gapi.load("client:auth2",p)}})();