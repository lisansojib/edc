(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.signalR=t():n.signalR=t()})(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,i){"use strict";i.r(t);var u=i(1),f=i.n(u),r=i(3);i.d(t,"VERSION",function(){return r.VERSION});i.d(t,"AbortError",function(){return r.AbortError});i.d(t,"HttpError",function(){return r.HttpError});i.d(t,"TimeoutError",function(){return r.TimeoutError});i.d(t,"HttpClient",function(){return r.HttpClient});i.d(t,"HttpResponse",function(){return r.HttpResponse});i.d(t,"DefaultHttpClient",function(){return r.DefaultHttpClient});i.d(t,"HubConnection",function(){return r.HubConnection});i.d(t,"HubConnectionState",function(){return r.HubConnectionState});i.d(t,"HubConnectionBuilder",function(){return r.HubConnectionBuilder});i.d(t,"MessageType",function(){return r.MessageType});i.d(t,"LogLevel",function(){return r.LogLevel});i.d(t,"HttpTransportType",function(){return r.HttpTransportType});i.d(t,"TransferFormat",function(){return r.TransferFormat});i.d(t,"NullLogger",function(){return r.NullLogger});i.d(t,"JsonHubProtocol",function(){return r.JsonHubProtocol});Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0});Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0});Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(n,t,i){(function(t){var r;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
(function(t,i){n.exports=i()})(this,function(){"use strict";function kt(n){var t=typeof n;return n!==null&&(t==="object"||t==="function")}function et(n){return typeof n=="function"}function dt(n){d=n}function gt(n){e=n}function ii(){return function(){return process.nextTick(h)}}function ri(){return typeof k!="undefined"?function(){k(h)}:g()}function ui(){var n=0,i=new lt(h),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function fi(){var n=new MessageChannel;return n.port1.onmessage=h,function(){return n.port2.postMessage(0)}}function g(){var n=setTimeout;return function(){return n(h,1)}}function h(){for(var t,i,n=0;n<s;n+=2)t=o[n],i=o[n+1],t(i),o[n]=undefined,o[n+1]=undefined;s=0}function ei(){try{var t=r,n=i(!function(){var n=new Error("Cannot find module 'vertx'");n.code="MODULE_NOT_FOUND";throw n;}());return k=n.runOnLoop||n.runOnContext,ri()}catch(f){return g()}}function tt(n,t){var u=this,i=new this.constructor(c),r,f;return i[v]===undefined&&wt(i),r=u._state,r?(f=arguments[r-1],e(function(){return pt(r,i,f,u._result)})):rt(u,i,n,t),i}function it(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(c),w(t,n),t)}function c(){}function oi(){return new TypeError("You cannot resolve a promise with itself")}function si(){return new TypeError("A promises callback cannot return that same promise.")}function at(n){try{return n.then}catch(t){return p.error=t,p}}function hi(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function ci(n,t,i){e(function(n){var r=!1,e=hi(i,t,function(i){r||(r=!0,t!==i?w(n,i):f(n,i))},function(t){r||(r=!0,u(n,t))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,u(n,e))},n)}function li(n,t){t._state===y?f(n,t._result):t._state===a?u(n,t._result):rt(t,undefined,function(t){return w(n,t)},function(t){return u(n,t)})}function vt(n,t,i){t.constructor===n.constructor&&i===tt&&t.constructor.resolve===it?li(n,t):i===p?(u(n,p.error),p.error=null):i===undefined?f(n,t):et(i)?ci(n,t,i):f(n,t)}function w(n,t){n===t?u(n,oi()):kt(t)?vt(n,t,at(t)):f(n,t)}function ai(n){n._onerror&&n._onerror(n._result);ut(n)}function f(n,t){n._state===l&&(n._result=t,n._state=y,n._subscribers.length!==0&&e(ut,n))}function u(n,t){n._state===l&&(n._state=a,n._result=t,e(ai,n))}function rt(n,t,i,r){var u=n._subscribers,f=u.length;n._onerror=null;u[f]=t;u[f+y]=i;u[f+a]=r;f===0&&n._state&&e(ut,n)}function ut(n){var i=n._subscribers,f=n._state,t;if(i.length!==0){var r=void 0,u=void 0,e=n._result;for(t=0;t<i.length;t+=3)r=i[t],u=i[t+f],r?pt(f,r,u,e):u(e);n._subscribers.length=0}}function yt(){this.error=null}function vi(n,t){try{return n(t)}catch(i){return b.error=i,b}}function pt(n,t,i,r){var s=et(i),e=void 0,h=void 0,o=void 0,c=void 0;if(s){if(e=vi(i,r),e===b?(c=!0,h=e.error,e.error=null):o=!0,t===e){u(t,si());return}}else e=r,o=!0;t._state!==l||(s&&o?w(t,e):c?u(t,h):n===y?f(t,e):n===a&&u(t,e))}function yi(n,t){try{t(function(t){w(n,t)},function(t){u(n,t)})}catch(i){u(n,i)}}function pi(){return ft++}function wt(n){n[v]=ft++;n._state=undefined;n._result=undefined;n._subscribers=[]}function wi(){return new Error("Array Methods must be provided an Array")}function wi(){return new Error("Array Methods must be provided an Array")}function bi(n){return new bt(this,n).promise}function ki(n){var t=this;return st(n)?new t(function(i,r){for(var f=n.length,u=0;u<f;u++)t.resolve(n[u]).then(i,r)}):new t(function(n,t){return t(new TypeError("You must pass an array to race."))})}function di(n){var i=this,t=new i(c);return u(t,n),t}function gi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function nr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function tr(){var i=void 0,r,u;if(typeof t!="undefined")i=t;else if(typeof self!="undefined")i=self;else try{i=Function("return this")()}catch(f){throw new Error("polyfill failed because global object is unavailable in this environment");}if(r=i.Promise,r){u=null;try{u=Object.prototype.toString.call(r.resolve())}catch(f){}if(u==="[object Promise]"&&!r.cast)return}i.Promise=n}var ot=void 0,o,nt,v,b,ft,bt,n;ot=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var st=ot,s=0,k=void 0,d=void 0,e=function(n,t){o[s]=n;o[s+1]=t;s+=2;s===2&&(d?d(h):nt())};var ht=typeof window!="undefined"?window:undefined,ct=ht||{},lt=ct.MutationObserver||ct.WebKitMutationObserver,ni=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";o=new Array(1e3);nt=void 0;nt=ni?ii():lt?ui():ti?fi():ht===undefined&&!0?ei():g();v=Math.random().toString(36).substring(16);var l=void 0,y=1,a=2,p=new yt;return b=new yt,ft=0,bt=function(){function t(n,t){this._instanceConstructor=n;this.promise=new n(c);this.promise[v]||wt(this.promise);st(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),this.length===0?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),this._remaining===0&&f(this.promise,this._result))):u(this.promise,wi())}return t.prototype._enumerate=function(n){for(var t=0;this._state===l&&t<n.length;t++)this._eachEntry(n[t],t)},t.prototype._eachEntry=function(t,i){var r=this._instanceConstructor,e=r.resolve,u,f;e===it?(u=at(t),u===tt&&t._state!==l?this._settledAt(t._state,i,t._result):typeof u!="function"?(this._remaining--,this._result[i]=t):r===n?(f=new r(c),vt(f,t,u),this._willSettleAt(f,i)):this._willSettleAt(new r(function(n){return n(t)}),i)):this._willSettleAt(e(t),i)},t.prototype._settledAt=function(n,t,i){var r=this.promise;r._state===l&&(this._remaining--,n===a?u(r,i):this._result[t]=i);this._remaining===0&&f(r,this._result)},t.prototype._willSettleAt=function(n,t){var i=this;rt(n,undefined,function(n){return i._settledAt(y,t,n)},function(n){return i._settledAt(a,t,n)})},t}(),n=function(){function n(t){this[v]=pi();this._result=this._state=undefined;this._subscribers=[];c!==t&&(typeof t!="function"&&gi(),this instanceof n?yi(this,t):nr())}return n.prototype.catch=function(n){return this.then(null,n)},n.prototype.finally=function(n){var t=this,i=t.constructor;return t.then(function(t){return i.resolve(n()).then(function(){return t})},function(t){return i.resolve(n()).then(function(){throw t;})})},n}(),n.prototype.then=tt,n.all=bi,n.race=ki,n.resolve=it,n.reject=di,n._setScheduler=dt,n._setAsap=gt,n._asap=e,n.polyfill=tr,n.Promise=n,n.polyfill(),n})}).call(this,i(2))},function(n){var t=function(){return this}();try{t=t||Function("return this")()||(1,eval)("this")}catch(i){typeof window=="object"&&(t=window)}n.exports=t},function(n,t,i){"use strict";var r,u,o,f,s,h,c,e,l,a,v;i.r(t);i.d(t,"VERSION",function(){return v});r=i(4);i.d(t,"AbortError",function(){return r.AbortError});i.d(t,"HttpError",function(){return r.HttpError});i.d(t,"TimeoutError",function(){return r.TimeoutError});u=i(5);i.d(t,"HttpClient",function(){return u.HttpClient});i.d(t,"HttpResponse",function(){return u.HttpResponse});o=i(6);i.d(t,"DefaultHttpClient",function(){return o.DefaultHttpClient});f=i(10);i.d(t,"HubConnection",function(){return f.HubConnection});i.d(t,"HubConnectionState",function(){return f.HubConnectionState});s=i(16);i.d(t,"HubConnectionBuilder",function(){return s.HubConnectionBuilder});h=i(15);i.d(t,"MessageType",function(){return h.MessageType});c=i(9);i.d(t,"LogLevel",function(){return c.LogLevel});e=i(18);i.d(t,"HttpTransportType",function(){return e.HttpTransportType});i.d(t,"TransferFormat",function(){return e.TransferFormat});l=i(14);i.d(t,"NullLogger",function(){return l.NullLogger});a=i(23);i.d(t,"JsonHubProtocol",function(){return a.JsonHubProtocol});v="1.1.4"},function(n,t,i){"use strict";i.r(t);i.d(t,"HttpError",function(){return u});i.d(t,"TimeoutError",function(){return f});i.d(t,"AbortError",function(){return e});var r=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(n){function t(t,i){var u=this.constructor,r=this,f=u.prototype;return r=n.call(this,t)||this,r.statusCode=i,r.__proto__=f,r}return r(t,n),t}(Error),f=function(n){function t(t){var u=this.constructor,i,r;return t===void 0&&(t="A timeout occurred."),i=this,r=u.prototype,i=n.call(this,t)||this,i.__proto__=r,i}return r(t,n),t}(Error),e=function(n){function t(t){var u=this.constructor,i,r;return t===void 0&&(t="An abort occurred."),i=this,r=u.prototype,i=n.call(this,t)||this,i.__proto__=r,i}return r(t,n),t}(Error)},function(n,t,i){"use strict";i.r(t);i.d(t,"HttpResponse",function(){return u});i.d(t,"HttpClient",function(){return f});var r=undefined&&undefined.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u=function(){function n(n,t,i){this.statusCode=n;this.statusText=t;this.content=i}return n}(),f=function(){function n(){}return n.prototype.get=function(n,t){return this.send(r({},t,{method:"GET",url:n}))},n.prototype.post=function(n,t){return this.send(r({},t,{method:"POST",url:n}))},n.prototype.delete=function(n,t){return this.send(r({},t,{method:"DELETE",url:n}))},n.prototype.getCookieString=function(){return""},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"DefaultHttpClient",function(){return s});var r=i(4),u=i(5),f=i(7),e=i(8),o=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(n){function t(t){var i=n.call(this)||this;return i.httpClient=typeof XMLHttpRequest!="undefined"?new e.XhrHttpClient(t):new f.NodeHttpClient(t),i}return o(t,n),t.prototype.send=function(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new r.AbortError):n.method?n.url?this.httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(n){return this.httpClient.getCookieString(n)},t}(u.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"NodeHttpClient",function(){return f});var r=i(5),u=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(n){function t(){return n.call(this)||this}return u(t,n),t.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},t}(r.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"XhrHttpClient",function(){return o});var r=i(4),u=i(5),f=i(9),e=undefined&&undefined.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=function(n){function t(t){var i=n.call(this)||this;return i.logger=t,i}return e(t,n),t.prototype.send=function(n){var t=this;return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new r.AbortError):n.method?n.url?new Promise(function(i,e){var o=new XMLHttpRequest,s;o.open(n.method,n.url,!0);o.withCredentials=!0;o.setRequestHeader("X-Requested-With","XMLHttpRequest");o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");s=n.headers;s&&Object.keys(s).forEach(function(n){o.setRequestHeader(n,s[n])});n.responseType&&(o.responseType=n.responseType);n.abortSignal&&(n.abortSignal.onabort=function(){o.abort();e(new r.AbortError)});n.timeout&&(o.timeout=n.timeout);o.onload=function(){n.abortSignal&&(n.abortSignal.onabort=null);o.status>=200&&o.status<300?i(new u.HttpResponse(o.status,o.statusText,o.response||o.responseText)):e(new r.HttpError(o.statusText,o.status))};o.onerror=function(){t.logger.log(f.LogLevel.Warning,"Error from HTTP request. "+o.status+": "+o.statusText+".");e(new r.HttpError(o.statusText,o.status))};o.ontimeout=function(){t.logger.log(f.LogLevel.Warning,"Timeout from HTTP request.");e(new r.TimeoutError)};o.send(n.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(u.HttpClient)},function(n,t,i){"use strict";i.r(t);i.d(t,"LogLevel",function(){return r});var r;(function(n){n[n.Trace=0]="Trace";n[n.Debug=1]="Debug";n[n.Information=2]="Information";n[n.Warning=3]="Warning";n[n.Error=4]="Error";n[n.Critical=5]="Critical";n[n.None=6]="None"})(r||(r={}))},function(n,t,i){"use strict";var h;i.r(t);i.d(t,"HubConnectionState",function(){return f});i.d(t,"HubConnection",function(){return h});var c=i(11),r=i(15),u=i(9),e=i(13),o=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},s=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},l=3e4,a=15e3,f;(function(n){n[n.Disconnected=0]="Disconnected";n[n.Connected=1]="Connected"})(f||(f={}));h=function(){function n(n,t,i){var u=this;e.Arg.isRequired(n,"connection");e.Arg.isRequired(t,"logger");e.Arg.isRequired(i,"protocol");this.serverTimeoutInMilliseconds=l;this.keepAliveIntervalInMilliseconds=a;this.logger=t;this.protocol=i;this.connection=n;this.handshakeProtocol=new c.HandshakeProtocol;this.connection.onreceive=function(n){return u.processIncomingData(n)};this.connection.onclose=function(n){return u.connectionClosed(n)};this.callbacks={};this.methods={};this.closedCallbacks=[];this.id=0;this.receivedHandshakeResponse=!1;this.connectionState=f.Disconnected;this.cachedPingMessage=this.protocol.writeMessage({type:r.MessageType.Ping})}return n.create=function(t,i,r){return new n(t,i,r)},Object.defineProperty(n.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),n.prototype.start=function(){return o(this,void 0,void 0,function(){var n,t,i=this;return s(this,function(r){switch(r.label){case 0:return n={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(u.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,t=new Promise(function(n,t){i.handshakeResolver=n;i.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:return r.sent(),this.logger.log(u.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(n))];case 2:return r.sent(),this.logger.log(u.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 3:return r.sent(),this.connectionState=f.Connected,[2]}})})},n.prototype.stop=function(){return this.logger.log(u.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},n.prototype.stream=function(n){for(var i,s,t,h,u=this,o=[],f=1;f<arguments.length;f++)o[f-1]=arguments[f];return i=this.createStreamInvocation(n,o),t=new e.Subject,t.cancelCallback=function(){var n=u.createCancelInvocation(i.invocationId),t=u.protocol.writeMessage(n);return delete u.callbacks[i.invocationId],s.then(function(){return u.sendMessage(t)})},this.callbacks[i.invocationId]=function(n,i){if(i){t.error(i);return}n&&(n.type===r.MessageType.Completion?n.error?t.error(new Error(n.error)):t.complete():t.next(n.item))},h=this.protocol.writeMessage(i),s=this.sendMessage(h).catch(function(n){t.error(n);delete u.callbacks[i.invocationId]}),t},n.prototype.sendMessage=function(n){return this.resetKeepAliveInterval(),this.connection.send(n)},n.prototype.send=function(n){for(var r,u,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=this.createInvocation(n,i,!0),u=this.protocol.writeMessage(r),this.sendMessage(u)},n.prototype.invoke=function(n){for(var u,e,t=this,f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];return u=this.createInvocation(n,f,!1),e=new Promise(function(n,i){t.callbacks[u.invocationId]=function(t,u){if(u){i(u);return}t&&(t.type===r.MessageType.Completion?t.error?i(new Error(t.error)):n(t.result):i(new Error("Unexpected message type: "+t.type)))};var f=t.protocol.writeMessage(u);t.sendMessage(f).catch(function(n){i(n);delete t.callbacks[u.invocationId]})}),e},n.prototype.on=function(n,t){n&&t&&(n=n.toLowerCase(),this.methods[n]||(this.methods[n]=[]),this.methods[n].indexOf(t)===-1)&&this.methods[n].push(t)},n.prototype.off=function(n,t){var i,r;n&&(n=n.toLowerCase(),i=this.methods[n],i)&&(t?(r=i.indexOf(t),r!==-1&&(i.splice(r,1),i.length===0&&delete this.methods[n])):delete this.methods[n])},n.prototype.onclose=function(n){n&&this.closedCallbacks.push(n)},n.prototype.processIncomingData=function(n){var o,i,f,t,e;if(this.cleanupTimeout(),this.receivedHandshakeResponse||(n=this.processHandshakeResponse(n),this.receivedHandshakeResponse=!0),n)for(o=this.protocol.parseMessages(n,this.logger),i=0,f=o;i<f.length;i++){t=f[i];switch(t.type){case r.MessageType.Invocation:this.invokeClientMethod(t);break;case r.MessageType.StreamItem:case r.MessageType.Completion:e=this.callbacks[t.invocationId];e!=null&&(t.type===r.MessageType.Completion&&delete this.callbacks[t.invocationId],e(t));break;case r.MessageType.Ping:break;case r.MessageType.Close:this.logger.log(u.LogLevel.Information,"Close message received from server.");this.connection.stop(t.error?new Error("Server returned an error on close: "+t.error):undefined);break;default:this.logger.log(u.LogLevel.Warning,"Invalid message type: "+t.type+".")}}this.resetTimeoutPeriod()},n.prototype.processHandshakeResponse=function(n){var r,f,e,i,t;try{r=this.handshakeProtocol.parseHandshakeResponse(n);e=r[0];f=r[1]}catch(o){t="Error parsing handshake response: "+o;this.logger.log(u.LogLevel.Error,t);i=new Error(t);this.connection.stop(i);this.handshakeRejecter(i);throw i;}if(f.error){t="Server returned handshake error: "+f.error;this.logger.log(u.LogLevel.Error,t);this.handshakeRejecter(t);this.connection.stop(new Error(t));throw new Error(t);}else this.logger.log(u.LogLevel.Debug,"Server handshake complete.");return this.handshakeResolver(),e},n.prototype.resetKeepAliveInterval=function(){var n=this;this.cleanupPingTimer();this.pingServerHandle=setTimeout(function(){return o(n,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:if(!(this.connectionState===f.Connected))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},n.prototype.resetTimeoutPeriod=function(){var n=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return n.serverTimeout()},this.serverTimeoutInMilliseconds))},n.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},n.prototype.invokeClientMethod=function(n){var r=this,i=this.methods[n.target.toLowerCase()],t;i?(i.forEach(function(t){return t.apply(r,n.arguments)}),n.invocationId&&(t="Server requested a response, which is not supported in this version of the client.",this.logger.log(u.LogLevel.Error,t),this.connection.stop(new Error(t)))):this.logger.log(u.LogLevel.Warning,"No client method with the name '"+n.target+"' found.")},n.prototype.connectionClosed=function(n){var i=this,t=this.callbacks;this.callbacks={};this.connectionState=f.Disconnected;this.handshakeRejecter&&this.handshakeRejecter(n);Object.keys(t).forEach(function(i){var r=t[i];r(null,n?n:new Error("Invocation canceled due to connection being closed."))});this.cleanupTimeout();this.cleanupPingTimer();this.closedCallbacks.forEach(function(t){return t.apply(i,[n])})},n.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},n.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},n.prototype.createInvocation=function(n,t,i){if(i)return{arguments:t,target:n,type:r.MessageType.Invocation};var u=this.id;return this.id++,{arguments:t,invocationId:u.toString(),target:n,type:r.MessageType.Invocation}},n.prototype.createStreamInvocation=function(n,t){var i=this.id;return this.id++,{arguments:t,invocationId:i.toString(),target:n,type:r.MessageType.StreamInvocation}},n.prototype.createCancelInvocation=function(n){return{invocationId:n,type:r.MessageType.CancelInvocation}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"HandshakeProtocol",function(){return f});var r=i(12),u=i(13),f=function(){function n(){}return n.prototype.writeHandshakeRequest=function(n){return r.TextMessageFormat.write(JSON.stringify(n))},n.prototype.parseHandshakeResponse=function(n){var c,o,s,f,e,i,t,l,h;if(Object(u.isArrayBuffer)(n)||typeof Buffer!="undefined"&&n instanceof Buffer){if(f=new Uint8Array(n),i=f.indexOf(r.TextMessageFormat.RecordSeparatorCode),i===-1)throw new Error("Message is incomplete.");t=i+1;o=String.fromCharCode.apply(null,f.slice(0,t));s=f.byteLength>t?f.slice(t).buffer:null}else{if(e=n,i=e.indexOf(r.TextMessageFormat.RecordSeparator),i===-1)throw new Error("Message is incomplete.");t=i+1;o=e.substring(0,t);s=e.length>t?e.substring(t):null}if(l=r.TextMessageFormat.parse(o),h=JSON.parse(l[0]),h.type)throw new Error("Expected a handshake response from the server.");return c=h,[s,c]},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"TextMessageFormat",function(){return r});var r=function(){function n(){}return n.write=function(t){return""+t+n.RecordSeparator},n.parse=function(t){if(t[t.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");var i=t.split(n.RecordSeparator);return i.pop(),i},n.RecordSeparatorCode=30,n.RecordSeparator=String.fromCharCode(n.RecordSeparatorCode),n}()},function(n,t,i){"use strict";function e(n,t){var i="";return u(n)?(i="Binary data of length "+n.byteLength,t&&(i+=". Content: '"+o(n)+"'")):typeof n=="string"&&(i="String data of length "+n.length,t&&(i+=". Content: '"+n+"'")),i}function o(n){var i=new Uint8Array(n),t="";return i.forEach(function(n){var i=n<16?"0":"";t+="0x"+i+n.toString(16)+" "}),t.substr(0,t.length-1)}function u(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function v(n,t,i,f,o,s,h){return c(this,void 0,void 0,function(){var c,v,a,y,p;return l(this,function(l){switch(l.label){case 0:return o?[4,o()]:[3,2];case 1:a=l.sent();a&&(v=(c={},c.Authorization="Bearer "+a,c));l.label=2;case 2:return n.log(r.LogLevel.Trace,"("+t+" transport) sending data. "+e(s,h)+"."),y=u(s)?"arraybuffer":"text",[4,i.post(f,{content:s,headers:v,responseType:y})];case 3:return p=l.sent(),n.log(r.LogLevel.Trace,"("+t+" transport) request complete. Response status: "+p.statusCode+"."),[2]}})})}function y(n){return n===undefined?new f(r.LogLevel.Information):n===null?h.NullLogger.instance:n.log?n:new f(n)}i.r(t);i.d(t,"Arg",function(){return a});i.d(t,"getDataDetail",function(){return e});i.d(t,"formatArrayBuffer",function(){return o});i.d(t,"isArrayBuffer",function(){return u});i.d(t,"sendMessage",function(){return v});i.d(t,"createLogger",function(){return y});i.d(t,"Subject",function(){return p});i.d(t,"SubjectSubscription",function(){return s});i.d(t,"ConsoleLogger",function(){return f});var r=i(9),h=i(14),c=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},l=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},a=function(){function n(){}return n.isRequired=function(n,t){if(n===null||n===undefined)throw new Error("The '"+t+"' argument is required.");},n.isIn=function(n,t,i){if(!(n in t))throw new Error("Unknown "+i+" value: "+n+".");},n}();var p=function(){function n(){this.observers=[]}return n.prototype.next=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.next(n)},n.prototype.error=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.error&&r.error(n)},n.prototype.complete=function(){for(var i,n=0,t=this.observers;n<t.length;n++)i=t[n],i.complete&&i.complete()},n.prototype.subscribe=function(n){return this.observers.push(n),new s(this,n)},n}(),s=function(){function n(n,t){this.subject=n;this.observer=t}return n.prototype.dispose=function(){var n=this.subject.observers.indexOf(this.observer);n>-1&&this.subject.observers.splice(n,1);this.subject.observers.length===0&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(){})},n}(),f=function(){function n(n){this.minimumLogLevel=n}return n.prototype.log=function(n,t){if(n>=this.minimumLogLevel)switch(n){case r.LogLevel.Critical:case r.LogLevel.Error:console.error("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;case r.LogLevel.Warning:console.warn("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;case r.LogLevel.Information:console.info("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+r.LogLevel[n]+": "+t)}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"NullLogger",function(){return r});var r=function(){function n(){}return n.prototype.log=function(){},n.instance=new n,n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"MessageType",function(){return r});var r;(function(n){n[n.Invocation=1]="Invocation";n[n.StreamItem=2]="StreamItem";n[n.Completion=3]="Completion";n[n.StreamInvocation=4]="StreamInvocation";n[n.CancelInvocation=5]="CancelInvocation";n[n.Ping=6]="Ping";n[n.Close=7]="Close"})(r||(r={}))},function(n,t,i){"use strict";function h(n){return n.log!==undefined}i.r(t);i.d(t,"HubConnectionBuilder",function(){return s});var u=i(17),f=i(10),e=i(23),o=i(14),r=i(13),s=function(){function n(){}return n.prototype.configureLogging=function(n){return r.Arg.isRequired(n,"logging"),this.logger=h(n)?n:new r.ConsoleLogger(n),this},n.prototype.withUrl=function(n,t){return r.Arg.isRequired(n,"url"),this.url=n,this.httpConnectionOptions=typeof t=="object"?t:{transport:t},this},n.prototype.withHubProtocol=function(n){return r.Arg.isRequired(n,"protocol"),this.protocol=n,this},n.prototype.build=function(){var n=this.httpConnectionOptions||{},t;if(n.logger===undefined&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");return t=new u.HttpConnection(this.url,n),f.HubConnection.create(t,this.logger||o.NullLogger.instance,this.protocol||new e.JsonHubProtocol)},n}()},function(n,t,i){"use strict";function b(n,t){return!n||(t&n)!=0}var c,v;i.r(t);i.d(t,"HttpConnection",function(){return v});var y=i(6),u=i(9),r=i(18),l=i(19),p=i(21),o=i(13),w=i(22),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},f=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},a=100,s=null,h=null;typeof window=="undefined"&&!0&&(c=require,s=c("ws"),h=c("eventsource"));v=function(){function n(n,t){t===void 0&&(t={});this.features={};o.Arg.isRequired(n,"url");this.logger=Object(o.createLogger)(t.logger);this.baseUrl=this.resolveUrl(n);t=t||{};t.logMessageContent=t.logMessageContent||!1;var i=typeof window=="undefined";i||typeof WebSocket=="undefined"||t.WebSocket?i&&!t.WebSocket&&s&&(t.WebSocket=s):t.WebSocket=WebSocket;i||typeof EventSource=="undefined"||t.EventSource?i&&!t.EventSource&&typeof h!="undefined"&&(t.EventSource=h):t.EventSource=EventSource;this.httpClient=t.httpClient||new y.DefaultHttpClient(this.logger);this.connectionState=2;this.options=t;this.onreceive=null;this.onclose=null}return n.prototype.start=function(n){return(n=n||r.TransferFormat.Binary,o.Arg.isIn(n,r.TransferFormat,"transferFormat"),this.logger.log(u.LogLevel.Debug,"Starting connection with transfer format '"+r.TransferFormat[n]+"'."),this.connectionState!==2)?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(n),this.startPromise)},n.prototype.send=function(n){if(this.connectionState!==1)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(n)},n.prototype.stop=function(n){return e(this,void 0,void 0,function(){var t;return f(this,function(i){switch(i.label){case 0:this.connectionState=2;this.stopError=n;i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.startPromise];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:i.sent();this.transport=undefined;i.label=6;case 6:return[2]}})})},n.prototype.startInternal=function(n){return e(this,void 0,void 0,function(){var i,t,e,c,o,s,h,v=this;return f(this,function(y){switch(y.label){case 0:i=this.baseUrl;this.accessTokenFactory=this.options.accessTokenFactory;y.label=1;case 1:return(y.trys.push([1,12,,13]),!this.options.skipNegotiation)?[3,5]:(this.options.transport===r.HttpTransportType.WebSockets)?(this.transport=this.constructTransport(r.HttpTransportType.WebSockets),[4,this.transport.connect(i,n)]):[3,3];case 2:return y.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:t=null;e=0;c=function(){var n;return f(this,function(r){switch(r.label){case 0:return[4,o.getNegotiationResponse(i)];case 1:if(t=r.sent(),o.connectionState===2)return[2,{value:void 0}];if(t.error)throw Error(t.error);if(t.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return t.url&&(i=t.url),t.accessToken&&(n=t.accessToken,o.accessTokenFactory=function(){return n}),e++,[2]}})};o=this;y.label=6;case 6:return[5,c()];case 7:if(s=y.sent(),typeof s=="object")return[2,s.value];y.label=8;case 8:if(t.url&&e<a)return[3,6];y.label=9;case 9:if(e===a&&t.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(i,this.options.transport,t,n)];case 10:y.sent();y.label=11;case 11:return this.transport instanceof l.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(n){return v.stopConnection(n)},this.changeState(0,1),[3,13];case 12:h=y.sent();this.logger.log(u.LogLevel.Error,"Failed to start the connection: "+h);this.connectionState=2;this.transport=undefined;throw h;case 13:return[2]}})})},n.prototype.getNegotiationResponse=function(n){return e(this,void 0,void 0,function(){var i,s,r,e,t,o;return f(this,function(f){switch(f.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:r=f.sent();r&&(s=(i={},i.Authorization="Bearer "+r,i));f.label=2;case 2:e=this.resolveNegotiateUrl(n);this.logger.log(u.LogLevel.Debug,"Sending negotiation request: "+e+".");f.label=3;case 3:return f.trys.push([3,5,,6]),[4,this.httpClient.post(e,{content:"",headers:s})];case 4:if(t=f.sent(),t.statusCode!==200)throw Error("Unexpected status code returned from negotiate "+t.statusCode);return[2,JSON.parse(t.content)];case 5:o=f.sent();this.logger.log(u.LogLevel.Error,"Failed to complete negotiation with the server: "+o);throw o;case 6:return[2]}})})},n.prototype.createConnectUrl=function(n,t){return t?n+(n.indexOf("?")===-1?"?":"&")+("id="+t):n},n.prototype.createTransport=function(n,t,i,o){return e(this,void 0,void 0,function(){var e,l,s,c,a,h,v;return f(this,function(f){switch(f.label){case 0:return(e=this.createConnectUrl(n,i.connectionId),!this.isITransport(t))?[3,2]:(this.logger.log(u.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.transport.connect(e,o)]);case 1:return f.sent(),this.changeState(0,1),[2];case 2:l=i.availableTransports||[];s=0;c=l;f.label=3;case 3:return(s<c.length)?(a=c[s],this.connectionState=0,h=this.resolveTransport(a,t,o),!(typeof h=="number"))?[3,8]:(this.transport=this.constructTransport(h),!!i.connectionId)?[3,5]:[4,this.getNegotiationResponse(n)]:[3,9];case 4:i=f.sent();e=this.createConnectUrl(n,i.connectionId);f.label=5;case 5:return f.trys.push([5,7,,8]),[4,this.transport.connect(e,o)];case 6:return f.sent(),this.changeState(0,1),[2];case 7:return v=f.sent(),this.logger.log(u.LogLevel.Error,"Failed to start the transport '"+r.HttpTransportType[h]+"': "+v),this.connectionState=2,i.connectionId=undefined,[3,8];case 8:return s++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.");}})})},n.prototype.constructTransport=function(n){switch(n){case r.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new w.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case r.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new p.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case r.HttpTransportType.LongPolling:return new l.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+n+".");}},n.prototype.resolveTransport=function(n,t,i){var f=r.HttpTransportType[n.transport],e;if(f===null||f===undefined)this.logger.log(u.LogLevel.Debug,"Skipping transport '"+n.transport+"' because it is not supported by this client.");else if(e=n.transferFormats.map(function(n){return r.TransferFormat[n]}),b(t,f))if(e.indexOf(i)>=0){if((f!==r.HttpTransportType.WebSockets||this.options.WebSocket)&&(f!==r.HttpTransportType.ServerSentEvents||this.options.EventSource))return this.logger.log(u.LogLevel.Debug,"Selecting transport '"+r.HttpTransportType[f]+"'."),f;this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it is not supported in your environment.'")}else this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it does not support the requested transfer format '"+r.TransferFormat[i]+"'.");else this.logger.log(u.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it was disabled by the client.");return null},n.prototype.isITransport=function(n){return n&&typeof n=="object"&&"connect"in n},n.prototype.changeState=function(n,t){return this.connectionState===n?(this.connectionState=t,!0):!1},n.prototype.stopConnection=function(n){if(this.transport=undefined,n=this.stopError||n,n?this.logger.log(u.LogLevel.Error,"Connection disconnected with error '"+n+"'."):this.logger.log(u.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose)this.onclose(n)},n.prototype.resolveUrl=function(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(typeof window=="undefined"||!window||!window.document)throw new Error("Cannot resolve '"+n+"'.");var t=window.document.createElement("a");return t.href=n,this.logger.log(u.LogLevel.Information,"Normalizing '"+n+"' to '"+t.href+"'."),t.href},n.prototype.resolveNegotiateUrl=function(n){var i=n.indexOf("?"),t=n.substring(0,i===-1?n.length:i);return t[t.length-1]!=="/"&&(t+="/"),t+="negotiate",t+(i===-1?"":n.substring(i))},n}()},function(n,t,i){"use strict";var r,u;i.r(t);i.d(t,"HttpTransportType",function(){return r});i.d(t,"TransferFormat",function(){return u}),function(n){n[n.None=0]="None";n[n.WebSockets=1]="WebSockets";n[n.ServerSentEvents=2]="ServerSentEvents";n[n.LongPolling=4]="LongPolling"}(r||(r={})),function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"}(u||(u={}))},function(n,t,i){"use strict";i.r(t);i.d(t,"LongPollingTransport",function(){return c});var h=i(20),o=i(4),r=i(9),s=i(18),u=i(13),f=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},e=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},c=function(){function n(n,t,i,r){this.httpClient=n;this.accessTokenFactory=t;this.logger=i;this.pollAbort=new h.AbortController;this.logMessageContent=r;this.running=!1;this.onreceive=null;this.onclose=null}return Object.defineProperty(n.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),n.prototype.connect=function(n,t){return f(this,void 0,void 0,function(){var i,c,h,f;return e(this,function(e){switch(e.label){case 0:if(u.Arg.isRequired(n,"url"),u.Arg.isRequired(t,"transferFormat"),u.Arg.isIn(t,s.TransferFormat,"transferFormat"),this.url=n,this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Connecting."),t===s.TransferFormat.Binary&&typeof XMLHttpRequest!="undefined"&&typeof(new XMLHttpRequest).responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return i={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===s.TransferFormat.Binary&&(i.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return c=e.sent(),this.updateHeaderToken(i,c),h=n+"&_="+Date.now(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) polling: "+h+"."),[4,this.httpClient.get(h,i)];case 2:return f=e.sent(),f.statusCode!==200?(this.logger.log(r.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+f.statusCode+"."),this.closeError=new o.HttpError(f.statusText||"",f.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,i),[2]}})})},n.prototype.getAccessToken=function(){return f(this,void 0,void 0,function(){return e(this,function(n){switch(n.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}})})},n.prototype.updateHeaderToken=function(n,t){if(n.headers||(n.headers={}),t){n.headers.Authorization="Bearer "+t;return}n.headers.Authorization&&delete n.headers.Authorization},n.prototype.poll=function(n,t){return f(this,void 0,void 0,function(){var h,s,i,f;return e(this,function(e){switch(e.label){case 0:e.trys.push([0,,8,9]);e.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:h=e.sent();this.updateHeaderToken(t,h);e.label=3;case 3:return e.trys.push([3,5,,6]),s=n+"&_="+Date.now(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) polling: "+s+"."),[4,this.httpClient.get(s,t)];case 4:if(i=e.sent(),i.statusCode===204)this.logger.log(r.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1;else if(i.statusCode!==200)this.logger.log(r.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new o.HttpError(i.statusText||"",i.statusCode),this.running=!1;else if(i.content){if(this.logger.log(r.LogLevel.Trace,"(LongPolling transport) data received. "+Object(u.getDataDetail)(i.content,this.logMessageContent)+"."),this.onreceive)this.onreceive(i.content)}else this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing.");return[3,6];case 5:return f=e.sent(),this.running?f instanceof o.TimeoutError?this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=f,this.running=!1):this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+f.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},n.prototype.send=function(n){return f(this,void 0,void 0,function(){return e(this,function(){return this.running?[2,Object(u.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},n.prototype.stop=function(){return f(this,void 0,void 0,function(){var n,t;return e(this,function(i){switch(i.label){case 0:this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Stopping polling.");this.running=!1;this.pollAbort.abort();i.label=1;case 1:return i.trys.push([1,,5,6]),[4,this.receiving];case 2:return i.sent(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),n={headers:{}},[4,this.getAccessToken()];case 3:return t=i.sent(),this.updateHeaderToken(n,t),[4,this.httpClient.delete(this.url,n)];case 4:return i.sent(),this.logger.log(r.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(r.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},n.prototype.raiseOnClose=function(){if(this.onclose){var n="(LongPolling transport) Firing onclose event.";this.closeError&&(n+=" Error: "+this.closeError);this.logger.log(r.LogLevel.Trace,n);this.onclose(this.closeError)}},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"AbortController",function(){return r});var r=function(){function n(){this.isAborted=!1;this.onabort=null}return n.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(n.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"ServerSentEventsTransport",function(){return s});var u=i(9),f=i(18),r=i(13),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},o=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},s=function(){function n(n,t,i,r,u){this.httpClient=n;this.accessTokenFactory=t;this.logger=i;this.logMessageContent=r;this.eventSourceConstructor=u;this.onreceive=null;this.onclose=null}return n.prototype.connect=function(n,t){return e(this,void 0,void 0,function(){var e,i=this;return o(this,function(o){switch(o.label){case 0:return(r.Arg.isRequired(n,"url"),r.Arg.isRequired(t,"transferFormat"),r.Arg.isIn(t,f.TransferFormat,"transferFormat"),this.logger.log(u.LogLevel.Trace,"(SSE transport) Connecting."),this.url=n,!this.accessTokenFactory)?[3,2]:[4,this.accessTokenFactory()];case 1:e=o.sent();e&&(n+=(n.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(e)));o.label=2;case 2:return[2,new Promise(function(e,o){var h=!1,s,c;if(t!==f.TransferFormat.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}typeof window!="undefined"?s=new i.eventSourceConstructor(n,{withCredentials:!0}):(c=i.httpClient.getCookieString(n),s=new i.eventSourceConstructor(n,{withCredentials:!0,headers:{Cookie:c}}));try{s.onmessage=function(n){if(i.onreceive)try{i.logger.log(u.LogLevel.Trace,"(SSE transport) data received. "+Object(r.getDataDetail)(n.data,i.logMessageContent)+".");i.onreceive(n.data)}catch(t){i.close(t);return}};s.onerror=function(n){var t=new Error(n.data||"Error occurred");h?i.close(t):o(t)};s.onopen=function(){i.logger.log(u.LogLevel.Information,"SSE connected to "+i.url);i.eventSource=s;h=!0;e()}}catch(l){o(l);return}})]}})})},n.prototype.send=function(n){return e(this,void 0,void 0,function(){return o(this,function(){return this.eventSource?[2,Object(r.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},n.prototype.stop=function(){return this.close(),Promise.resolve()},n.prototype.close=function(n){if(this.eventSource&&(this.eventSource.close(),this.eventSource=undefined,this.onclose))this.onclose(n)},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"WebSocketTransport",function(){return s});var r=i(9),f=i(18),u=i(13),e=undefined&&undefined.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},o=undefined&&undefined.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},s=function(){function n(n,t,i,r,u){this.logger=i;this.accessTokenFactory=t;this.logMessageContent=r;this.webSocketConstructor=u;this.httpClient=n;this.onreceive=null;this.onclose=null}return n.prototype.connect=function(n,t){return e(this,void 0,void 0,function(){var e,i=this;return o(this,function(o){switch(o.label){case 0:return(u.Arg.isRequired(n,"url"),u.Arg.isRequired(t,"transferFormat"),u.Arg.isIn(t,f.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(WebSockets transport) Connecting."),!this.accessTokenFactory)?[3,2]:[4,this.accessTokenFactory()];case 1:e=o.sent();e&&(n+=(n.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(e)));o.label=2;case 2:return[2,new Promise(function(e,o){n=n.replace(/^http/,"ws");var s,h=i.httpClient.getCookieString(n);typeof window=="undefined"&&h&&(s=new i.webSocketConstructor(n,undefined,{headers:{Cookie:""+h}}));s||(s=new i.webSocketConstructor(n));t===f.TransferFormat.Binary&&(s.binaryType="arraybuffer");s.onopen=function(){i.logger.log(r.LogLevel.Information,"WebSocket connected to "+n+".");i.webSocket=s;e()};s.onerror=function(n){var t=null;typeof ErrorEvent!="undefined"&&n instanceof ErrorEvent&&(t=n.error);o(t)};s.onmessage=function(n){if(i.logger.log(r.LogLevel.Trace,"(WebSockets transport) data received. "+Object(u.getDataDetail)(n.data,i.logMessageContent)+"."),i.onreceive)i.onreceive(n.data)};s.onclose=function(n){return i.close(n)}})]}})})},n.prototype.send=function(n){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(u.getDataDetail)(n,this.logMessageContent)+"."),this.webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},n.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=undefined,this.close(undefined)),Promise.resolve()},n.prototype.close=function(n){if(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose)if(n&&(n.wasClean===!1||n.code!==1e3))this.onclose(new Error("WebSocket closed with status code: "+n.code+" ("+n.reason+")."));else this.onclose()},n}()},function(n,t,i){"use strict";i.r(t);i.d(t,"JsonHubProtocol",function(){return h});var r=i(15),f=i(9),e=i(18),o=i(14),u=i(12),s="json",h=function(){function n(){this.name=s;this.version=1;this.transferFormat=e.TransferFormat.Text}return n.prototype.parseMessages=function(n,t){var c,s,e,h,l,i;if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];for(t===null&&(t=o.NullLogger.instance),c=u.TextMessageFormat.parse(n),s=[],e=0,h=c;e<h.length;e++){if(l=h[e],i=JSON.parse(l),typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case r.MessageType.Invocation:this.isInvocationMessage(i);break;case r.MessageType.StreamItem:this.isStreamItemMessage(i);break;case r.MessageType.Completion:this.isCompletionMessage(i);break;case r.MessageType.Ping:break;case r.MessageType.Close:break;default:t.log(f.LogLevel.Information,"Unknown message type '"+i.type+"' ignored.");continue}s.push(i)}return s},n.prototype.writeMessage=function(n){return u.TextMessageFormat.write(JSON.stringify(n))},n.prototype.isInvocationMessage=function(n){this.assertNotEmptyString(n.target,"Invalid payload for Invocation message.");n.invocationId!==undefined&&this.assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")},n.prototype.isStreamItemMessage=function(n){if(this.assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===undefined)throw new Error("Invalid payload for StreamItem message.");},n.prototype.isCompletionMessage=function(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this.assertNotEmptyString(n.error,"Invalid payload for Completion message.");this.assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")},n.prototype.assertNotEmptyString=function(n,t){if(typeof n!="string"||n==="")throw new Error(t);},n}()}])});
/*! 4.29.8 / Consumer  */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PubNub=t():n.PubNub=t()}(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=27)}([function(n){n.exports=function(n){return n&&n.__esModule?n:{"default":n}}},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNListFilesOperation:"PNListFilesOperation",PNGenerateUploadUrlOperation:"PNGenerateUploadUrlOperation",PNPublishFileOperation:"PNPublishFileOperation",PNGetFileUrlOperation:"PNGetFileUrlOperation",PNDownloadFileOperation:"PNDownloadFileOperation",PNGetAllUUIDMetadataOperation:"PNGetAllUUIDMetadataOperation",PNGetUUIDMetadataOperation:"PNGetUUIDMetadataOperation",PNSetUUIDMetadataOperation:"PNSetUUIDMetadataOperation",PNRemoveUUIDMetadataOperation:"PNRemoveUUIDMetadataOperation",PNGetAllChannelMetadataOperation:"PNGetAllChannelMetadataOperation",PNGetChannelMetadataOperation:"PNGetChannelMetadataOperation",PNSetChannelMetadataOperation:"PNSetChannelMetadataOperation",PNRemoveChannelMetadataOperation:"PNRemoveChannelMetadataOperation",PNSetMembersOperation:"PNSetMembersOperation",PNSetMembershipsOperation:"PNSetMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit"};n.exports=t.default},function(n){"use strict";n.exports={}},function(n,t,i){"use strict";(function(t){function i(n){return encodeURIComponent(n).replace(/[!~*'()]/g,function(n){return"%".concat(n.charCodeAt(0).toString(16).toUpperCase())})}function r(n){return function(n){var t=[];return Object.keys(n).forEach(function(n){return t.push(n)}),t}(n).sort()}var u="The Objects v1 API has been deprecated.\nYou can learn more about Objects v2 API at https://www.pubnub.com/docs/web-javascript/api-reference-objects.\nIf you have questions about the Objects v2 API or require additional help with migrating to the new data model, please contact PubNub Support at support@pubnub.com.";n.exports={signPamFromParams:function(n){return r(n).map(function(t){return"".concat(t,"=").concat(i(n[t]))}).join("&")},endsWith:function(n,t){return-1!==n.indexOf(t,this.length-t.length)},createPromise:function(){var n,t;return{promise:new Promise(function(i,r){n=i;t=r}),reject:t,fulfill:n}},encodeString:i,deprecated:function(n){return function(){var i,r;return void 0!==t&&"test"!==(null===(i=t)||void 0===i||null===(r=i.env)||void 0===r?void 0:"production")&&console.warn(u),n.apply(void 0,arguments)}}}}).call(this,i(39))},function(n){n.exports=function(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}},function(n){n.exports=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}},function(n){function t(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}n.exports=function(n,i,r){return i&&t(n.prototype,i),r&&t(n,r),n}},function(n){function t(i){return n.exports="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t=function(n){return typeof n}:t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(i)}n.exports=t},function(n,t,i){"use strict";var u=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var e=u(i(5)),o=u(i(6)),r=u(i(4)),f=u(i(17)),s=(i(2),function(){function n(t){var u,o,i=t.setup,s=t.db;e.default(this,n);r.default(this,"_db",void 0);r.default(this,"subscribeKey",void 0);r.default(this,"publishKey",void 0);r.default(this,"secretKey",void 0);r.default(this,"cipherKey",void 0);r.default(this,"authKey",void 0);r.default(this,"UUID",void 0);r.default(this,"proxy",void 0);r.default(this,"instanceId",void 0);r.default(this,"sdkName",void 0);r.default(this,"sdkFamily",void 0);r.default(this,"partnerId",void 0);r.default(this,"filterExpression",void 0);r.default(this,"suppressLeaveEvents",void 0);r.default(this,"secure",void 0);r.default(this,"origin",void 0);r.default(this,"logVerbosity",void 0);r.default(this,"useInstanceId",void 0);r.default(this,"useRequestId",void 0);r.default(this,"keepAlive",void 0);r.default(this,"keepAliveSettings",void 0);r.default(this,"autoNetworkDetection",void 0);r.default(this,"announceSuccessfulHeartbeats",void 0);r.default(this,"announceFailedHeartbeats",void 0);r.default(this,"_presenceTimeout",void 0);r.default(this,"_heartbeatInterval",void 0);r.default(this,"_subscribeRequestTimeout",void 0);r.default(this,"_transactionalRequestTimeout",void 0);r.default(this,"_useSendBeacon",void 0);r.default(this,"_PNSDKSuffix",void 0);r.default(this,"requestMessageCountThreshold",void 0);r.default(this,"restore",void 0);r.default(this,"dedupeOnSubscribe",void 0);r.default(this,"maximumCacheSize",void 0);r.default(this,"customEncrypt",void 0);r.default(this,"customDecrypt",void 0);r.default(this,"fileUploadPublishRetryLimit",void 0);r.default(this,"useRandomIVs",void 0);this._PNSDKSuffix={};this._db=s;this.instanceId="pn-".concat(f.default.createUUID());this.secretKey=i.secretKey||i.secret_key;this.subscribeKey=i.subscribeKey||i.subscribe_key;this.publishKey=i.publishKey||i.publish_key;this.sdkName=i.sdkName;this.sdkFamily=i.sdkFamily;this.partnerId=i.partnerId;this.setAuthKey(i.authKey);this.setCipherKey(i.cipherKey);this.setFilterExpression(i.filterExpression);this.origin=i.origin||"ps.pndsn.com";this.secure=i.ssl||!1;this.restore=i.restore||!1;this.proxy=i.proxy;this.keepAlive=i.keepAlive;this.keepAliveSettings=i.keepAliveSettings;this.autoNetworkDetection=i.autoNetworkDetection||!1;this.dedupeOnSubscribe=i.dedupeOnSubscribe||!1;this.maximumCacheSize=i.maximumCacheSize||100;this.customEncrypt=i.customEncrypt;this.customDecrypt=i.customDecrypt;this.fileUploadPublishRetryLimit=null!==(u=i.fileUploadPublishRetryLimit)&&void 0!==u?u:5;this.useRandomIVs=null!==(o=i.useRandomIVs)&&void 0!==o&&o;"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0);this.logVerbosity=i.logVerbosity||!1;this.suppressLeaveEvents=i.suppressLeaveEvents||!1;this.announceFailedHeartbeats=i.announceFailedHeartbeats||!0;this.announceSuccessfulHeartbeats=i.announceSuccessfulHeartbeats||!1;this.useInstanceId=i.useInstanceId||!1;this.useRequestId=i.useRequestId||!1;this.requestMessageCountThreshold=i.requestMessageCountThreshold;this.setTransactionTimeout(i.transactionalRequestTimeout||15e3);this.setSubscribeTimeout(i.subscribeRequestTimeout||31e4);this.setSendBeaconConfig(i.useSendBeacon||!0);i.presenceTimeout?this.setPresenceTimeout(i.presenceTimeout):this._presenceTimeout=300;null!=i.heartbeatInterval&&this.setHeartbeatInterval(i.heartbeatInterval);this.setUUID(this._decideUUID(i.uuid))}return o.default(n,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(n){return this.authKey=n,this}},{key:"setCipherKey",value:function(n){return this.cipherKey=n,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(n){return this._db&&this._db.set&&this._db.set("".concat(this.subscribeKey,"uuid"),n),this.UUID=n,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(n){return this.filterExpression=n,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(n){return n>=20?this._presenceTimeout=n:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(n){this.proxy=n}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(n){return this._heartbeatInterval=n,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(n){return this._subscribeRequestTimeout=n,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(n){return this._transactionalRequestTimeout=n,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(n){return this._useSendBeacon=n,this}},{key:"getVersion",value:function(){return"4.29.8"}},{key:"_addPnsdkSuffix",value:function(n,t){this._PNSDKSuffix[n]=t}},{key:"_getPnsdkSuffix",value:function(n){var t=this;return Object.keys(this._PNSDKSuffix).reduce(function(i,r){return i+n+t._PNSDKSuffix[r]},"")}},{key:"_decideUUID",value:function(n){return n||(this._db&&this._db.get&&this._db.get("".concat(this.subscribeKey,"uuid"))?this._db.get("".concat(this.subscribeKey,"uuid")):"pn-".concat(f.default.createUUID()))}}]),n}());t.default=s;n.exports=t.default},function(n,t,i){var r=i(77),u=i(78),f=i(79),e=i(81);n.exports=function(n,t){return r(n)||u(n,t)||f(n,t)||e()}},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"};n.exports=t.default},function(n,t,i){n.exports=i(72)},function(n){function t(n,t,i,r,u,f,e){try{var o=n[f](e),s=o.value}catch(n){return void i(n)}o.done?t(s):Promise.resolve(s).then(r,u)}n.exports=function(n){return function(){var i=this,r=arguments;return new Promise(function(u,f){function e(n){t(o,u,f,e,s,"next",n)}function s(n){t(o,u,f,e,s,"throw",n)}var o=n.apply(i,r);e(void 0)})}}},function(n){function t(i){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(i)}n.exports=t},function(n,t,i){var r=i(15);n.exports=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&r(n,t)}},function(n){function t(i,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(i,r)}n.exports=t},function(n,t,i){var r=i(7),u=i(19);n.exports=function(n,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(n):t}},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(31));u={createUUID:function(){return r.default.uuid?r.default.uuid():r.default()}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";function c(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function l(n){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?c(Object(i),!0).forEach(function(t){a.default(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function d(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=s.default(n),u;return t?(u=s.default(this).constructor,i=Reflect.construct(r,arguments,u)):i=r.apply(this,arguments),p.default(this,i)}}function o(n){return(t={message:n}).type="validationError",t.error=!0,t;var t}function g(n,t,i){return n.usePost&&n.usePost(t,i)?n.postURL(t,i):n.usePatch&&n.usePatch(t,i)?n.patchURL(t,i):n.useGetFile&&n.useGetFile(t,i)?n.getFileURL(t,i):n.getURL(t,i)}function nt(n,t,i){var r;return n.getAuthToken&&(r=n.getAuthToken(t,i)),r}function tt(n){var t,i;return n.sdkName?n.sdkName:(t="PubNub-JS-".concat(n.sdkFamily),n.partnerId&&(t+="-".concat(n.partnerId)),t+="/".concat(n.getVersion()),i=n._getPnsdkSuffix(" "),i.length>0&&(t+=i),t)}function f(n,t,i){return t.usePost&&t.usePost(n,i)?"POST":t.usePatch&&t.usePatch(n,i)?"PATCH":t.useDelete&&t.useDelete(n,i)?"DELETE":t.useGetFile&&t.useGetFile(n,i)?"GETFILE":"GET"}function it(n,t,i,r,u){var a=n.config,v=n.crypto,o=f(n,u,r),s,c,l,e;i.timestamp=Math.floor((new Date).getTime()/1e3);"PNPublishOperation"===u.getOperation()&&u.usePost&&u.usePost(n,r)&&(o="GET");s="".concat(o,"\n").concat(a.publishKey,"\n").concat(t,"\n").concat(h.default.signPamFromParams(i),"\n");"POST"===o?(c=u.postPayload(n,r),s+="string"==typeof c?c:JSON.stringify(c)):"PATCH"===o&&(l=u.patchPayload(n,r),s+="string"==typeof l?l:JSON.stringify(l));e="v2.".concat(v.HMACSHA256(s));e=(e=(e=e.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=+$/,"");i.signature=e}var r=i(0),u;Object.defineProperty(t,"__esModule",{value:!0});t.createValidationError=o;t.default=function(n,t){var y=n.networking,a=n.config,rt=n.telemetryManager,ut=b.default.createUUID(),c=null,s=null,i={},w,ft,st,et,v,ht,ct;if(t.getOperation()===e.default.PNTimeOperation||t.getOperation()===e.default.PNChannelGroupsOperation?c=arguments.length<=2?void 0:arguments[2]:(i=arguments.length<=2?void 0:arguments[2],c=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||c||(s=h.default.createPromise()),w=t.validateParams(n,i),w)return c?c(o(w)):s?(s.reject(new u("Validation failed, check status for details",o(w))),s.promise):void 0;var d,r=t.prepareParams(n,i),ot=g(t,n,i),p={url:ot,operation:t.getOperation(),timeout:t.getRequestTimeout(n),headers:t.getRequestHeaders?t.getRequestHeaders():{},ignoreBody:"function"==typeof t.ignoreBody&&t.ignoreBody(n),forceBuffered:"function"==typeof t.forceBuffered?t.forceBuffered(n,i):null};return(r.uuid=a.UUID,r.pnsdk=tt(a),ft=rt.operationsLatencyForRequest(),Object.keys(ft).length&&(r=l(l({},r),ft)),a.useInstanceId&&(r.instanceid=a.instanceId),a.useRequestId&&(r.requestid=ut),t.isAuthSupported()&&(st=nt(t,n,i),et=st||a.getAuthKey(),et&&(r.auth=et)),a.secretKey&&it(n,ot,r,i,t),v=function(r,f){var h,o;r.error?c?c(r):s&&s.reject(new u("PubNub call failed, check status for details",r)):(rt.stopLatencyMeasure(t.getOperation(),ut),o=t.handleResponse(n,f,i),"function"!=typeof(null===(h=o)||void 0===h?void 0:h.then)&&(o=Promise.resolve(o)),o.then(function(n){c?c(r,n):s&&s.fulfill(n)}).catch(function(n){if(c){var i=n;t.getOperation()===e.default.PNSubscribeOperation&&(i={statusCode:400,error:!0,operation:t.getOperation(),errorData:n,category:k.default.PNUnknownCategory});c(i,null)}else s&&s.reject(new u("PubNub call failed, check status for details",n))}))},(rt.startLatencyMeasure(t.getOperation(),ut),"POST"===f(n,t,i))?(ht=t.postPayload(n,i),d=y.POST(r,ht,p,v)):"PATCH"===f(n,t,i)?(ct=t.patchPayload(n,i),d=y.PATCH(r,ct,p,v)):d="DELETE"===f(n,t,i)?y.DELETE(r,p,v):"GETFILE"===f(n,t,i)?y.GETFILE(r,p,v):y.GET(r,p,v),t.getOperation()===e.default.PNSubscribeOperation)?d:s?s.promise:void 0};t.PubNubError=void 0;var a=r(i(4)),v=r(i(5)),y=r(i(14)),p=r(i(16)),s=r(i(13)),w=r(i(45)),b=r(i(17)),h=(i(2),r(i(3))),e=(r(i(8)),r(i(1))),k=r(i(10));u=function(n){function t(n,r){var u;return v.default(this,t),(u=i.call(this,n)).name=u.constructor.name,u.status=r,u.message=n,u}y.default(t,n);var i=d(t);return t}(w.default(Error));t.PubNubError=u},function(n){n.exports=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}},function(n,t,i){"use strict";(function(r){function o(n){for(var i=[],t=0;t<n.length;t+=1)i[t/4|0]|=n[t]<<24-8*t;return u.default.lib.WordArray.create(i,n.length)}var e=i(0),s;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var h=e(i(5)),c=e(i(6)),f=e(i(4)),u=(e(i(8)),e(i(22)));s=function(){function n(t){var i=t.config;h.default(this,n);f.default(this,"_config",void 0);f.default(this,"_iv",void 0);f.default(this,"_allowedKeyEncodings",void 0);f.default(this,"_allowedKeyLengths",void 0);f.default(this,"_allowedModes",void 0);f.default(this,"_defaultOptions",void 0);this._config=i;this._iv="0123456789012345";this._allowedKeyEncodings=["hex","utf8","base64","binary"];this._allowedKeyLengths=[128,256];this._allowedModes=["ecb","cbc"];this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return c.default(n,[{key:"HMACSHA256",value:function(n){return u.default.HmacSHA256(n,this._config.secretKey).toString(u.default.enc.Base64)}},{key:"SHA256",value:function(n){return u.default.SHA256(n).toString(u.default.enc.Hex)}},{key:"_parseOptions",value:function(n){var t=n||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(n,t){return"base64"===t.keyEncoding?u.default.enc.Base64.parse(n):"hex"===t.keyEncoding?u.default.enc.Hex.parse(n):n}},{key:"_getPaddedKey",value:function(n,t){return n=this._decodeKey(n,t),t.encryptKey?u.default.enc.Utf8.parse(this.SHA256(n).slice(0,32)):n}},{key:"_getMode",value:function(n){return"ecb"===n.mode?u.default.mode.ECB:u.default.mode.CBC}},{key:"_getIV",value:function(n){return"cbc"===n.mode?u.default.enc.Utf8.parse(this._iv):null}},{key:"_getRandomIV",value:function(){return u.default.lib.WordArray.random(16)}},{key:"encrypt",value:function(n,t,i){return this._config.customEncrypt?this._config.customEncrypt(n):this.pnEncrypt(n,t,i)}},{key:"decrypt",value:function(n,t,i){return this._config.customDecrypt?this._config.customDecrypt(n):this.pnDecrypt(n,t,i)}},{key:"pnEncrypt",value:function(n,t,i){var r,f,e,o,s;return!t&&!this._config.cipherKey?n:(i=this._parseOptions(i),r=this._getMode(i),f=this._getPaddedKey(t||this._config.cipherKey,i),this._config.useRandomIVs)?(e=this._getRandomIV(),o=u.default.AES.encrypt(n,f,{iv:e,mode:r}).ciphertext,e.clone().concat(o.clone()).toString(u.default.enc.Base64)):(s=this._getIV(i),u.default.AES.encrypt(n,f,{iv:s,mode:r}).ciphertext.toString(u.default.enc.Base64)||n)}},{key:"pnDecrypt",value:function(n,t,i){var f,e,h,c,l,a;if(!t&&!this._config.cipherKey)return n;if(i=this._parseOptions(i),f=this._getMode(i),e=this._getPaddedKey(t||this._config.cipherKey,i),this._config.useRandomIVs){var s=r.from(n,"base64"),v=o(s.slice(0,16)),y=o(s.slice(16));try{return h=u.default.AES.decrypt({ciphertext:y},e,{iv:v,mode:f}).toString(u.default.enc.Utf8),JSON.parse(h)}catch(n){return null}}else{c=this._getIV(i);try{return l=u.default.enc.Base64.parse(n),a=u.default.AES.decrypt({ciphertext:l},e,{iv:c,mode:f}).toString(u.default.enc.Utf8),JSON.parse(a)}catch(n){return null}}}}]),n}();t.default=s;n.exports=t.default}).call(this,i(21).Buffer)},function(n,t,i){"use strict";(function(n){
/*!
             * The buffer module from node.js, for the browser.
             *
             * @author   Feross Aboukhadijeh <http://feross.org>
             * @license  MIT
             */
function h(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(n,t){if(h()<t)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=r.prototype:(null===n&&(n=new r(t)),n.length=t),n}function r(n,t,i){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(n,t,i);if("number"==typeof n){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,n)}return d(this,n,t,i)}function d(n,t,i,u){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(n,t,i,u){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(u||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===u?new Uint8Array(t):void 0===u?new Uint8Array(t,i):new Uint8Array(t,i,u),r.TYPED_ARRAY_SUPPORT?(n=t).__proto__=r.prototype:n=w(n,t),n}(n,t,i,u):"string"==typeof t?function(n,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!r.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var u=0|nt(t,i),f=(n=e(n,u)).write(t,i);return f!==u&&(n=n.slice(0,f)),n}(n,t,i):function(n,t){var i,u;if(r.isBuffer(t))return i=0|b(t.length),0===(n=e(n,i)).length||t.copy(n,0,0,i),n;if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(u=t.length)!=u?e(n,0):w(n,t);if("Buffer"===t.type&&k(t.data))return w(n,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}(n,t)}function g(n){if("number"!=typeof n)throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative');}function p(n,t){if(g(t),n=e(n,t<0?0:0|b(t)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)n[i]=0;return n}function w(n,t){var r=t.length<0?0:0|b(t.length),i;for(n=e(n,r),i=0;i<r;i+=1)n[i]=255&t[i];return n}function b(n){if(n>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|n}function nt(n,t){var i,u;if(r.isBuffer(n))return n.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;if("string"!=typeof n&&(n=""+n),i=n.length,0===i)return 0;for(u=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return a(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return ht(n).length;default:if(u)return a(n).length;t=(""+t).toLowerCase();u=!0}}function ct(n,t,i){var r=!1;if(((void 0===t||t<0)&&(t=0),t>this.length)||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(t>>>=0))return"";for(n||(n="utf8");;)switch(n){case"hex":return dt(this,t,i);case"utf8":case"utf-8":return ut(this,t,i);case"ascii":return bt(this,t,i);case"latin1":case"binary":return kt(this,t,i);case"base64":return wt(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase();r=!0}}function o(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}function tt(n,t,i,u,f){if(0===n.length)return-1;if("string"==typeof i?(u=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=f?0:n.length-1),i<0&&(i=n.length+i),i>=n.length){if(f)return-1;i=n.length-1}else if(i<0){if(!f)return-1;i=0}if("string"==typeof t&&(t=r.from(t,u)),r.isBuffer(t))return 0===t.length?-1:it(n,t,i,u,f);if("number"==typeof t)return t&=255,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(n,t,i):Uint8Array.prototype.lastIndexOf.call(n,t,i):it(n,[t],i,u,f);throw new TypeError("val must be string, number or Buffer");}function it(n,t,i,r,u){function l(n,t){return 1===h?n[t]:n.readUInt16BE(t*h)}var f,h=1,c=n.length,o=t.length,e,a,s;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(n.length<2||t.length<2)return-1;h=2;c/=2;o/=2;i/=2}if(u)for(e=-1,f=i;f<c;f++)if(l(n,f)===l(t,-1===e?0:f-e)){if(-1===e&&(e=f),f-e+1===o)return e*h}else-1!==e&&(f-=f-e),e=-1;else for(i+o>c&&(i=c-o),f=i;f>=0;f--){for(a=!0,s=0;s<o;s++)if(l(n,f+s)!==l(t,s)){a=!1;break}if(a)return f}return-1}function lt(n,t,i,r){var f,e,u,o;if(i=Number(i)||0,f=n.length-i,r?(r=Number(r))>f&&(r=f):r=f,e=t.length,e%2!=0)throw new TypeError("Invalid hex string");for(r>e/2&&(r=e/2),u=0;u<r;++u){if(o=parseInt(t.substr(2*u,2),16),isNaN(o))return u;n[i+u]=o}return u}function at(n,t,i,r){return v(a(t,n.length-i),n,i,r)}function rt(n,t,i,r){return v(function(n){for(var i=[],t=0;t<n.length;++t)i.push(255&n.charCodeAt(t));return i}(t),n,i,r)}function vt(n,t,i,r){return rt(n,t,i,r)}function yt(n,t,i,r){return v(ht(t),n,i,r)}function pt(n,t,i,r){return v(function(n,t){for(var i,f,e,r=[],u=0;u<n.length&&!((t-=2)<0);++u)i=n.charCodeAt(u),f=i>>8,e=i%256,r.push(e),r.push(f);return r}(t,n.length-i),n,i,r)}function wt(n,t,i){return 0===t&&i===n.length?y.fromByteArray(n):y.fromByteArray(n.slice(t,i))}function ut(n,t,i){var h,u;for(i=Math.min(n.length,i),h=[],u=t;u<i;){var e,s,l,f,o=n[u],r=null,c=o>239?4:o>223?3:o>191?2:1;if(u+c<=i)switch(c){case 1:o<128&&(r=o);break;case 2:128==(192&(e=n[u+1]))&&(f=(31&o)<<6|63&e)>127&&(r=f);break;case 3:e=n[u+1];s=n[u+2];128==(192&e)&&128==(192&s)&&(f=(15&o)<<12|(63&e)<<6|63&s)>2047&&(f<55296||f>57343)&&(r=f);break;case 4:e=n[u+1];s=n[u+2];l=n[u+3];128==(192&e)&&128==(192&s)&&128==(192&l)&&(f=(15&o)<<18|(63&e)<<12|(63&s)<<6|63&l)>65535&&f<1114112&&(r=f)}null===r?(r=65533,c=1):r>65535&&(r-=65536,h.push(r>>>10&1023|55296),r=56320|1023&r);h.push(r);u+=c}return function(n){var r=n.length,i,t;if(r<=4096)return String.fromCharCode.apply(String,n);for(i="",t=0;t<r;)i+=String.fromCharCode.apply(String,n.slice(t,t+=4096));return i}(h)}function bt(n,t,i){var u="",r;for(i=Math.min(n.length,i),r=t;r<i;++r)u+=String.fromCharCode(127&n[r]);return u}function kt(n,t,i){var u="",r;for(i=Math.min(n.length,i),r=t;r<i;++r)u+=String.fromCharCode(n[r]);return u}function dt(n,t,i){var f=n.length,u,r;for((!t||t<0)&&(t=0),(!i||i<0||i>f)&&(i=f),u="",r=t;r<i;++r)u+=ni(n[r]);return u}function gt(n,t,i){for(var u=n.slice(t,i),f="",r=0;r<u.length;r+=2)f+=String.fromCharCode(u[r]+256*u[r+1]);return f}function u(n,t,i){if(n%1!=0||n<0)throw new RangeError("offset is not uint");if(n+t>i)throw new RangeError("Trying to access beyond buffer length");}function f(n,t,i,u,f,e){if(!r.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<e)throw new RangeError('"value" argument is out of bounds');if(i+u>n.length)throw new RangeError("Index out of range");}function c(n,t,i,r){t<0&&(t=65535+t+1);for(var u=0,f=Math.min(n.length-i,2);u<f;++u)n[i+u]=(t&255<<8*(r?u:1-u))>>>8*(r?u:1-u)}function l(n,t,i,r){t<0&&(t=4294967295+t+1);for(var u=0,f=Math.min(n.length-i,4);u<f;++u)n[i+u]=t>>>8*(r?u:3-u)&255}function ft(n,t,i,r){if(i+r>n.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range");}function et(n,t,i,r,u){return u||ft(n,0,i,4),s.write(n,t,i,r,23,4),i+4}function ot(n,t,i,r,u){return u||ft(n,0,i,8),s.write(n,t,i,r,52,8),i+8}function ni(n){return n<16?"0"+n.toString(16):n.toString(16)}function a(n,t){var i;t=t||1/0;for(var e=n.length,u=null,r=[],f=0;f<e;++f){if((i=n.charCodeAt(f))>55295&&i<57344){if(!u){if(i>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(f+1===e){(t-=3)>-1&&r.push(239,191,189);continue}u=i;continue}if(i<56320){(t-=3)>-1&&r.push(239,191,189);u=i;continue}i=65536+(u-55296<<10|i-56320)}else u&&(t-=3)>-1&&r.push(239,191,189);if(u=null,i<128){if((t-=1)<0)break;r.push(i)}else if(i<2048){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function ht(n){return y.toByteArray(function(n){if((n=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(n).replace(st,"")).length<2)return"";for(;n.length%4!=0;)n+="=";return n}(n))}function v(n,t,i,r){for(var u=0;u<r&&!(u+i>=t.length||u>=n.length);++u)t[u+i]=n[u];return u}var y=i(33),s=i(34),k=i(35),st;t.Buffer=r;t.SlowBuffer=function(n){return+n!=n&&(n=0),r.alloc(+n)};t.INSPECT_MAX_BYTES=50;r.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:function(){try{var n=new Uint8Array(1);return n.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===n.foo()&&"function"==typeof n.subarray&&0===n.subarray(1,1).byteLength}catch(n){return!1}}();t.kMaxLength=h();r.poolSize=8192;r._augment=function(n){return n.__proto__=r.prototype,n};r.from=function(n,t,i){return d(null,n,t,i)};r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0}));r.alloc=function(n,t,i){return function(n,t,i,r){return g(t),t<=0?e(n,t):void 0!==i?"string"==typeof r?e(n,t).fill(i,r):e(n,t).fill(i):e(n,t)}(null,n,t,i)};r.allocUnsafe=function(n){return p(null,n)};r.allocUnsafeSlow=function(n){return p(null,n)};r.isBuffer=function(n){return!(null==n||!n._isBuffer)};r.compare=function(n,t){if(!r.isBuffer(n)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(n===t)return 0;for(var u=n.length,f=t.length,i=0,e=Math.min(u,f);i<e;++i)if(n[i]!==t[i]){u=n[i];f=t[i];break}return u<f?-1:f<u?1:0};r.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};r.concat=function(n,t){var i,f,e,u;if(!k(n))throw new TypeError('"list" argument must be an Array of Buffers');if(0===n.length)return r.alloc(0);if(void 0===t)for(t=0,i=0;i<n.length;++i)t+=n[i].length;for(f=r.allocUnsafe(t),e=0,i=0;i<n.length;++i){if(u=n[i],!r.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(f,e);e+=u.length}return f};r.byteLength=nt;r.prototype._isBuffer=!0;r.prototype.swap16=function(){var t=this.length,n;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(n=0;n<t;n+=2)o(this,n,n+1);return this};r.prototype.swap32=function(){var t=this.length,n;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(n=0;n<t;n+=4)o(this,n,n+3),o(this,n+1,n+2);return this};r.prototype.swap64=function(){var t=this.length,n;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(n=0;n<t;n+=8)o(this,n,n+7),o(this,n+1,n+6),o(this,n+2,n+5),o(this,n+3,n+4);return this};r.prototype.toString=function(){var n=0|this.length;return 0===n?"":0===arguments.length?ut(this,0,n):ct.apply(this,arguments)};r.prototype.equals=function(n){if(!r.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n||0===r.compare(this,n)};r.prototype.inspect=function(){var n="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(n+=" ... ")),"<Buffer "+n+">"};r.prototype.compare=function(n,t,i,u,f){if(!r.isBuffer(n))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=n?n.length:0),void 0===u&&(u=0),void 0===f&&(f=this.length),t<0||i>n.length||u<0||f>this.length)throw new RangeError("out of range index");if(u>=f&&t>=i)return 0;if(u>=f)return-1;if(t>=i)return 1;if(this===n)return 0;for(var o=(f>>>=0)-(u>>>=0),s=(i>>>=0)-(t>>>=0),l=Math.min(o,s),h=this.slice(u,f),c=n.slice(t,i),e=0;e<l;++e)if(h[e]!==c[e]){o=h[e];s=c[e];break}return o<s?-1:s<o?1:0};r.prototype.includes=function(n,t,i){return-1!==this.indexOf(n,t,i)};r.prototype.indexOf=function(n,t,i){return tt(this,n,t,i,!0)};r.prototype.lastIndexOf=function(n,t,i){return tt(this,n,t,i,!1)};r.prototype.write=function(n,t,i,r){var u,f;if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0;isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}if(u=this.length-t,(void 0===i||i>u)&&(i=u),n.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(r||(r="utf8"),f=!1;;)switch(r){case"hex":return lt(this,n,t,i);case"utf8":case"utf-8":return at(this,n,t,i);case"ascii":return rt(this,n,t,i);case"latin1":case"binary":return vt(this,n,t,i);case"base64":return yt(this,n,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,n,t,i);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase();f=!0}};r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};r.prototype.slice=function(n,t){var f,i=this.length,e,u;if((n=~~n)<0?(n+=i)<0&&(n=0):n>i&&(n=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<n&&(t=n),r.TYPED_ARRAY_SUPPORT)(f=this.subarray(n,t)).__proto__=r.prototype;else for(e=t-n,f=new r(e,void 0),u=0;u<e;++u)f[u]=this[u+n];return f};r.prototype.readUIntLE=function(n,t,i){n|=0;t|=0;i||u(n,t,this.length);for(var r=this[n],f=1,e=0;++e<t&&(f*=256);)r+=this[n+e]*f;return r};r.prototype.readUIntBE=function(n,t,i){n|=0;t|=0;i||u(n,t,this.length);for(var r=this[n+--t],f=1;t>0&&(f*=256);)r+=this[n+--t]*f;return r};r.prototype.readUInt8=function(n,t){return t||u(n,1,this.length),this[n]};r.prototype.readUInt16LE=function(n,t){return t||u(n,2,this.length),this[n]|this[n+1]<<8};r.prototype.readUInt16BE=function(n,t){return t||u(n,2,this.length),this[n]<<8|this[n+1]};r.prototype.readUInt32LE=function(n,t){return t||u(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]};r.prototype.readUInt32BE=function(n,t){return t||u(n,4,this.length),16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])};r.prototype.readIntLE=function(n,t,i){n|=0;t|=0;i||u(n,t,this.length);for(var r=this[n],f=1,e=0;++e<t&&(f*=256);)r+=this[n+e]*f;return r>=(f*=128)&&(r-=Math.pow(2,8*t)),r};r.prototype.readIntBE=function(n,t,i){n|=0;t|=0;i||u(n,t,this.length);for(var f=t,e=1,r=this[n+--f];f>0&&(e*=256);)r+=this[n+--f]*e;return r>=(e*=128)&&(r-=Math.pow(2,8*t)),r};r.prototype.readInt8=function(n,t){return t||u(n,1,this.length),128&this[n]?-1*(256-this[n]):this[n]};r.prototype.readInt16LE=function(n,t){t||u(n,2,this.length);var i=this[n]|this[n+1]<<8;return 32768&i?4294901760|i:i};r.prototype.readInt16BE=function(n,t){t||u(n,2,this.length);var i=this[n+1]|this[n]<<8;return 32768&i?4294901760|i:i};r.prototype.readInt32LE=function(n,t){return t||u(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};r.prototype.readInt32BE=function(n,t){return t||u(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};r.prototype.readFloatLE=function(n,t){return t||u(n,4,this.length),s.read(this,n,!0,23,4)};r.prototype.readFloatBE=function(n,t){return t||u(n,4,this.length),s.read(this,n,!1,23,4)};r.prototype.readDoubleLE=function(n,t){return t||u(n,8,this.length),s.read(this,n,!0,52,8)};r.prototype.readDoubleBE=function(n,t){return t||u(n,8,this.length),s.read(this,n,!1,52,8)};r.prototype.writeUIntLE=function(n,t,i,r){(n=+n,t|=0,i|=0,r)||f(this,n,t,i,Math.pow(2,8*i)-1,0);var u=1,e=0;for(this[t]=255&n;++e<i&&(u*=256);)this[t+e]=n/u&255;return t+i};r.prototype.writeUIntBE=function(n,t,i,r){(n=+n,t|=0,i|=0,r)||f(this,n,t,i,Math.pow(2,8*i)-1,0);var u=i-1,e=1;for(this[t+u]=255&n;--u>=0&&(e*=256);)this[t+u]=n/e&255;return t+i};r.prototype.writeUInt8=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[t]=255&n,t+1};r.prototype.writeUInt16LE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&n,this[t+1]=n>>>8):c(this,n,t,!0),t+2};r.prototype.writeUInt16BE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=n>>>8,this[t+1]=255&n):c(this,n,t,!1),t+2};r.prototype.writeUInt32LE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=n>>>24,this[t+2]=n>>>16,this[t+1]=n>>>8,this[t]=255&n):l(this,n,t,!0),t+4};r.prototype.writeUInt32BE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=n>>>24,this[t+1]=n>>>16,this[t+2]=n>>>8,this[t+3]=255&n):l(this,n,t,!1),t+4};r.prototype.writeIntLE=function(n,t,i,r){var u;(n=+n,t|=0,r)||(u=Math.pow(2,8*i-1),f(this,n,t,i,u-1,-u));var e=0,s=1,o=0;for(this[t]=255&n;++e<i&&(s*=256);)n<0&&0===o&&0!==this[t+e-1]&&(o=1),this[t+e]=(n/s>>0)-o&255;return t+i};r.prototype.writeIntBE=function(n,t,i,r){var e;(n=+n,t|=0,r)||(e=Math.pow(2,8*i-1),f(this,n,t,i,e-1,-e));var u=i-1,s=1,o=0;for(this[t+u]=255&n;--u>=0&&(s*=256);)n<0&&0===o&&0!==this[t+u+1]&&(o=1),this[t+u]=(n/s>>0)-o&255;return t+i};r.prototype.writeInt8=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),n<0&&(n=255+n+1),this[t]=255&n,t+1};r.prototype.writeInt16LE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&n,this[t+1]=n>>>8):c(this,n,t,!0),t+2};r.prototype.writeInt16BE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=n>>>8,this[t+1]=255&n):c(this,n,t,!1),t+2};r.prototype.writeInt32LE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&n,this[t+1]=n>>>8,this[t+2]=n>>>16,this[t+3]=n>>>24):l(this,n,t,!0),t+4};r.prototype.writeInt32BE=function(n,t,i){return n=+n,t|=0,i||f(this,n,t,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),r.TYPED_ARRAY_SUPPORT?(this[t]=n>>>24,this[t+1]=n>>>16,this[t+2]=n>>>8,this[t+3]=255&n):l(this,n,t,!1),t+4};r.prototype.writeFloatLE=function(n,t,i){return et(this,n,t,!0,i)};r.prototype.writeFloatBE=function(n,t,i){return et(this,n,t,!1,i)};r.prototype.writeDoubleLE=function(n,t,i){return ot(this,n,t,!0,i)};r.prototype.writeDoubleBE=function(n,t,i){return ot(this,n,t,!1,i)};r.prototype.copy=function(n,t,i,u){if((i||(i=0),u||0===u||(u=this.length),t>=n.length&&(t=n.length),t||(t=0),u>0&&u<i&&(u=i),u===i)||0===n.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length);n.length-t<u-i&&(u=n.length-t+i);var f,e=u-i;if(this===n&&i<t&&t<u)for(f=e-1;f>=0;--f)n[f+t]=this[f+i];else if(e<1e3||!r.TYPED_ARRAY_SUPPORT)for(f=0;f<e;++f)n[f+t]=this[f+i];else Uint8Array.prototype.set.call(n,this.subarray(i,i+e),t);return e};r.prototype.fill=function(n,t,i,u){var e,f,o,s;if("string"==typeof n){if(("string"==typeof t?(u=t,t=0,i=this.length):"string"==typeof i&&(u=i,i=this.length),1===n.length)&&(e=n.charCodeAt(0),e<256&&(n=e)),void 0!==u&&"string"!=typeof u)throw new TypeError("encoding must be a string");if("string"==typeof u&&!r.isEncoding(u))throw new TypeError("Unknown encoding: "+u);}else"number"==typeof n&&(n&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,n||(n=0),"number"==typeof n)for(f=t;f<i;++f)this[f]=n;else for(o=r.isBuffer(n)?n:a(new r(n,u).toString()),s=o.length,f=0;f<i-t;++f)this[f+t]=o[f%s];return this};st=/[^+\/0-9A-Za-z-_]/g}).call(this,i(32))},function(n){"use strict";var r,u,f,e,i,t=t||function(n){var r={},u=r.lib={},e=function(){},t=u.Base={extend:function(n){e.prototype=this;var t=new e;return n&&t.mixIn(n),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}},i=u.WordArray=t.extend({init:function(n,t){n=this.words=n||[];this.sigBytes=null!=t?t:4*n.length},toString:function(n){return(n||c).stringify(this)},concat:function(n){var i=this.words,r=n.words,u=this.sigBytes,t;if(n=n.sigBytes,this.clamp(),u%4)for(t=0;t<n;t++)i[u+t>>>2]|=(r[t>>>2]>>>24-t%4*8&255)<<24-(u+t)%4*8;else if(65535<r.length)for(t=0;t<n;t+=4)i[u+t>>>2]=r[t>>>2];else i.push.apply(i,r);return this.sigBytes+=n,this},clamp:function(){var i=this.words,t=this.sigBytes;i[t>>>2]&=4294967295<<32-t%4*8;i.length=n.ceil(t/4)},clone:function(){var n=t.clone.call(this);return n.words=this.words.slice(0),n},random:function(t){for(var r=[],u=0;u<t;u+=4)r.push(4294967296*n.random()|0);return new i.init(r,t)}}),f=r.enc={},c=f.Hex={stringify:function(n){var u=n.words,i,t,r;for(n=n.sigBytes,i=[],t=0;t<n;t++)r=u[t>>>2]>>>24-t%4*8&255,i.push((r>>>4).toString(16)),i.push((15&r).toString(16));return i.join("")},parse:function(n){for(var r=n.length,u=[],t=0;t<r;t+=2)u[t>>>3]|=parseInt(n.substr(t,2),16)<<24-t%8*4;return new i.init(u,r/2)}},o=f.Latin1={stringify:function(n){var r=n.words,i,t;for(n=n.sigBytes,i=[],t=0;t<n;t++)i.push(String.fromCharCode(r[t>>>2]>>>24-t%4*8&255));return i.join("")},parse:function(n){for(var r=n.length,u=[],t=0;t<r;t++)u[t>>>2]|=(255&n.charCodeAt(t))<<24-t%4*8;return new i.init(u,r)}},l=f.Utf8={stringify:function(n){try{return decodeURIComponent(escape(o.stringify(n)))}catch(n){throw Error("Malformed UTF-8 data");}},parse:function(n){return o.parse(unescape(encodeURIComponent(n)))}},s=u.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new i.init;this._nDataBytes=0},_append:function(n){"string"==typeof n&&(n=l.parse(n));this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(t){var f=this._data,s=f.words,u=f.sigBytes,e=this.blockSize,o=u/(4*e),r;if(t=(o=t?n.ceil(o):n.max((0|o)-this._minBufferSize,0))*e,u=n.min(4*t,u),t){for(r=0;r<t;r+=e)this._doProcessBlock(s,r);r=s.splice(0,t);f.sigBytes-=u}return new i.init(r,u)},clone:function(){var n=t.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),h;return u.Hasher=s.extend({cfg:t.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){s.reset.call(this);this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){return n&&this._append(n),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,i){return new n.init(i).finalize(t)}},_createHmacHelper:function(n){return function(t,i){return new h.HMAC.init(n,i).finalize(t)}}}),h=r.algo={},r}(Math);!function(n){for(var u,v,h,i,e=t,y=(r=e.lib).WordArray,o=r.Hasher,r=e.algo,c=[],l=[],a=function(n){return 4294967296*(n-(0|n))|0},s=2,f=0;64>f;){n:{for(u=s,v=n.sqrt(u),h=2;h<=v;h++)if(!(u%h)){u=!1;break n}u=!0}u&&(8>f&&(c[f]=a(n.pow(s,.5))),l[f]=a(n.pow(s,1/3)),f++);s++}i=[];r=r.SHA256=o.extend({_doReset:function(){this._hash=new y.init(c.slice(0))},_doProcessBlock:function(n,t){for(var o,s,r=this._hash.words,f=r[0],h=r[1],c=r[2],y=r[3],e=r[4],a=r[5],v=r[6],p=r[7],u=0;64>u;u++)16>u?i[u]=0|n[t+u]:(o=i[u-15],s=i[u-2],i[u]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+i[u-7]+((s<<15|s>>>17)^(s<<13|s>>>19)^s>>>10)+i[u-16]),o=p+((e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25))+(e&a^~e&v)+l[u]+i[u],s=((f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22))+(f&h^f&c^h&c),p=v,v=a,a=e,e=y+o|0,y=c,c=h,h=f,f=o+s|0;r[0]=r[0]+f|0;r[1]=r[1]+h|0;r[2]=r[2]+c|0;r[3]=r[3]+y|0;r[4]=r[4]+e|0;r[5]=r[5]+a|0;r[6]=r[6]+v|0;r[7]=r[7]+p|0},_doFinalize:function(){var r=this._data,t=r.words,u=8*this._nDataBytes,i=8*r.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=n.floor(u/4294967296),t[15+(i+64>>>9<<4)]=u,r.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var n=o.clone.call(this);return n._hash=this._hash.clone(),n}});e.SHA256=o._createHelper(r);e.HmacSHA256=o._createHmacHelper(r)}(Math);u=(r=t).enc.Utf8;r.algo.HMAC=r.lib.Base.extend({init:function(n,t){var r,f;n=this._hasher=new n.init;"string"==typeof t&&(t=u.parse(t));r=n.blockSize;f=4*r;t.sigBytes>f&&(t=n.finalize(t));t.clamp();for(var e=this._oKey=t.clone(),o=this._iKey=t.clone(),s=e.words,h=o.words,i=0;i<r;i++)s[i]^=1549556828,h[i]^=909522486;e.sigBytes=o.sigBytes=f;this.reset()},reset:function(){var n=this._hasher;n.reset();n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var t=this._hasher;return n=t.finalize(n),t.reset(),t.finalize(this._oKey.clone().concat(n))}});e=(f=t).lib.WordArray;f.enc.Base64={stringify:function(n){var i=n.words,u=n.sigBytes,f=this._map,t,e,r;for(n.clamp(),n=[],t=0;t<u;t+=3)for(e=(i[t>>>2]>>>24-t%4*8&255)<<16|(i[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|i[t+2>>>2]>>>24-(t+2)%4*8&255,r=0;4>r&&t+.75*r<u;r++)n.push(f.charAt(e>>>6*(3-r)&63));if(i=f.charAt(64))for(;n.length%4;)n.push(i);return n.join("")},parse:function(n){var f=n.length,u=this._map,o,s;(i=u.charAt(64))&&-1!=(i=n.indexOf(i))&&(f=i);for(var i=[],r=0,t=0;t<f;t++)t%4&&(o=u.indexOf(n.charAt(t-1))<<t%4*2,s=u.indexOf(n.charAt(t))>>>6-t%4*2,i[r>>>2]|=(o|s)<<24-r%4*8,r++);return e.create(i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(n){function r(n,t,i,r,u,f,e){return((n=n+(t&i|~t&r)+u+e)<<f|n>>>32-f)+t}function u(n,t,i,r,u,f,e){return((n=n+(t&r|i&~r)+u+e)<<f|n>>>32-f)+t}function f(n,t,i,r,u,f,e){return((n=n+(t^i^r)+u+e)<<f|n>>>32-f)+t}function e(n,t,i,r,u,f,e){return((n=n+(i^(t|~r))+u+e)<<f|n>>>32-f)+t}for(var s=t,l=(o=s.lib).WordArray,h=o.Hasher,o=s.algo,i=[],c=0;64>c;c++)i[c]=4294967296*n.abs(n.sin(c+1))|0;o=o.MD5=h.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(n,t){for(var a,l=0;16>l;l++)a=n[v=t+l],n[v]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);l=this._hash.words;var v=n[t+0],y=(a=n[t+1],n[t+2]),p=n[t+3],w=n[t+4],b=n[t+5],k=n[t+6],d=n[t+7],g=n[t+8],nt=n[t+9],tt=n[t+10],it=n[t+11],rt=n[t+12],ut=n[t+13],ft=n[t+14],et=n[t+15],o=r(o=l[0],c=l[1],h=l[2],s=l[3],v,7,i[0]),s=r(s,o,c,h,a,12,i[1]),h=r(h,s,o,c,y,17,i[2]),c=r(c,h,s,o,p,22,i[3]);o=r(o,c,h,s,w,7,i[4]);s=r(s,o,c,h,b,12,i[5]);h=r(h,s,o,c,k,17,i[6]);c=r(c,h,s,o,d,22,i[7]);o=r(o,c,h,s,g,7,i[8]);s=r(s,o,c,h,nt,12,i[9]);h=r(h,s,o,c,tt,17,i[10]);c=r(c,h,s,o,it,22,i[11]);o=r(o,c,h,s,rt,7,i[12]);s=r(s,o,c,h,ut,12,i[13]);h=r(h,s,o,c,ft,17,i[14]);o=u(o,c=r(c,h,s,o,et,22,i[15]),h,s,a,5,i[16]);s=u(s,o,c,h,k,9,i[17]);h=u(h,s,o,c,it,14,i[18]);c=u(c,h,s,o,v,20,i[19]);o=u(o,c,h,s,b,5,i[20]);s=u(s,o,c,h,tt,9,i[21]);h=u(h,s,o,c,et,14,i[22]);c=u(c,h,s,o,w,20,i[23]);o=u(o,c,h,s,nt,5,i[24]);s=u(s,o,c,h,ft,9,i[25]);h=u(h,s,o,c,p,14,i[26]);c=u(c,h,s,o,g,20,i[27]);o=u(o,c,h,s,ut,5,i[28]);s=u(s,o,c,h,y,9,i[29]);h=u(h,s,o,c,d,14,i[30]);o=f(o,c=u(c,h,s,o,rt,20,i[31]),h,s,b,4,i[32]);s=f(s,o,c,h,g,11,i[33]);h=f(h,s,o,c,it,16,i[34]);c=f(c,h,s,o,ft,23,i[35]);o=f(o,c,h,s,a,4,i[36]);s=f(s,o,c,h,w,11,i[37]);h=f(h,s,o,c,d,16,i[38]);c=f(c,h,s,o,tt,23,i[39]);o=f(o,c,h,s,ut,4,i[40]);s=f(s,o,c,h,v,11,i[41]);h=f(h,s,o,c,p,16,i[42]);c=f(c,h,s,o,k,23,i[43]);o=f(o,c,h,s,nt,4,i[44]);s=f(s,o,c,h,rt,11,i[45]);h=f(h,s,o,c,et,16,i[46]);o=e(o,c=f(c,h,s,o,y,23,i[47]),h,s,v,6,i[48]);s=e(s,o,c,h,d,10,i[49]);h=e(h,s,o,c,ft,15,i[50]);c=e(c,h,s,o,b,21,i[51]);o=e(o,c,h,s,rt,6,i[52]);s=e(s,o,c,h,p,10,i[53]);h=e(h,s,o,c,tt,15,i[54]);c=e(c,h,s,o,a,21,i[55]);o=e(o,c,h,s,g,6,i[56]);s=e(s,o,c,h,et,10,i[57]);h=e(h,s,o,c,k,15,i[58]);c=e(c,h,s,o,ut,21,i[59]);o=e(o,c,h,s,w,6,i[60]);s=e(s,o,c,h,it,10,i[61]);h=e(h,s,o,c,y,15,i[62]);c=e(c,h,s,o,nt,21,i[63]);l[0]=l[0]+o|0;l[1]=l[1]+c|0;l[2]=l[2]+h|0;l[3]=l[3]+s|0},_doFinalize:function(){var u=this._data,r=u.words,t=8*this._nDataBytes,i=8*u.sigBytes,f;for(r[i>>>5]|=128<<24-i%32,f=n.floor(t/4294967296),r[15+(i+64>>>9<<4)]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),r[14+(i+64>>>9<<4)]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),u.sigBytes=4*(r.length+1),this._process(),r=(u=this._hash).words,t=0;4>t;t++)i=r[t],r[t]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return u},clone:function(){var n=h.clone.call(this);return n._hash=this._hash.clone(),n}});s.MD5=h._createHelper(o);s.HmacMD5=h._createHmacHelper(o)}(Math),function(){var n,i=t,r=(n=i.lib).Base,u=n.WordArray,f=(n=i.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(n){this.cfg=this.cfg.extend(n)},compute:function(n,t){for(var i,o,r=(e=this.cfg).hasher.create(),f=u.create(),h=f.words,s=e.keySize,e=e.iterations;h.length<s;){for(i&&r.update(i),i=r.update(n).finalize(t),r.reset(),o=1;o<e;o++)i=r.finalize(i),r.reset();f.concat(i)}return f.sigBytes=4*s,f}});i.EvpKDF=function(n,t,i){return f.create(i).compute(n,t)}}();t.lib.Cipher||function(){var n=(i=t).lib,f=n.Base,e=n.WordArray,c=n.BufferedBlockAlgorithm,l=i.enc.Base64,y=i.algo.EvpKDF,s=n.Cipher=c.extend({cfg:f.extend(),createEncryptor:function(n,t){return this.create(this._ENC_XFORM_MODE,n,t)},createDecryptor:function(n,t){return this.create(this._DEC_XFORM_MODE,n,t)},init:function(n,t,i){this.cfg=this.cfg.extend(i);this._xformMode=n;this._key=t;this.reset()},reset:function(){c.reset.call(this);this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,i,r){return("string"==typeof i?v:u).encrypt(n,t,i,r)},decrypt:function(t,i,r){return("string"==typeof i?v:u).decrypt(n,t,i,r)}}}});n.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var o=i.mode={},a=function(n,t,i){var u=this._iv,r;for(u?this._iv=void 0:u=this._prevBlock,r=0;r<i;r++)n[t+r]^=u[r]},r=(n.BlockCipherMode=f.extend({createEncryptor:function(n,t){return this.Encryptor.create(n,t)},createDecryptor:function(n,t){return this.Decryptor.create(n,t)},init:function(n,t){this._cipher=n;this._iv=t}})).extend();r.Encryptor=r.extend({processBlock:function(n,t){var i=this._cipher,r=i.blockSize;a.call(this,n,t,r);i.encryptBlock(n,t);this._prevBlock=n.slice(t,t+r)}});r.Decryptor=r.extend({processBlock:function(n,t){var i=this._cipher,r=i.blockSize,u=n.slice(t,t+r);i.decryptBlock(n,t);a.call(this,n,t,r);this._prevBlock=u}});o=o.CBC=r;r=(i.pad={}).Pkcs7={pad:function(n,t){for(var i,f=(i=(i=4*t)-n.sigBytes%i)<<24|i<<16|i<<8|i,r=[],u=0;u<i;u+=4)r.push(f);i=e.create(r,i);n.concat(i)},unpad:function(n){n.sigBytes-=255&n.words[n.sigBytes-1>>>2]}};n.BlockCipher=s.extend({cfg:s.cfg.extend({mode:o,padding:r}),reset:function(){var t,n,i;s.reset.call(this);t=(n=this.cfg).iv;n=n.mode;this._xformMode==this._ENC_XFORM_MODE?i=n.createEncryptor:(i=n.createDecryptor,this._minBufferSize=1);this._mode=i.call(n,this,t&&t.words)},_doProcessBlock:function(n,t){this._mode.processBlock(n,t)},_doFinalize:function(){var t=this.cfg.padding,n;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),n=this._process(!0)):(n=this._process(!0),t.unpad(n)),n},blockSize:4});var h=n.CipherParams=f.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),u=(o=(i.format={}).OpenSSL={stringify:function(n){var t=n.ciphertext;return((n=n.salt)?e.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(n){var t=(n=l.parse(n)).words,i;return 1398893684==t[0]&&1701076831==t[1]&&(i=e.create(t.slice(2,4)),t.splice(0,4),n.sigBytes-=16),h.create({ciphertext:n,salt:i})}},n.SerializableCipher=f.extend({cfg:f.extend({format:o}),encrypt:function(n,t,i,r){r=this.cfg.extend(r);var u=n.createEncryptor(i,r);return t=u.finalize(t),u=u.cfg,h.create({ciphertext:t,key:i,iv:u.iv,algorithm:n,mode:u.mode,padding:u.padding,blockSize:n.blockSize,formatter:r.format})},decrypt:function(n,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n.createDecryptor(i,r).finalize(t.ciphertext)},_parse:function(n,t){return"string"==typeof n?t.parse(n,this):n}})),i=(i.kdf={}).OpenSSL={execute:function(n,t,i,r){return r||(r=e.random(8)),n=y.create({keySize:t+i}).compute(n,r),i=e.create(n.words.slice(t),4*i),n.sigBytes=4*t,h.create({key:n,iv:i,salt:r})}},v=n.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:i}),encrypt:function(n,t,i,r){return i=(r=this.cfg.extend(r)).kdf.execute(i,n.keySize,n.ivSize),r.iv=i.iv,(n=u.encrypt.call(this,n,t,i.key,r)).mixIn(i),n},decrypt:function(n,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),i=r.kdf.execute(i,n.keySize,n.ivSize,t.salt),r.iv=i.iv,u.decrypt.call(this,n,t,i.key,r)}})}(),function(){for(var r,o,u,it,h=t,p=h.lib.BlockCipher,c=h.algo,i=[],w=[],b=[],k=[],d=[],g=[],l=[],a=[],v=[],y=[],f=[],e=0;256>e;e++)f[e]=128>e?e<<1:e<<1^283;for(r=0,o=0,e=0;256>e;e++){u=(u=o^o<<1^o<<2^o<<3^o<<4)>>>8^255&u^99;i[r]=u;w[u]=r;var s=f[r],nt=f[s],tt=f[nt],n=257*f[u]^16843008*u;b[r]=n<<24|n>>>8;k[r]=n<<16|n>>>16;d[r]=n<<8|n>>>24;g[r]=n;n=16843009*tt^65537*nt^257*s^16843008*r;l[u]=n<<24|n>>>8;a[u]=n<<16|n>>>16;v[u]=n<<8|n>>>24;y[u]=n;r?(r=s^f[f[f[tt^s]]],o^=f[f[o]]):r=o=1}it=[0,1,2,4,8,16,32,64,128,27,54];c=c.AES=p.extend({_doReset:function(){for(var n,e=(f=this._key).words,r=f.sigBytes/4,f=4*((this._nRounds=r+6)+1),u=this._keySchedule=[],t=0;t<f;t++)t<r?u[t]=e[t]:(n=u[t-1],t%r?6<r&&4==t%r&&(n=i[n>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n]):(n=i[(n=n<<8|n>>>24)>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n],n^=it[t/r|0]<<24),u[t]=u[t-r]^n);for(e=this._invKeySchedule=[],r=0;r<f;r++)t=f-r,n=r%4?u[t]:u[t-4],e[r]=4>r||4>=t?n:l[i[n>>>24]]^a[i[n>>>16&255]]^v[i[n>>>8&255]]^y[i[255&n]]},encryptBlock:function(n,t){this._doCryptBlock(n,t,this._keySchedule,b,k,d,g,i)},decryptBlock:function(n,t){var i=n[t+1];n[t+1]=n[t+3];n[t+3]=i;this._doCryptBlock(n,t,this._invKeySchedule,l,a,v,y,w);i=n[t+1];n[t+1]=n[t+3];n[t+3]=i},_doCryptBlock:function(n,t,i,r,u,f,e,o){for(var b=this._nRounds,h=n[t]^i[0],c=n[t+1]^i[1],l=n[t+2]^i[2],s=n[t+3]^i[3],a=4,w=1;w<b;w++){var v=r[h>>>24]^u[c>>>16&255]^f[l>>>8&255]^e[255&s]^i[a++],y=r[c>>>24]^u[l>>>16&255]^f[s>>>8&255]^e[255&h]^i[a++],p=r[l>>>24]^u[s>>>16&255]^f[h>>>8&255]^e[255&c]^i[a++];s=r[s>>>24]^u[h>>>16&255]^f[c>>>8&255]^e[255&l]^i[a++];h=v;c=y;l=p}v=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[l>>>8&255]<<8|o[255&s])^i[a++];y=(o[c>>>24]<<24|o[l>>>16&255]<<16|o[s>>>8&255]<<8|o[255&h])^i[a++];p=(o[l>>>24]<<24|o[s>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^i[a++];s=(o[s>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&l])^i[a++];n[t]=v;n[t+1]=y;n[t+2]=p;n[t+3]=s},keySize:8});h.AES=p._createHelper(c)}();t.mode.ECB=((i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(n,t){this._cipher.encryptBlock(n,t)}}),i.Decryptor=i.extend({processBlock:function(n,t){this._cipher.decryptBlock(n,t)}}),i);n.exports=t},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=r(i(5)),e=r(i(6)),o=r(i(4)),u=(i(2),r(i(10))),s=function(){function n(){f.default(this,n);o.default(this,"_listeners",void 0);this._listeners=[]}return e.default(n,[{key:"addListener",value:function(n){this._listeners.push(n)}},{key:"removeListener",value:function(n){var t=[];this._listeners.forEach(function(i){i!==n&&t.push(i)});this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(n){this._listeners.forEach(function(t){t.presence&&t.presence(n)})}},{key:"announceStatus",value:function(n){this._listeners.forEach(function(t){t.status&&t.status(n)})}},{key:"announceMessage",value:function(n){this._listeners.forEach(function(t){t.message&&t.message(n)})}},{key:"announceSignal",value:function(n){this._listeners.forEach(function(t){t.signal&&t.signal(n)})}},{key:"announceMessageAction",value:function(n){this._listeners.forEach(function(t){t.messageAction&&t.messageAction(n)})}},{key:"announceFile",value:function(n){this._listeners.forEach(function(t){t.file&&t.file(n)})}},{key:"announceObjects",value:function(n){this._listeners.forEach(function(t){t.objects&&t.objects(n)})}},{key:"announceUser",value:function(n){this._listeners.forEach(function(t){t.user&&t.user(n)})}},{key:"announceSpace",value:function(n){this._listeners.forEach(function(t){t.space&&t.space(n)})}},{key:"announceMembership",value:function(n){this._listeners.forEach(function(t){t.membership&&t.membership(n)})}},{key:"announceNetworkUp",value:function(){var n={};n.category=u.default.PNNetworkUpCategory;this.announceStatus(n)}},{key:"announceNetworkDown",value:function(){var n={};n.category=u.default.PNNetworkDownCategory;this.announceStatus(n)}}]),n}();t.default=s;n.exports=t.default},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNTimeOperation};t.getURL=function(){return"/time/0"};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.prepareParams=function(){return{}};t.isAuthSupported=function(){return!1};t.handleResponse=function(n,t){return{timetoken:t[0]}};t.validateParams=function(){};i(2);r=u(i(1))},function(){},function(n){"use strict";n.exports=function(n){return null!==n&&"object"==typeof n}},function(n,t,i){"use strict";function g(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=f.default(n),u;return t?(u=f.default(this).constructor,i=Reflect.construct(r,arguments,u)):i=r.apply(this,arguments),c.default(this,i)}}function nt(n){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(n)}function tt(n){for(var r,f,e=p.default.enc.Base64.parse(n).words,s=new ArrayBuffer(4*e.length),t=new Uint8Array(s),o=0,i=0,u=0;u<e.length;u+=1)r=e[u],t[i=4*u]=(4278190080&r)>>24,t[i+1]=(16711680&r)>>16,t[i+2]=(65280&r)>>8,t[i+3]=255&r;for(f=i+3;f>=i;f-=1)0===t[f]&&(o+=1);return o>0?t.buffer.slice(0,t.byteLength-o):t.buffer}function e(n){var i=function(n){return n&&"object"===l.default(n)&&n.constructor===Object},t;return i(n)?(t={},Object.keys(n).forEach(function(r){var u=function(n){return"string"==typeof n||n instanceof String}(r),f=r,o=n[r];Array.isArray(r)||u&&r.indexOf(",")>=0?f=(u?r.split(","):r).reduce(function(n,t){return n+String.fromCharCode(t)},""):(function(n){return"number"==typeof n&&isFinite(n)}(r)||u&&!isNaN(r))&&(f=String.fromCharCode(u?parseInt(r,10):10));t[f]=i(o)?e(o):o}),t):n}var r=i(0),o;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var s=r(i(5)),h=r(i(14)),c=r(i(16)),f=r(i(13)),l=r(i(7)),a=r(i(28)),v=r(i(29)),y=r(i(121)),p=r(i(22)),w=r(i(122)),b=r(i(123)),u=i(124),k=(i(2),r(i(131))),d=r(i(132));o=function(n){function t(n){var r,f,o;return s.default(this,t),f=n.listenToBrowserNetworkEvents,o=void 0===f||f,n.db=w.default,n.sdkFamily="Web",n.networking=new y.default({del:u.del,get:u.get,post:u.post,patch:u.patch,sendBeacon:nt,getfile:u.getfile,postfile:u.postfile}),n.cbor=new b.default(function(n){return e(a.default.decode(n))},tt),n.PubNubFile=d.default,n.cryptography=new k.default,r=i.call(this,n),o&&(window.addEventListener("offline",function(){r.networkDownDetected()}),window.addEventListener("online",function(){r.networkUpDetected()})),r}h.default(t,n);var i=g(t);return t}(v.default);t.default=o;n.exports=t.default},function(n,t,i){var r,u;!function(){"use strict";var o=Math.pow(2,-24),f=Math.pow(2,32),e=Math.pow(2,53);void 0===(u="function"==typeof(r={encode:function(n){function u(n){for(var e,o,u,i=r.byteLength,f=t+n;i<f;)i*=2;if(i!==r.byteLength)for(e=h,r=new ArrayBuffer(i),h=new DataView(r),o=t+3>>2,u=0;u<o;++u)h.setUint32(4*u,e.getUint32(4*u));return l=n,h}function o(){t+=l}function i(n){o(u(1).setUint8(t,n))}function a(n){for(var r=u(n.length),i=0;i<n.length;++i)r.setUint8(t+i,n[i]);o()}function s(n,r){r<24?i(n<<5|r):r<256?(i(n<<5|24),i(r)):r<65536?(i(n<<5|25),function(n){o(u(2).setUint16(t,n))}(r)):r<4294967296?(i(n<<5|26),function(n){o(u(4).setUint32(t,n))}(r)):(i(n<<5|27),function(n){var i=n%f,e=(n-i)/f,r=u(8);r.setUint32(t,e);r.setUint32(t+4,i);o()}(r))}var l,r=new ArrayBuffer(256),h=new DataView(r),t=0;if(function n(r){var h,c,f,l,v,y;if(!1===r)return i(244);if(!0===r)return i(245);if(null===r)return i(246);if(void 0===r)return i(247);switch(typeof r){case"number":if(Math.floor(r)===r){if(0<=r&&r<=e)return s(0,r);if(-e<=r&&r<0)return s(1,-(r+1))}return i(251),function(n){o(u(8).setFloat64(t,n))}(r);case"string":for(c=[],h=0;h<r.length;++h)f=r.charCodeAt(h),f<128?c.push(f):f<2048?(c.push(192|f>>6),c.push(128|63&f)):f<55296?(c.push(224|f>>12),c.push(128|f>>6&63),c.push(128|63&f)):(f=(1023&f)<<10,f|=1023&r.charCodeAt(++h),f+=65536,c.push(240|f>>18),c.push(128|f>>12&63),c.push(128|f>>6&63),c.push(128|63&f));return s(3,c.length),a(c);default:if(Array.isArray(r))for(s(4,l=r.length),h=0;h<l;++h)n(r[h]);else if(r instanceof Uint8Array)s(2,r.length),a(r);else for(v=Object.keys(r),s(5,l=v.length),h=0;h<l;++h)y=v[h],n(y),n(r[y])}}(n),"slice"in r)return r.slice(0,t);for(var v=new ArrayBuffer(t),y=new DataView(v),c=0;c<t;++c)y.setUint8(c,h.getUint8(c));return v},decode:function(n,t,i){function s(n,t){return r+=t,n}function c(t){return s(new Uint8Array(n,r,t),t)}function u(){return s(e.getUint8(r),1)}function l(){return s(e.getUint16(r),2)}function h(){return s(e.getUint32(r),4)}function a(){return 255===e.getUint8(r)&&(r+=1,!0)}function v(n){if(n<24)return n;if(24===n)return u();if(25===n)return l();if(26===n)return h();if(27===n)return h()*f+h();if(31===n)return-1;throw"Invalid length encoding";}function y(n){var t=u(),i;if(255===t)return-1;if(i=v(31&t),i<0||t>>5!==n)throw"Invalid indefinite length element";return i}function p(n,t){for(var i,r=0;r<t;++r)i=u(),128&i&&(i<224?(i=(31&i)<<6|63&u(),t-=1):i<240?(i=(15&i)<<12|(63&u())<<6|63&u(),t-=2):(i=(15&i)<<18|(63&u())<<12|(63&u())<<6|63&u(),t-=3)),i<65536?n.push(i):(i-=65536,n.push(55296|i>>10),n.push(56320|1023&i))}var e=new DataView(n),r=0,w;if("function"!=typeof t&&(t=function(n){return n}),"function"!=typeof i&&(i=function(){}),w=function n(){var h,f,rt=u(),w=rt>>5,ut=31&rt,b,g,nt,tt,d,k,it;if(7===w)switch(ut){case 25:return function(){var u=new ArrayBuffer(4),r=new DataView(u),t=l(),f=32768&t,n=31744&t,i=1023&t;if(31744===n)n=261120;else if(0!==n)n+=114688;else if(0!==i)return i*o;return r.setUint32(0,f<<16|n<<13|i<<13),r.getFloat32(0)}();case 26:return s(e.getFloat32(r),4);case 27:return s(e.getFloat64(r),8)}if((f=v(ut))<0&&(w<2||6<w))throw"Invalid length";switch(w){case 0:return f;case 1:return-1-f;case 2:if(f<0){for(b=[],g=0;(f=y(w))>=0;)g+=f,b.push(c(f));for(nt=new Uint8Array(g),tt=0,h=0;h<b.length;++h)nt.set(b[h],tt),tt+=b[h].length;return nt}return c(f);case 3:if(d=[],f<0)for(;(f=y(w))>=0;)p(d,f);else p(d,f);return String.fromCharCode.apply(null,d);case 4:if(f<0)for(k=[];!a();)k.push(n());else for(k=new Array(f),h=0;h<f;++h)k[h]=n();return k;case 5:for(it={},h=0;h<f||f<0&&!a();++h)it[n()]=n();return it;case 6:return t(n(),f);case 7:switch(f){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:return i(f)}}}(),r!==n.byteLength)throw"Remaining bytes";return w}})?r.call(t,i,t,n):r)||(n.exports=u)}()},function(n,t,i){"use strict";function v(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function s(n){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?v(Object(i),!0).forEach(function(t){r.default(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}var f=i(30),e=i(0),h;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var y=e(i(5)),p=e(i(6)),r=e(i(4)),w=e(i(8)),b=e(i(20)),k=e(i(36)),d=e(i(40)),g=e(i(41)),nt=e(i(23)),tt=e(i(44)),u=e(i(18)),o=i(3),it=f(i(49)),rt=f(i(50)),ut=f(i(51)),ft=f(i(52)),et=f(i(53)),ot=f(i(54)),st=f(i(55)),ht=f(i(56)),ct=f(i(57)),lt=f(i(58)),at=f(i(59)),vt=f(i(60)),yt=f(i(61)),pt=f(i(62)),wt=f(i(63)),bt=f(i(64)),kt=f(i(65)),dt=f(i(66)),gt=(i(25),f(i(67)),e(i(68))),ni=e(i(69)),ti=e(i(70)),ii=e(i(71)),c=e(i(73)),ri=e(i(74)),ui=e(i(75)),fi=e(i(76)),ei=e(i(82)),oi=e(i(83)),si=e(i(84)),hi=e(i(85)),ci=e(i(86)),li=e(i(87)),ai=e(i(88)),vi=e(i(89)),l=e(i(90)),yi=e(i(91)),a=e(i(92)),pi=f(i(93)),wi=f(i(94)),bi=f(i(95)),ki=f(i(96)),di=f(i(97)),gi=f(i(98)),nr=f(i(99)),tr=f(i(100)),ir=f(i(101)),rr=f(i(102)),ur=f(i(103)),fr=f(i(104)),er=f(i(105)),or=f(i(106)),sr=f(i(107)),hr=f(i(108)),cr=f(i(109)),lr=f(i(110)),ar=f(i(111)),vr=f(i(112)),yr=f(i(113)),pr=f(i(114)),wr=f(i(115)),br=f(i(116)),kr=f(i(117)),dr=f(i(118)),gr=f(i(119)),nu=f(i(24)),tu=f(i(120)),iu=e(i(1)),ru=e(i(10)),uu=(i(2),e(i(17)));h=function(){function n(t){var h=this,fu;y.default(this,n);r.default(this,"_config",void 0);r.default(this,"_telemetryManager",void 0);r.default(this,"_listenerManager",void 0);r.default(this,"_tokenManager",void 0);r.default(this,"time",void 0);r.default(this,"publish",void 0);r.default(this,"fire",void 0);r.default(this,"history",void 0);r.default(this,"deleteMessages",void 0);r.default(this,"messageCounts",void 0);r.default(this,"fetchMessages",void 0);r.default(this,"channelGroups",void 0);r.default(this,"push",void 0);r.default(this,"hereNow",void 0);r.default(this,"whereNow",void 0);r.default(this,"getState",void 0);r.default(this,"setState",void 0);r.default(this,"grant",void 0);r.default(this,"grantToken",void 0);r.default(this,"audit",void 0);r.default(this,"subscribe",void 0);r.default(this,"signal",void 0);r.default(this,"presence",void 0);r.default(this,"unsubscribe",void 0);r.default(this,"unsubscribeAll",void 0);r.default(this,"addMessageAction",void 0);r.default(this,"removeMessageAction",void 0);r.default(this,"getMessageActions",void 0);r.default(this,"File",void 0);r.default(this,"encryptFile",void 0);r.default(this,"decryptFile",void 0);r.default(this,"listFiles",void 0);r.default(this,"sendFile",void 0);r.default(this,"downloadFile",void 0);r.default(this,"getFileUrl",void 0);r.default(this,"deleteFile",void 0);r.default(this,"publishFile",void 0);r.default(this,"objects",void 0);r.default(this,"createUser",void 0);r.default(this,"updateUser",void 0);r.default(this,"deleteUser",void 0);r.default(this,"getUser",void 0);r.default(this,"getUsers",void 0);r.default(this,"createSpace",void 0);r.default(this,"updateSpace",void 0);r.default(this,"deleteSpace",void 0);r.default(this,"getSpaces",void 0);r.default(this,"getSpace",void 0);r.default(this,"getMembers",void 0);r.default(this,"addMembers",void 0);r.default(this,"updateMembers",void 0);r.default(this,"removeMembers",void 0);r.default(this,"getMemberships",void 0);r.default(this,"joinSpaces",void 0);r.default(this,"updateMemberships",void 0);r.default(this,"leaveSpaces",void 0);r.default(this,"disconnect",void 0);r.default(this,"reconnect",void 0);r.default(this,"destroy",void 0);r.default(this,"stop",void 0);r.default(this,"getSubscribedChannels",void 0);r.default(this,"getSubscribedChannelGroups",void 0);r.default(this,"addListener",void 0);r.default(this,"removeListener",void 0);r.default(this,"removeAllListeners",void 0);r.default(this,"parseToken",void 0);r.default(this,"setToken",void 0);r.default(this,"setTokens",void 0);r.default(this,"getToken",void 0);r.default(this,"getTokens",void 0);r.default(this,"clearTokens",void 0);r.default(this,"getAuthKey",void 0);r.default(this,"setAuthKey",void 0);r.default(this,"setCipherKey",void 0);r.default(this,"setUUID",void 0);r.default(this,"getUUID",void 0);r.default(this,"getFilterExpression",void 0);r.default(this,"setFilterExpression",void 0);r.default(this,"setHeartbeatInterval",void 0);r.default(this,"setProxy",void 0);r.default(this,"encrypt",void 0);r.default(this,"decrypt",void 0);var eu=t.db,iu=t.networking,ou=t.cbor,g=this._config=new w.default({setup:t,db:eu}),p=new b.default({config:g}),ru=t.cryptography;iu.init(g);var e=this._tokenManager=new tt.default(g,ou),su=this._telemetryManager=new d.default({maximumSamplesCount:6e4}),i={config:g,networking:iu,crypto:p,cryptography:ru,tokenManager:e,telemetryManager:su,PubNubFile:t.PubNubFile};this.File=t.PubNubFile;this.encryptFile=function(n,t){return ru.encryptFile(n,t,h.File)};this.decryptFile=function(n,t){return ru.decryptFile(n,t,h.File)};var uu=u.default.bind(this,i,nu),hu=u.default.bind(this,i,lt),cu=u.default.bind(this,i,vt),lu=u.default.bind(this,i,pt),au=u.default.bind(this,i,tu),v=this._listenerManager=new nt.default,f=new k.default({timeEndpoint:uu,leaveEndpoint:hu,heartbeatEndpoint:cu,setStateEndpoint:lu,subscribeEndpoint:au,crypto:i.crypto,config:i.config,listenerManager:v,getFileUrl:function(n){return c.default(i,n)}});this.addListener=v.addListener.bind(v);this.removeListener=v.removeListener.bind(v);this.removeAllListeners=v.removeAllListeners.bind(v);this.parseToken=e.parseToken.bind(e);this.setToken=e.setToken.bind(e);this.setTokens=e.setTokens.bind(e);this.getToken=e.getToken.bind(e);this.getTokens=e.getTokens.bind(e);this.clearTokens=e.clearTokens.bind(e);this.channelGroups={listGroups:u.default.bind(this,i,ft),listChannels:u.default.bind(this,i,et),addChannels:u.default.bind(this,i,it),removeChannels:u.default.bind(this,i,rt),deleteGroup:u.default.bind(this,i,ut)};this.push={addChannels:u.default.bind(this,i,ot),removeChannels:u.default.bind(this,i,st),deleteDevice:u.default.bind(this,i,ct),listChannels:u.default.bind(this,i,ht)};this.hereNow=u.default.bind(this,i,wt);this.whereNow=u.default.bind(this,i,at);this.getState=u.default.bind(this,i,yt);this.setState=f.adaptStateChange.bind(f);this.grant=u.default.bind(this,i,vr);this.grantToken=u.default.bind(this,i,yr);this.audit=u.default.bind(this,i,ar);this.publish=u.default.bind(this,i,pr);this.fire=function(n,t){return n.replicate=!1,n.storeInHistory=!1,h.publish(n,t)};this.signal=u.default.bind(this,i,wr);this.history=u.default.bind(this,i,br);this.deleteMessages=u.default.bind(this,i,kr);this.messageCounts=u.default.bind(this,i,dr);this.fetchMessages=u.default.bind(this,i,gr);this.addMessageAction=u.default.bind(this,i,bt);this.removeMessageAction=u.default.bind(this,i,kt);this.getMessageActions=u.default.bind(this,i,dt);this.listFiles=u.default.bind(this,i,gt.default);fu=u.default.bind(this,i,ni.default);this.publishFile=u.default.bind(this,i,ti.default);this.sendFile=ii.default({generateUploadUrl:fu,publishFile:this.publishFile,modules:i});this.getFileUrl=function(n){return c.default(i,n)};this.downloadFile=u.default.bind(this,i,ri.default);this.deleteFile=u.default.bind(this,i,ui.default);this.objects={getAllUUIDMetadata:u.default.bind(this,i,fi.default),getUUIDMetadata:u.default.bind(this,i,ei.default),setUUIDMetadata:u.default.bind(this,i,oi.default),removeUUIDMetadata:u.default.bind(this,i,si.default),getAllChannelMetadata:u.default.bind(this,i,hi.default),getChannelMetadata:u.default.bind(this,i,ci.default),setChannelMetadata:u.default.bind(this,i,li.default),removeChannelMetadata:u.default.bind(this,i,ai.default),getChannelMembers:u.default.bind(this,i,vi.default),setChannelMembers:function(n){for(var r=arguments.length,f=new Array(r>1?r-1:0),t=1;t<r;t++)f[t-1]=arguments[t];return u.default.call.apply(u.default,[h,i,l.default,s({type:"set"},n)].concat(f))},removeChannelMembers:function(n){for(var r=arguments.length,f=new Array(r>1?r-1:0),t=1;t<r;t++)f[t-1]=arguments[t];return u.default.call.apply(u.default,[h,i,l.default,s({type:"delete"},n)].concat(f))},getMemberships:u.default.bind(this,i,yi.default),setMemberships:function(n){for(var r=arguments.length,f=new Array(r>1?r-1:0),t=1;t<r;t++)f[t-1]=arguments[t];return u.default.call.apply(u.default,[h,i,a.default,s({type:"set"},n)].concat(f))},removeMemberships:function(n){for(var r=arguments.length,f=new Array(r>1?r-1:0),t=1;t<r;t++)f[t-1]=arguments[t];return u.default.call.apply(u.default,[h,i,a.default,s({type:"delete"},n)].concat(f))}};this.createUser=o.deprecated(u.default.bind(this,i,pi));this.updateUser=o.deprecated(u.default.bind(this,i,wi));this.deleteUser=o.deprecated(u.default.bind(this,i,bi));this.getUser=o.deprecated(u.default.bind(this,i,ki));this.getUsers=o.deprecated(u.default.bind(this,i,di));this.createSpace=o.deprecated(u.default.bind(this,i,gi));this.updateSpace=o.deprecated(u.default.bind(this,i,nr));this.deleteSpace=o.deprecated(u.default.bind(this,i,tr));this.getSpaces=o.deprecated(u.default.bind(this,i,ir));this.getSpace=o.deprecated(u.default.bind(this,i,rr));this.addMembers=o.deprecated(u.default.bind(this,i,fr));this.updateMembers=o.deprecated(u.default.bind(this,i,er));this.removeMembers=o.deprecated(u.default.bind(this,i,or));this.getMembers=o.deprecated(u.default.bind(this,i,ur));this.getMemberships=o.deprecated(u.default.bind(this,i,sr));this.joinSpaces=o.deprecated(u.default.bind(this,i,cr));this.updateMemberships=o.deprecated(u.default.bind(this,i,hr));this.leaveSpaces=o.deprecated(u.default.bind(this,i,lr));this.time=uu;this.subscribe=f.adaptSubscribeChange.bind(f);this.presence=f.adaptPresenceChange.bind(f);this.unsubscribe=f.adaptUnsubscribeChange.bind(f);this.disconnect=f.disconnect.bind(f);this.reconnect=f.reconnect.bind(f);this.destroy=function(n){f.unsubscribeAll(n);f.disconnect()};this.stop=this.destroy;this.unsubscribeAll=f.unsubscribeAll.bind(f);this.getSubscribedChannels=f.getSubscribedChannels.bind(f);this.getSubscribedChannelGroups=f.getSubscribedChannelGroups.bind(f);this.encrypt=p.encrypt.bind(p);this.decrypt=p.decrypt.bind(p);this.getAuthKey=i.config.getAuthKey.bind(i.config);this.setAuthKey=i.config.setAuthKey.bind(i.config);this.setCipherKey=i.config.setCipherKey.bind(i.config);this.getUUID=i.config.getUUID.bind(i.config);this.setUUID=i.config.setUUID.bind(i.config);this.getFilterExpression=i.config.getFilterExpression.bind(i.config);this.setFilterExpression=i.config.setFilterExpression.bind(i.config);this.setHeartbeatInterval=i.config.setHeartbeatInterval.bind(i.config);iu.hasModule("proxy")&&(this.setProxy=function(n){i.config.setProxy(n);h.reconnect()})}return p.default(n,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"_addPnsdkSuffix",value:function(n,t){this._config._addPnsdkSuffix(n,t)}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown();this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp();this.reconnect()}}],[{key:"notificationPayload",value:function(n,t){return new g.default(n,t)}},{key:"generateUUID",value:function(){return uu.default.createUUID()}}]),n}();t.default=h;r.default(h,"OPERATIONS",iu.default);r.default(h,"CATEGORIES",ru.default);n.exports=t.default},function(n,t,i){function r(){if("function"!=typeof WeakMap)return null;var n=new WeakMap;return r=function(){return n},n}var u=i(7);n.exports=function(n){var t,i,o,f,e;if(n&&n.__esModule)return n;if(null===n||"object"!==u(n)&&"function"!=typeof n)return{"default":n};if(t=r(),t&&t.has(n))return t.get(n);i={};o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in n)Object.prototype.hasOwnProperty.call(n,f)&&(e=o?Object.getOwnPropertyDescriptor(n,f):null,e&&(e.get||e.set)?Object.defineProperty(i,f,e):i[f]=n[f]);return i.default=n,t&&t.set(n,i),i}},function(n,t){var i,r,u;
/*! lil-uuid - v0.1 - MIT License - https://github.com/lil-js/uuid */
r=[t];void 0===(u="function"==typeof(i=function(n){function t(){for(var t,i="",n=0;n<32;n++)t=16*Math.random()|0,8!==n&&12!==n&&16!==n&&20!==n||(i+="-"),i+=(12===n?4:16===n?3&t|8:t).toString(16);return i}function i(n,t){var i=r[t||"all"];return i&&i.test(n)||!1}var r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.isUUID=i;t.VERSION="0.1.0";n.uuid=t;n.isUUID=i})?i.apply(t,r):i)||(n.exports=u)},function(n){var t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},function(n,t){"use strict";function e(n){var i=n.length,t;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return t=n.indexOf("="),-1===t&&(t=i),[t,t===i?0:4-t%4]}function h(n,t,i){for(var e,f,o=[],u=t;u<i;u+=3)e=(n[u]<<16&16711680)+(n[u+1]<<8&65280)+(255&n[u+2]),o.push(r[(f=e)>>18&63]+r[f>>12&63]+r[f>>6&63]+r[63&f]);return o.join("")}t.byteLength=function(n){var t=e(n),r=t[0],i=t[1];return 3*(r+i)/4-i};t.toByteArray=function(n){for(var r,c=e(n),h=c[0],s=c[1],u=new o(function(n,t,i){return 3*(t+i)/4-i}(0,h,s)),f=0,l=s>0?h-4:h,t=0;t<l;t+=4)r=i[n.charCodeAt(t)]<<18|i[n.charCodeAt(t+1)]<<12|i[n.charCodeAt(t+2)]<<6|i[n.charCodeAt(t+3)],u[f++]=r>>16&255,u[f++]=r>>8&255,u[f++]=255&r;return 2===s&&(r=i[n.charCodeAt(t)]<<2|i[n.charCodeAt(t+1)]>>4,u[f++]=255&r),1===s&&(r=i[n.charCodeAt(t)]<<10|i[n.charCodeAt(t+1)]<<4|i[n.charCodeAt(t+2)]>>2,u[f++]=r>>8&255,u[f++]=255&r),u};t.fromByteArray=function(n){for(var t,i=n.length,e=i%3,f=[],u=0,o=i-e;u<o;u+=16383)f.push(h(n,u,u+16383>o?o:u+16383));return 1===e?(t=n[i-1],f.push(r[t>>2]+r[t<<4&63]+"==")):2===e&&(t=(n[i-2]<<8)+n[i-1],f.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),f.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=f.length;u<s;++u)r[u]=f[u],i[f.charCodeAt(u)]=u;i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63},function(n,t){t.read=function(n,t,i,r,u){var f,o,l=8*u-r-1,a=(1<<l)-1,v=a>>1,e=-7,s=i?u-1:0,c=i?-1:1,h=n[t+s];for(s+=c,f=h&(1<<-e)-1,h>>=-e,e+=l;e>0;f=256*f+n[t+s],s+=c,e-=8);for(o=f&(1<<-e)-1,f>>=-e,e+=r;e>0;o=256*o+n[t+s],s+=c,e-=8);if(0===f)f=1-v;else{if(f===a)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r);f-=v}return(h?-1:1)*o*Math.pow(2,f-r)};t.write=function(n,t,i,r,u,f){var e,o,s,l=8*f-u-1,a=(1<<l)-1,h=a>>1,y=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:f-1,v=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,e=a):(e=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-e))<1&&(e--,s*=2),(t+=e+h>=1?y/s:y*Math.pow(2,1-h))*s>=2&&(e++,s/=2),e+h>=a?(o=0,e=a):e+h>=1?(o=(t*s-1)*Math.pow(2,u),e+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,u),e=0));u>=8;n[i+c]=255&o,c+=v,o/=256,u-=8);for(e=e<<u|o,l+=u;l>0;n[i+c]=255&e,c+=v,e/=256,l-=8);n[i+c-v]|=128*p}},function(n){var t={}.toString;n.exports=Array.isArray||function(n){return"[object Array]"==t.call(n)}},function(n,t,i){"use strict";var u=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var e=u(i(7)),o=u(i(5)),s=u(i(6)),r=u(i(4)),h=(u(i(20)),u(i(8)),u(i(23)),u(i(37))),c=u(i(38)),l=u(i(3)),f=(i(2),u(i(10))),a=function(){function n(t){var u=t.subscribeEndpoint,f=t.leaveEndpoint,e=t.heartbeatEndpoint,s=t.setStateEndpoint,l=t.timeEndpoint,a=t.getFileUrl,i=t.config,v=t.crypto,y=t.listenerManager;o.default(this,n);r.default(this,"_crypto",void 0);r.default(this,"_config",void 0);r.default(this,"_listenerManager",void 0);r.default(this,"_reconnectionManager",void 0);r.default(this,"_leaveEndpoint",void 0);r.default(this,"_heartbeatEndpoint",void 0);r.default(this,"_setStateEndpoint",void 0);r.default(this,"_subscribeEndpoint",void 0);r.default(this,"_getFileUrl",void 0);r.default(this,"_channels",void 0);r.default(this,"_presenceChannels",void 0);r.default(this,"_heartbeatChannels",void 0);r.default(this,"_heartbeatChannelGroups",void 0);r.default(this,"_channelGroups",void 0);r.default(this,"_presenceChannelGroups",void 0);r.default(this,"_currentTimetoken",void 0);r.default(this,"_lastTimetoken",void 0);r.default(this,"_storedTimetoken",void 0);r.default(this,"_region",void 0);r.default(this,"_subscribeCall",void 0);r.default(this,"_heartbeatTimer",void 0);r.default(this,"_subscriptionStatusAnnounced",void 0);r.default(this,"_autoNetworkDetection",void 0);r.default(this,"_isOnline",void 0);r.default(this,"_pendingChannelSubscriptions",void 0);r.default(this,"_pendingChannelGroupSubscriptions",void 0);r.default(this,"_dedupingManager",void 0);this._listenerManager=y;this._config=i;this._leaveEndpoint=f;this._heartbeatEndpoint=e;this._setStateEndpoint=s;this._subscribeEndpoint=u;this._getFileUrl=a;this._crypto=v;this._channels={};this._presenceChannels={};this._heartbeatChannels={};this._heartbeatChannelGroups={};this._channelGroups={};this._presenceChannelGroups={};this._pendingChannelSubscriptions=[];this._pendingChannelGroupSubscriptions=[];this._currentTimetoken=0;this._lastTimetoken=0;this._storedTimetoken=null;this._subscriptionStatusAnnounced=!1;this._isOnline=!0;this._reconnectionManager=new h.default({timeEndpoint:l});this._dedupingManager=new c.default({config:i})}return s.default(n,[{key:"adaptStateChange",value:function(n,t){var i=this,r=n.state,u=n.channels,f=void 0===u?[]:u,e=n.channelGroups,o=void 0===e?[]:e;return f.forEach(function(n){n in i._channels&&(i._channels[n].state=r)}),o.forEach(function(n){n in i._channelGroups&&(i._channelGroups[n].state=r)}),this._setStateEndpoint({state:r,channels:f,channelGroups:o},t)}},{key:"adaptPresenceChange",value:function(n){var t=this,e=n.connected,u=n.channels,i=void 0===u?[]:u,f=n.channelGroups,r=void 0===f?[]:f;e?(i.forEach(function(n){t._heartbeatChannels[n]={state:{}}}),r.forEach(function(n){t._heartbeatChannelGroups[n]={state:{}}})):(i.forEach(function(n){n in t._heartbeatChannels&&delete t._heartbeatChannels[n]}),r.forEach(function(n){n in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[n]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:r},function(n){t._listenerManager.announceStatus(n)}));this.reconnect()}},{key:"adaptSubscribeChange",value:function(n){var t=this,i=n.timetoken,r=n.channels,h=void 0===r?[]:r,u=n.channelGroups,c=void 0===u?[]:u,f=n.withPresence,e=void 0!==f&&f,o=n.withHeartbeats,s=void 0!==o&&o;this._config.subscribeKey&&""!==this._config.subscribeKey?(i&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=i),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),h.forEach(function(n){t._channels[n]={state:{}};e&&(t._presenceChannels[n]={});(s||t._config.getHeartbeatInterval())&&(t._heartbeatChannels[n]={});t._pendingChannelSubscriptions.push(n)}),c.forEach(function(n){t._channelGroups[n]={state:{}};e&&(t._presenceChannelGroups[n]={});(s||t._config.getHeartbeatInterval())&&(t._heartbeatChannelGroups[n]={});t._pendingChannelGroupSubscriptions.push(n)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(n,t){var i=this,f=n.channels,o=void 0===f?[]:f,e=n.channelGroups,s=void 0===e?[]:e,r=[],u=[];o.forEach(function(n){n in i._channels&&(delete i._channels[n],r.push(n),n in i._heartbeatChannels&&delete i._heartbeatChannels[n]);n in i._presenceChannels&&(delete i._presenceChannels[n],r.push(n))});s.forEach(function(n){n in i._channelGroups&&(delete i._channelGroups[n],u.push(n),n in i._heartbeatChannelGroups&&delete i._heartbeatChannelGroups[n]);n in i._presenceChannelGroups&&(delete i._channelGroups[n],u.push(n))});0===r.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:r,channelGroups:u},function(n){n.affectedChannels=r;n.affectedChannelGroups=u;n.currentTimetoken=i._currentTimetoken;n.lastTimetoken=i._lastTimetoken;i._listenerManager.announceStatus(n)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(n){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},n)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop();this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop();this._stopHeartbeatTimer();this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer();0!==this._config.getHeartbeatInterval()&&void 0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var n=this,i=this.getHeartbeatChannels(),r=this.getHeartbeatChannelGroups(),t={};(0!==i.length||0!==r.length)&&(this.getSubscribedChannels().forEach(function(i){var r=n._channels[i].state;Object.keys(r).length&&(t[i]=r)}),this.getSubscribedChannelGroups().forEach(function(i){var r=n._channelGroups[i].state;Object.keys(r).length&&(t[i]=r)}),this._heartbeatEndpoint({channels:i,channelGroups:r,state:t},function(t){t.error&&n._config.announceFailedHeartbeats&&n._listenerManager.announceStatus(t);t.error&&n._config.autoNetworkDetection&&n._isOnline&&(n._isOnline=!1,n.disconnect(),n._listenerManager.announceNetworkDown(),n.reconnect());!t.error&&n._config.announceSuccessfulHeartbeats&&n._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var r=this,u;this._stopSubscribeLoop();var i={},n=[],t=[];(Object.keys(this._channels).forEach(function(t){var u=r._channels[t].state;Object.keys(u).length&&(i[t]=u);n.push(t)}),Object.keys(this._presenceChannels).forEach(function(t){n.push("".concat(t,"-pnpres"))}),Object.keys(this._channelGroups).forEach(function(n){var u=r._channelGroups[n].state;Object.keys(u).length&&(i[n]=u);t.push(n)}),Object.keys(this._presenceChannelGroups).forEach(function(n){t.push("".concat(n,"-pnpres"))}),0!==n.length||0!==t.length)&&(u={channels:n,channelGroups:t,state:i,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region},this._subscribeCall=this._subscribeEndpoint(u,this._processSubscribeResponse.bind(this)))}},{key:"_processSubscribeResponse",value:function(n,t){var i=this,r,u;if(n.error)n.category===f.default.PNTimeoutCategory?this._startSubscribeLoop():n.category===f.default.PNNetworkIssuesCategory?(this.disconnect(),n.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){i._config.autoNetworkDetection&&!i._isOnline&&(i._isOnline=!0,i._listenerManager.announceNetworkUp());i.reconnect();i._subscriptionStatusAnnounced=!0;var t={category:f.default.PNReconnectedCategory,operation:n.operation,lastTimetoken:i._lastTimetoken,currentTimetoken:i._currentTimetoken};i._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(n)):n.category===f.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(n)):this._listenerManager.announceStatus(n);else{(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),this._subscriptionStatusAnnounced)||(r={},r.category=f.default.PNConnectedCategory,r.operation=n.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]);var o=t.messages||[],s=this._config,h=s.requestMessageCountThreshold,c=s.dedupeOnSubscribe;h&&o.length>=h&&(u={},u.category=f.default.PNRequestMessageCountExceededCategory,u.operation=n.operation,this._listenerManager.announceStatus(u));o.forEach(function(n){var u=n.channel,t=n.subscriptionMatch,y=n.publishMetaData,r,h,f,a,s,v,p,o;if(u===t&&(t=null),c){if(i._dedupingManager.isDuplicate(n))return;i._dedupingManager.addEntry(n)}l.default.endsWith(n.channel,"-pnpres")?(r={channel:null,subscription:null},r.actualChannel=null!=t?u:null,r.subscribedChannel=null!=t?t:u,u&&(r.channel=u.substring(0,u.lastIndexOf("-pnpres"))),t&&(r.subscription=t.substring(0,t.lastIndexOf("-pnpres"))),r.action=n.payload.action,r.state=n.payload.data,r.timetoken=y.publishTimetoken,r.occupancy=n.payload.occupancy,r.uuid=n.payload.uuid,r.timestamp=n.payload.timestamp,n.payload.join&&(r.join=n.payload.join),n.payload.leave&&(r.leave=n.payload.leave),n.payload.timeout&&(r.timeout=n.payload.timeout),i._listenerManager.announcePresence(r)):1===n.messageType?(h={channel:null,subscription:null},h.channel=u,h.subscription=t,h.timetoken=y.publishTimetoken,h.publisher=n.issuingClientId,n.userMetadata&&(h.userMetadata=n.userMetadata),h.message=n.payload,i._listenerManager.announceSignal(h)):2===n.messageType?(f={channel:null,subscription:null},f.channel=u,f.subscription=t,f.timetoken=y.publishTimetoken,f.publisher=n.issuingClientId,n.userMetadata&&(f.userMetadata=n.userMetadata),f.message={event:n.payload.event,type:n.payload.type,data:n.payload.data},i._listenerManager.announceObjects(f),"user"===n.payload.type?i._listenerManager.announceUser(f):"space"===n.payload.type?i._listenerManager.announceSpace(f):"membership"===n.payload.type&&i._listenerManager.announceMembership(f)):3===n.messageType?(a={},a.channel=u,a.subscription=t,a.timetoken=y.publishTimetoken,a.publisher=n.issuingClientId,a.data={messageTimetoken:n.payload.data.messageTimetoken,actionTimetoken:n.payload.data.actionTimetoken,type:n.payload.data.type,uuid:n.issuingClientId,value:n.payload.data.value},a.event=n.payload.event,i._listenerManager.announceMessageAction(a)):4===n.messageType?(s={},s.channel=u,s.subscription=t,s.timetoken=y.publishTimetoken,s.publisher=n.issuingClientId,v=n.payload,i._config.cipherKey&&(p=i._crypto.decrypt(n.payload),"object"===e.default(p)&&null!==p&&(v=p)),n.userMetadata&&(s.userMetadata=n.userMetadata),s.message=v.message,s.file={id:v.file.id,name:v.file.name,url:i._getFileUrl({id:v.file.id,name:v.file.name,channel:u})},i._listenerManager.announceFile(s)):(o={channel:null,subscription:null},o.actualChannel=null!=t?u:null,o.subscribedChannel=null!=t?t:u,o.channel=u,o.subscription=t,o.timetoken=y.publishTimetoken,o.publisher=n.issuingClientId,n.userMetadata&&(o.userMetadata=n.userMetadata),o.message=i._config.cipherKey?i._crypto.decrypt(n.payload):n.payload,i._listenerManager.announceMessage(o))});this._region=t.metadata.region;this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),n}();t.default=a;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=r(i(5)),e=r(i(6)),u=r(i(4)),o=(r(i(24)),i(2),function(){function n(t){var i=t.timeEndpoint;f.default(this,n);u.default(this,"_reconnectionCallback",void 0);u.default(this,"_timeEndpoint",void 0);u.default(this,"_timeTimer",void 0);this._timeEndpoint=i}return e.default(n,[{key:"onReconnection",value:function(n){this._reconnectionCallback=n}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var n=this;this._timeEndpoint(function(t){t.error||(clearInterval(n._timeTimer),n._reconnectionCallback())})}}]),n}());t.default=o;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=r(i(5)),e=r(i(6)),u=r(i(4)),o=(r(i(8)),i(2),function(){function n(t){var i=t.config;f.default(this,n);u.default(this,"_config",void 0);u.default(this,"hashHistory",void 0);this.hashHistory=[];this._config=i}return e.default(n,[{key:"getKey",value:function(n){var t=function(n){var t=0,i;if(0===n.length)return t;for(i=0;i<n.length;i+=1)t=(t<<5)-t+n.charCodeAt(i),t&=t;return t}(JSON.stringify(n.payload)).toString(),i=n.publishMetaData.publishTimetoken;return"".concat(i,"-").concat(t)}},{key:"isDuplicate",value:function(n){return this.hashHistory.includes(this.getKey(n))}},{key:"addEntry",value:function(n){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift();this.hashHistory.push(this.getKey(n))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),n}());t.default=o;n.exports=t.default},function(n){function h(){throw new Error("setTimeout has not been defined");}function c(){throw new Error("clearTimeout has not been defined");}function l(n){if(i===setTimeout)return setTimeout(n,0);if((i===h||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(t){try{return i.call(null,n,0)}catch(t){return i.call(this,n,0)}}}function y(){o&&e&&(o=!1,e.length?u=e.concat(u):s=-1,u.length&&a())}function a(){var t,n;if(!o){for(t=l(y),o=!0,n=u.length;n;){for(e=u,u=[];++s<n;)e&&e[s].run();s=-1;n=u.length}e=null;o=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(t){try{return r.call(null,n)}catch(t){return r.call(this,n)}}}(t)}}function v(n,t){this.fun=n;this.array=t}function f(){}var i,r,t=n.exports={};!function(){try{i="function"==typeof setTimeout?setTimeout:h}catch(n){i=h}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(n){r=c}}();var e,u=[],o=!1,s=-1;t.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];u.push(new v(n,i));1!==u.length||o||l(a)};v.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=!0;t.env={};t.argv=[];t.version="";t.versions={};t.on=f;t.addListener=f;t.once=f;t.off=f;t.removeListener=f;t.removeAllListeners=f;t.emit=f;t.prependListener=f;t.prependOnceListener=f;t.listeners=function(){return[]};t.binding=function(){throw new Error("process.binding is not supported");};t.cwd=function(){return"/"};t.chdir=function(){throw new Error("process.chdir is not supported");};t.umask=function(){return 0}},function(n,t,i){"use strict";var u=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var e=u(i(5)),o=u(i(6)),f=u(i(4)),r=u(i(1)),s=function(){function n(t){e.default(this,n);f.default(this,"_maximumSamplesCount",100);f.default(this,"_trackedLatencies",{});f.default(this,"_latencies",{});this._maximumSamplesCount=t.maximumSamplesCount||this._maximumSamplesCount}return o.default(n,[{key:"operationsLatencyForRequest",value:function(){var n=this,t={};return Object.keys(this._latencies).forEach(function(i){var u=n._latencies[i],r=n._averageLatency(u);r>0&&(t["l_".concat(i)]=r)}),t}},{key:"startLatencyMeasure",value:function(n,t){n!==r.default.PNSubscribeOperation&&t&&(this._trackedLatencies[t]=Date.now())}},{key:"stopLatencyMeasure",value:function(n,t){if(n!==r.default.PNSubscribeOperation&&t){var u=this._endpointName(n),i=this._latencies[u],f=this._trackedLatencies[t];i||(i=this._latencies[u]=[]);i.push(Date.now()-f);i.length>this._maximumSamplesCount&&i.splice(0,i.length-this._maximumSamplesCount);delete this._trackedLatencies[t]}}},{key:"_averageLatency",value:function(n){return Math.floor(n.reduce(function(n,t){return n+t},0)/n.length)}},{key:"_endpointName",value:function(n){var t=null;switch(n){case r.default.PNPublishOperation:t="pub";break;case r.default.PNSignalOperation:t="sig";break;case r.default.PNHistoryOperation:case r.default.PNFetchMessagesOperation:case r.default.PNDeleteMessagesOperation:case r.default.PNMessageCounts:t="hist";break;case r.default.PNUnsubscribeOperation:case r.default.PNWhereNowOperation:case r.default.PNHereNowOperation:case r.default.PNHeartbeatOperation:case r.default.PNSetStateOperation:case r.default.PNGetStateOperation:t="pres";break;case r.default.PNAddChannelsToGroupOperation:case r.default.PNRemoveChannelsFromGroupOperation:case r.default.PNChannelGroupsOperation:case r.default.PNRemoveGroupOperation:case r.default.PNChannelsForGroupOperation:t="cg";break;case r.default.PNPushNotificationEnabledChannelsOperation:case r.default.PNRemoveAllPushNotificationsOperation:t="push";break;case r.default.PNCreateUserOperation:case r.default.PNUpdateUserOperation:case r.default.PNDeleteUserOperation:case r.default.PNGetUserOperation:case r.default.PNGetUsersOperation:case r.default.PNCreateSpaceOperation:case r.default.PNUpdateSpaceOperation:case r.default.PNDeleteSpaceOperation:case r.default.PNGetSpaceOperation:case r.default.PNGetSpacesOperation:case r.default.PNGetMembersOperation:case r.default.PNUpdateMembersOperation:case r.default.PNGetMembershipsOperation:case r.default.PNUpdateMembershipsOperation:t="obj";break;case r.default.PNAddMessageActionOperation:case r.default.PNRemoveMessageActionOperation:case r.default.PNGetMessageActionsOperation:t="msga";break;case r.default.PNAccessManagerGrant:case r.default.PNAccessManagerAudit:t="pam";break;case r.default.PNAccessManagerGrantToken:t="pam3";break;default:t="time"}return t}}]),n}();t.default=s;n.exports=t.default},function(n,t,i){"use strict";function w(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function s(n){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?w(Object(i),!0).forEach(function(t){r.default(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function l(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=p.default(n),u;return t?(u=p.default(this).constructor,i=Reflect.construct(r,arguments,u)):i=r.apply(this,arguments),d.default(this,i)}}var f=i(0),h,a,v,y,b;Object.defineProperty(t,"__esModule",{value:!0});t.default=t.FCMNotificationPayload=t.MPNSNotificationPayload=t.APNSNotificationPayload=void 0;var k=f(i(42)),u=f(i(19)),c=f(i(14)),d=f(i(16)),p=f(i(13)),o=f(i(5)),e=f(i(6)),r=f(i(4));i(2);h=function(){function n(t,i,u){o.default(this,n);r.default(this,"_subtitle",void 0);r.default(this,"_payload",void 0);r.default(this,"_badge",void 0);r.default(this,"_sound",void 0);r.default(this,"_title",void 0);r.default(this,"_body",void 0);this._payload=t;this._setDefaultPayloadStructure();this.title=i;this.body=u}return e.default(n,[{key:"payload",get:function(){return this._payload}},{key:"title",set:function(n){this._title=n}},{key:"subtitle",set:function(n){this._subtitle=n}},{key:"body",set:function(n){this._body=n}},{key:"badge",set:function(n){this._badge=n}},{key:"sound",set:function(n){this._sound=n}}]),e.default(n,[{key:"_setDefaultPayloadStructure",value:function(){}},{key:"toObject",value:function(){return{}}}]),n}();a=function(n){function t(){var n;o.default(this,t);for(var e=arguments.length,s=new Array(e),f=0;f<e;f++)s[f]=arguments[f];return n=i.call.apply(i,[this].concat(s)),r.default(u.default(n),"_configurations",void 0),r.default(u.default(n),"_apnsPushType",void 0),r.default(u.default(n),"_isSilent",void 0),n}c.default(t,n);var i=l(t);return e.default(t,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.aps={alert:{}}}},{key:"toObject",value:function(){var u=this,r=s({},this._payload),n=r.aps,t=n.alert,i;if(this._isSilent&&(n["content-available"]=1),"apns2"===this._apnsPushType){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");i=[];this._configurations.forEach(function(n){i.push(u._objectFromAPNS2Configuration(n))});i.length&&(r.pn_push=i)}return t&&Object.keys(t).length||delete n.alert,this._isSilent&&(delete n.alert,delete n.badge,delete n.sound,t={}),this._isSilent||Object.keys(t).length?r:null}},{key:"_objectFromAPNS2Configuration",value:function(n){var f=this,t;if(!n.targets||!n.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");t=[];n.targets.forEach(function(n){t.push(f._objectFromAPNSTarget(n))});var i=n.collapseId,u=n.expirationDate,r={auth_method:"token",targets:t,version:"v2"};return i&&i.length&&(r.collapse_id=i),u&&(r.expiration=u.toISOString()),r}},{key:"_objectFromAPNSTarget",value:function(n){if(!n.topic||!n.topic.length)throw new TypeError("Target 'topic' undefined.");var f=n.topic,t=n.environment,e=void 0===t?"development":t,i=n.excludedDevices,r=void 0===i?[]:i,u={topic:f,environment:e};return r.length&&(u.excluded_devices=r),u}},{key:"configurations",set:function(n){n&&n.length&&(this._configurations=n)}},{key:"notification",get:function(){return this._payload.aps}},{key:"title",get:function(){return this._title},set:function(n){n&&n.length&&(this._payload.aps.alert.title=n,this._title=n)}},{key:"subtitle",get:function(){return this._subtitle},set:function(n){n&&n.length&&(this._payload.aps.alert.subtitle=n,this._subtitle=n)}},{key:"body",get:function(){return this._body},set:function(n){n&&n.length&&(this._payload.aps.alert.body=n,this._body=n)}},{key:"badge",get:function(){return this._badge},set:function(n){null!=n&&(this._payload.aps.badge=n,this._badge=n)}},{key:"sound",get:function(){return this._sound},set:function(n){n&&n.length&&(this._payload.aps.sound=n,this._sound=n)}},{key:"silent",set:function(n){this._isSilent=n}}]),t}(h);t.APNSNotificationPayload=a;v=function(n){function t(){var n;o.default(this,t);for(var e=arguments.length,s=new Array(e),f=0;f<e;f++)s[f]=arguments[f];return n=i.call.apply(i,[this].concat(s)),r.default(u.default(n),"_backContent",void 0),r.default(u.default(n),"_backTitle",void 0),r.default(u.default(n),"_count",void 0),r.default(u.default(n),"_type",void 0),n}c.default(t,n);var i=l(t);return e.default(t,[{key:"toObject",value:function(){return Object.keys(this._payload).length?s({},this._payload):null}},{key:"backContent",get:function(){return this._backContent},set:function(n){n&&n.length&&(this._payload.back_content=n,this._backContent=n)}},{key:"backTitle",get:function(){return this._backTitle},set:function(n){n&&n.length&&(this._payload.back_title=n,this._backTitle=n)}},{key:"count",get:function(){return this._count},set:function(n){null!=n&&(this._payload.count=n,this._count=n)}},{key:"title",get:function(){return this._title},set:function(n){n&&n.length&&(this._payload.title=n,this._title=n)}},{key:"type",get:function(){return this._type},set:function(n){n&&n.length&&(this._payload.type=n,this._type=n)}},{key:"subtitle",get:function(){return this.backTitle},set:function(n){this.backTitle=n}},{key:"body",get:function(){return this.backContent},set:function(n){this.backContent=n}},{key:"badge",get:function(){return this.count},set:function(n){this.count=n}}]),t}(h);t.MPNSNotificationPayload=v;y=function(n){function t(){var n;o.default(this,t);for(var e=arguments.length,s=new Array(e),f=0;f<e;f++)s[f]=arguments[f];return n=i.call.apply(i,[this].concat(s)),r.default(u.default(n),"_isSilent",void 0),r.default(u.default(n),"_icon",void 0),r.default(u.default(n),"_tag",void 0),n}c.default(t,n);var i=l(t);return e.default(t,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.notification={};this._payload.data={}}},{key:"toObject",value:function(){var n=s({},this._payload.data),t=null,i={},r,u;return Object.keys(this._payload).length>2&&(r=this._payload,u=(r.notification,r.data,k.default(r,["notification","data"])),n=s(s({},n),u)),this._isSilent?n.notification=this._payload.notification:t=this._payload.notification,Object.keys(n).length&&(i.data=n),t&&Object.keys(t).length&&(i.notification=t),Object.keys(i).length?i:null}},{key:"notification",get:function(){return this._payload.notification}},{key:"data",get:function(){return this._payload.data}},{key:"title",get:function(){return this._title},set:function(n){n&&n.length&&(this._payload.notification.title=n,this._title=n)}},{key:"body",get:function(){return this._body},set:function(n){n&&n.length&&(this._payload.notification.body=n,this._body=n)}},{key:"sound",get:function(){return this._sound},set:function(n){n&&n.length&&(this._payload.notification.sound=n,this._sound=n)}},{key:"icon",get:function(){return this._icon},set:function(n){n&&n.length&&(this._payload.notification.icon=n,this._icon=n)}},{key:"tag",get:function(){return this._tag},set:function(n){n&&n.length&&(this._payload.notification.tag=n,this._tag=n)}},{key:"silent",set:function(n){this._isSilent=n}}]),t}(h);t.FCMNotificationPayload=y;b=function(){function n(t,i){o.default(this,n);r.default(this,"_payload",void 0);r.default(this,"_debugging",void 0);r.default(this,"_subtitle",void 0);r.default(this,"_badge",void 0);r.default(this,"_sound",void 0);r.default(this,"_title",void 0);r.default(this,"_body",void 0);r.default(this,"apns",void 0);r.default(this,"mpns",void 0);r.default(this,"fcm",void 0);this._payload={apns:{},mpns:{},fcm:{}};this._title=t;this._body=i;this.apns=new a(this._payload.apns,t,i);this.mpns=new v(this._payload.mpns,t,i);this.fcm=new y(this._payload.fcm,t,i)}return e.default(n,[{key:"debugging",set:function(n){this._debugging=n}},{key:"title",get:function(){return this._title}},{key:"body",get:function(){return this._body}},{key:"subtitle",get:function(){return this._subtitle},set:function(n){this._subtitle=n;this.apns.subtitle=n;this.mpns.subtitle=n;this.fcm.subtitle=n}},{key:"badge",get:function(){return this._badge},set:function(n){this._badge=n;this.apns.badge=n;this.mpns.badge=n;this.fcm.badge=n}},{key:"sound",get:function(){return this._sound},set:function(n){this._sound=n;this.apns.sound=n;this.mpns.sound=n;this.fcm.sound=n}}]),e.default(n,[{key:"buildPayload",value:function(n){var t={},i,r,u;return(n.includes("apns")||n.includes("apns2"))&&(this.apns._apnsPushType=n.includes("apns")?"apns":"apns2",i=this.apns.toObject(),i&&Object.keys(i).length&&(t.pn_apns=i)),n.includes("mpns")&&(r=this.mpns.toObject(),r&&Object.keys(r).length&&(t.pn_mpns=r)),n.includes("fcm")&&(u=this.fcm.toObject(),u&&Object.keys(u).length&&(t.pn_gcm=u)),Object.keys(t).length&&this._debugging&&(t.pn_debug=!0),t}}]),n}();t.default=b},function(n,t,i){var r=i(43);n.exports=function(n,t){var i,u,f,e;if(null==n)return{};if(f=r(n,t),Object.getOwnPropertySymbols)for(e=Object.getOwnPropertySymbols(n),u=0;u<e.length;u++)i=e[u],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(n,i)&&(f[i]=n[i]);return f}},function(n){n.exports=function(n,t){if(null==n)return{};for(var i,u={},f=Object.keys(n),r=0;r<f.length;r++)i=f[r],t.indexOf(i)>=0||(u[i]=n[i]);return u}},function(n,t,i){"use strict";var u=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=u(i(7)),e=u(i(5)),o=u(i(6)),r=u(i(4)),s=(u(i(8)),i(2),function(){function n(t,i){e.default(this,n);r.default(this,"_config",void 0);r.default(this,"_cbor",void 0);r.default(this,"_userTokens",void 0);r.default(this,"_spaceTokens",void 0);r.default(this,"_userToken",void 0);r.default(this,"_spaceToken",void 0);this._config=t;this._cbor=i;this._initializeTokens()}return o.default(n,[{key:"_initializeTokens",value:function(){this._userTokens={};this._spaceTokens={};this._userToken=void 0;this._spaceToken=void 0}},{key:"_setToken",value:function(n){var i=this,t=this.parseToken(n);t&&t.resources&&(t.resources.users&&Object.keys(t.resources.users).forEach(function(t){i._userTokens[t]=n}),t.resources.spaces&&Object.keys(t.resources.spaces).forEach(function(t){i._spaceTokens[t]=n}));t&&t.patterns&&(t.patterns.users&&Object.keys(t.patterns.users).length>0&&(this._userToken=n),t.patterns.spaces&&Object.keys(t.patterns.spaces).length>0&&(this._spaceToken=n))}},{key:"setToken",value:function(n){n&&n.length>0&&this._setToken(n)}},{key:"setTokens",value:function(n){var t=this;n&&n.length&&"object"===f.default(n)&&n.forEach(function(n){t.setToken(n)})}},{key:"getTokens",value:function(n){var i=this,t={users:{},spaces:{}};return n?(n.user&&(t.user=this._userToken),n.space&&(t.space=this._spaceToken),n.users&&n.users.forEach(function(n){t.users[n]=i._userTokens[n]}),n.space&&n.spaces.forEach(function(n){t.spaces[n]=i._spaceTokens[n]})):(this._userToken&&(t.user=this._userToken),this._spaceToken&&(t.space=this._spaceToken),Object.keys(this._userTokens).forEach(function(n){t.users[n]=i._userTokens[n]}),Object.keys(this._spaceTokens).forEach(function(n){t.spaces[n]=i._spaceTokens[n]})),t}},{key:"getToken",value:function(n,t){var i;return t?"user"===n?i=this._userTokens[t]:"space"===n&&(i=this._spaceTokens[t]):"user"===n?i=this._userToken:"space"===n&&(i=this._spaceToken),i}},{key:"extractPermissions",value:function(n){var t={create:!1,read:!1,write:!1,manage:!1,"delete":!1};return 16==(16&n)&&(t.create=!0),8==(8&n)&&(t.delete=!0),4==(4&n)&&(t.manage=!0),2==(2&n)&&(t.write=!0),1==(1&n)&&(t.read=!0),t}},{key:"parseToken",value:function(n){var r=this,t=this._cbor.decodeToken(n),u,f;if(void 0!==t){var e=Object.keys(t.res.usr),o=Object.keys(t.res.spc),s=Object.keys(t.pat.usr),h=Object.keys(t.pat.spc),i={version:t.v,timestamp:t.t,ttl:t.ttl},c=e.length>0,l=o.length>0;return(c||l)&&(i.resources={},c&&(i.resources.users={},e.forEach(function(n){i.resources.users[n]=r.extractPermissions(t.res.usr[n])})),l&&(i.resources.spaces={},o.forEach(function(n){i.resources.spaces[n]=r.extractPermissions(t.res.spc[n])}))),u=s.length>0,f=h.length>0,(u||f)&&(i.patterns={},u&&(i.patterns.users={},s.forEach(function(n){i.patterns.users[n]=r.extractPermissions(t.pat.usr[n])})),f&&(i.patterns.spaces={},h.forEach(function(n){i.patterns.spaces[n]=r.extractPermissions(t.pat.spc[n])}))),Object.keys(t.meta).length>0&&(i.meta=t.meta),i.signature=t.sig,i}}},{key:"clearTokens",value:function(){this._initializeTokens()}}]),n}());t.default=s;n.exports=t.default},function(n,t,i){function r(t){var i="function"==typeof Map?new Map:void 0;return n.exports=r=function(n){function t(){return o(n,arguments,u(this).constructor)}if(null===n||!e(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,t)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,n)},r(t)}var u=i(13),f=i(15),e=i(46),o=i(47);n.exports=r},function(n){n.exports=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")}},function(n,t,i){function r(){return n.exports=f()?r=Reflect.construct:r=function(n,t,i){var r=[null],f;return r.push.apply(r,t),f=new(Function.bind.apply(n,r)),i&&u(f,i.prototype),f},r.apply(null,arguments)}var u=i(15),f=i(48);n.exports=r},function(n){n.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNAddChannelsToGroupOperation};t.validateParams=function(n,t){var i=t.channels,r=t.channelGroup,u=n.config;return r?!i||0===i.length?"Missing Channels":u.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"};t.getURL=function(n,t){var i=t.channelGroup,r=n.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(f.default.encodeString(i))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var i=t.channels;return{add:(void 0===i?[]:i).join(",")}};t.handleResponse=function(){return{}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNRemoveChannelsFromGroupOperation};t.validateParams=function(n,t){var i=t.channels,r=t.channelGroup,u=n.config;return r?!i||0===i.length?"Missing Channels":u.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"};t.getURL=function(n,t){var i=t.channelGroup,r=n.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(f.default.encodeString(i))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var i=t.channels;return{remove:(void 0===i?[]:i).join(",")}};t.handleResponse=function(){return{}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNRemoveGroupOperation};t.validateParams=function(n,t){var i=t.channelGroup,r=n.config;return i?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"};t.getURL=function(n,t){var i=t.channelGroup,r=n.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(f.default.encodeString(i),"/remove")};t.isAuthSupported=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.prepareParams=function(){return{}};t.handleResponse=function(){return{}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNChannelGroupsOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n){var t=n.config;return"/v1/channel-registration/sub-key/".concat(t.subscribeKey,"/channel-group")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return{groups:t.payload.groups}};i(2);r=u(i(1))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNChannelsForGroupOperation};t.validateParams=function(n,t){var i=t.channelGroup,r=n.config;return i?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"};t.getURL=function(n,t){var i=t.channelGroup,r=n.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(f.default.encodeString(i))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return{channels:t.payload.channels}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation};t.validateParams=function(n,t){var u=t.device,i=t.pushGateway,r=t.channels,f=t.topic,e=n.config;return u?i?"apns2"===i&&!f?"Missing APNS2 topic":!r||0===r.length?"Missing Channels":e.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"};t.getURL=function(n,t){var i=t.device,u=t.pushGateway,r=n.config;return"apns2"===u?"/v2/push/sub-key/".concat(r.subscribeKey,"/devices-apns2/").concat(i):"/v1/push/sub-key/".concat(r.subscribeKey,"/devices/").concat(i)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.pushGateway,u=t.channels,e=void 0===u?[]:u,f=t.environment,o=void 0===f?"development":f,s=t.topic,i={type:r,add:e.join(",")};return"apns2"===r&&delete(i=Object.assign({},i,{environment:o,topic:s})).type,i};t.handleResponse=function(){return{}};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation};t.validateParams=function(n,t){var u=t.device,i=t.pushGateway,r=t.channels,f=t.topic,e=n.config;return u?i?"apns2"===i&&!f?"Missing APNS2 topic":!r||0===r.length?"Missing Channels":e.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"};t.getURL=function(n,t){var i=t.device,u=t.pushGateway,r=n.config;return"apns2"===u?"/v2/push/sub-key/".concat(r.subscribeKey,"/devices-apns2/").concat(i):"/v1/push/sub-key/".concat(r.subscribeKey,"/devices/").concat(i)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.pushGateway,u=t.channels,e=void 0===u?[]:u,f=t.environment,o=void 0===f?"development":f,s=t.topic,i={type:r,remove:e.join(",")};return"apns2"===r&&delete(i=Object.assign({},i,{environment:o,topic:s})).type,i};t.handleResponse=function(){return{}};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation};t.validateParams=function(n,t){var r=t.device,i=t.pushGateway,u=t.topic,f=n.config;return r?i?"apns2"===i&&!u?"Missing APNS2 topic":f.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"};t.getURL=function(n,t){var i=t.device,u=t.pushGateway,r=n.config;return"apns2"===u?"/v2/push/sub-key/".concat(r.subscribeKey,"/devices-apns2/").concat(i):"/v1/push/sub-key/".concat(r.subscribeKey,"/devices/").concat(i)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.pushGateway,u=t.environment,f=void 0===u?"development":u,e=t.topic,i={type:r};return"apns2"===r&&delete(i=Object.assign({},i,{environment:f,topic:e})).type,i};t.handleResponse=function(n,t){return{channels:t}};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNRemoveAllPushNotificationsOperation};t.validateParams=function(n,t){var r=t.device,i=t.pushGateway,u=t.topic,f=n.config;return r?i?"apns2"===i&&!u?"Missing APNS2 topic":f.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"};t.getURL=function(n,t){var i=t.device,u=t.pushGateway,r=n.config;return"apns2"===u?"/v2/push/sub-key/".concat(r.subscribeKey,"/devices-apns2/").concat(i,"/remove"):"/v1/push/sub-key/".concat(r.subscribeKey,"/devices/").concat(i,"/remove")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.pushGateway,u=t.environment,f=void 0===u?"development":u,e=t.topic,i={type:r};return"apns2"===r&&delete(i=Object.assign({},i,{environment:f,topic:e})).type,i};t.handleResponse=function(){return{}};i(2);r=u(i(1))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNUnsubscribeOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var u=n.config,i=t.channels,r=void 0===i?[]:i,e=r.length>0?r.join(","):",";return"/v2/presence/sub-key/".concat(u.subscribeKey,"/channel/").concat(f.default.encodeString(e),"/leave")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var i=t.channelGroups,r=void 0===i?[]:i,u={};return r.length>0&&(u["channel-group"]=r.join(",")),u};t.handleResponse=function(){return{}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNWhereNowOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var i=n.config,r=t.uuid,u=void 0===r?i.UUID:r;return"/v2/presence/sub-key/".concat(i.subscribeKey,"/uuid/").concat(u)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};i(2);r=u(i(1))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNHeartbeatOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var u=n.config,i=t.channels,r=void 0===i?[]:i,e=r.length>0?r.join(","):",";return"/v2/presence/sub-key/".concat(u.subscribeKey,"/channel/").concat(f.default.encodeString(e),"/heartbeat")};t.isAuthSupported=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.prepareParams=function(n,t){var r=t.channelGroups,u=void 0===r?[]:r,f=t.state,e=void 0===f?{}:f,o=n.config,i={};return u.length>0&&(i["channel-group"]=u.join(",")),i.state=JSON.stringify(e),i.heartbeat=o.getPresenceTimeout(),i};t.handleResponse=function(){return{}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNGetStateOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var i=n.config,r=t.uuid,o=void 0===r?i.UUID:r,u=t.channels,e=void 0===u?[]:u,s=e.length>0?e.join(","):",";return"/v2/presence/sub-key/".concat(i.subscribeKey,"/channel/").concat(f.default.encodeString(s),"/uuid/").concat(o)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var i=t.channelGroups,r=void 0===i?[]:i,u={};return r.length>0&&(u["channel-group"]=r.join(",")),u};t.handleResponse=function(n,t,i){var u=i.channels,f=void 0===u?[]:u,e=i.channelGroups,o=void 0===e?[]:e,r={};return 1===f.length&&0===o.length?r[f[0]]=t.payload:r=t.payload,{channels:r}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNSetStateOperation};t.validateParams=function(n,t){var u=n.config,f=t.state,i=t.channels,e=void 0===i?[]:i,r=t.channelGroups,o=void 0===r?[]:r;return f?u.subscribeKey?0===e.length&&0===o.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"};t.getURL=function(n,t){var i=n.config,r=t.channels,u=void 0===r?[]:r,e=u.length>0?u.join(","):",";return"/v2/presence/sub-key/".concat(i.subscribeKey,"/channel/").concat(f.default.encodeString(e),"/uuid/").concat(i.UUID,"/data")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var f=t.state,r=t.channelGroups,u=void 0===r?[]:r,i={};return i.state=JSON.stringify(f),u.length>0&&(i["channel-group"]=u.join(",")),i};t.handleResponse=function(n,t){return{state:t.payload}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";function u(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function f(n){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?u(Object(i),!0).forEach(function(t){e.default(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return o.default.PNHereNowOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var o=n.config,r=t.channels,i=void 0===r?[]:r,u=t.channelGroups,h=void 0===u?[]:u,f="/v2/presence/sub-key/".concat(o.subscribeKey),e;return(i.length>0||h.length>0)&&(e=i.length>0?i.join(","):",",f+="/channel/".concat(s.default.encodeString(e))),f};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.channelGroups,u=void 0===r?[]:r,e=t.includeUUIDs,h=void 0===e||e,o=t.includeState,c=void 0!==o&&o,s=t.queryParameters,l=void 0===s?{}:s,i={};return h||(i.disable_uuids=1),c&&(i.state=1),u.length>0&&(i["channel-group"]=u.join(",")),f(f({},i),l)};t.handleResponse=function(n,t,i){var u=i.channels,r=void 0===u?[]:u,f=i.channelGroups,e=void 0===f?[]:f,o=i.includeUUIDs,s=void 0===o||o,h=i.includeState,c=void 0!==h&&h;return r.length>1||e.length>0||0===e.length&&0===r.length?function(){var n={};return n.totalChannels=t.payload.total_channels,n.totalOccupancy=t.payload.total_occupancy,n.channels={},Object.keys(t.payload.channels).forEach(function(i){var u=t.payload.channels[i],r=[];return n.channels[i]={occupants:r,name:i,occupancy:u.occupancy},s&&u.uuids.forEach(function(n){c?r.push({state:n.state,uuid:n.uuid}):r.push({state:null,uuid:n})}),n}),n}():function(){var n={},i=[];return n.totalChannels=1,n.totalOccupancy=t.occupancy,n.channels={},n.channels[r[0]]={occupants:i,name:r[0],occupancy:t.occupancy},s&&t.uuids&&t.uuids.forEach(function(n){c?i.push({state:n.state,uuid:n.uuid}):i.push({state:null,uuid:n})}),n}()};var e=r(i(4)),o=(i(2),r(i(1))),s=r(i(3))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNAddMessageActionOperation};t.validateParams=function(n,t){var r=n.config,i=t.action,u=t.channel;return t.messageTimetoken?r.subscribeKey?u?i?i.value?i.type?i.type.length>15?"Action.type value exceed maximum length of 15":void 0:"Missing Action.type":"Missing Action.value":"Missing Action":"Missing message channel":"Missing Subscribe Key":"Missing message timetoken"};t.usePost=function(){return!0};t.postURL=function(n,t){var i=n.config,r=t.channel,u=t.messageTimetoken;return"/v1/message-actions/".concat(i.subscribeKey,"/channel/").concat(r,"/message/").concat(u)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.getRequestHeaders=function(){return{"Content-Type":"application/json"}};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.postPayload=function(n,t){return t.action};t.handleResponse=function(n,t){return{data:t.data}};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNRemoveMessageActionOperation};t.validateParams=function(n,t){var i=n.config,r=t.channel,u=t.actionTimetoken;return t.messageTimetoken?u?i.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key":"Missing action timetoken":"Missing message timetoken"};t.useDelete=function(){return!0};t.getURL=function(n,t){var i=n.config,r=t.channel,u=t.actionTimetoken,f=t.messageTimetoken;return"/v1/message-actions/".concat(i.subscribeKey,"/channel/").concat(r,"/message/").concat(f,"/action/").concat(u)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return{data:t.data}};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetMessageActionsOperation};t.validateParams=function(n,t){var i=n.config,r=t.channel;return i.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key"};t.getURL=function(n,t){var i=n.config,r=t.channel;return"/v1/message-actions/".concat(i.subscribeKey,"/channel/").concat(r)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.limit,u=t.start,f=t.end,i={};return r&&(i.limit=r),u&&(i.start=u),f&&(i.end=f),i};t.handleResponse=function(n,t){var i={data:t.data,start:null,end:null};return i.data.length&&(i.end=i.data[i.data.length-1].actionTimetoken,i.start=i.data[0].actionTimetoken),i};i(2);r=u(i(1))},function(){},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNListFilesOperation},validateParams:function(n,t){if(!(null==t?void 0:t.channel))return"channel can't be empty"},getURL:function(n,t){var i=n.config;return"/v1/files/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/files")},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("fileUpload")},prepareParams:function(n,t){var i={};return t.limit&&(i.limit=t.limit),t.next&&(i.next=t.next),i},handleResponse:function(n,t){return{status:t.status,data:t.data,next:t.next,count:t.count}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNGenerateUploadUrlOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?void 0:"name can't be empty":"channel can't be empty"},usePost:function(){return!0},postURL:function(n,t){var i=n.config;return"/v1/files/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/generate-upload-url")},postPayload:function(n,t){return{name:t.name}},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(n,t){return{status:t.status,data:t.data,file_upload_request:t.file_upload_request}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(7)),f=r(i(1)),e=r(i(3)),o={getOperation:function(){return f.default.PNPublishFileOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.fileId)?(null==t?void 0:t.fileName)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},getURL:function(n,t){var i=n.config,r=i.publishKey,u=i.subscribeKey,f=function(n,t){var r=n.crypto,u=n.config,i=JSON.stringify(t);return u.cipherKey&&(i=r.encrypt(i),i=JSON.stringify(i)),i||""}(n,{message:t.message,file:{name:t.fileName,id:t.fileId}});return"/v1/files/publish-file/".concat(r,"/").concat(u,"/0/").concat(t.channel,"/0/").concat(e.default.encodeString(f))},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("fileUpload")},prepareParams:function(n,t){var i={};return t.ttl&&(i.ttl=t.ttl),void 0!==t.storeInHistory&&(i.store=t.storeInHistory?"1":"0"),t.meta&&"object"===u.default(t.meta)&&(i.meta=JSON.stringify(t.meta)),i},handleResponse:function(n,t){return{timetoken:t[2]}}};t.default=o;n.exports=t.default},function(n,t,i){"use strict";var u=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=u(i(11)),e=u(i(12)),r=i(18);t.default=function(n){var o,h,c,l,i,t,s,a,u,v=(c=(o=n).generateUploadUrl,l=o.publishFile,i=o.modules,t=i.PubNubFile,s=i.config,a=i.cryptography,u=i.networking,h=e.default(f.default.mark(function n(i){var v,w,ut,y,ft,et,ot,e,g,nt,p,tt,it,b,k,o,h,rt,d;return f.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(v=i.channel,w=i.file,ut=i.message,y=i.cipherKey,ft=i.meta,et=i.ttl,ot=i.storeInHistory,v){n.next=3;break}throw new r.PubNubError("Validation failed, check status for details",r.createValidationError("channel can't be empty"));case 3:if(w){n.next=5;break}throw new r.PubNubError("Validation failed, check status for details",r.createValidationError("file can't be empty"));case 5:return e=t.create(w),n.next=8,c({channel:v,name:e.name});case 8:if(g=n.sent,nt=g.file_upload_request,p=nt.url,tt=nt.form_fields,it=g.data,b=it.id,k=it.name,!t.supportsEncryptFile||!(null!=y?y:s.cipherKey)){n.next=19;break}return n.next=18,a.encryptFile(null!=y?y:s.cipherKey,e,t);case 18:e=n.sent;case 19:if(o=tt,e.mimeType&&(o=tt.map(function(n){return"Content-Type"===n.key?{key:n.key,value:e.mimeType}:n})),n.prev=21,!t.supportsFileUri||!w.uri){n.next=34;break}return n.t0=u,n.t1=p,n.t2=o,n.next=28,e.toFileUri();case 28:return n.t3=n.sent,n.next=31,n.t0.POSTFILE.call(n.t0,n.t1,n.t2,n.t3);case 31:h=n.sent;n.next=71;break;case 34:if(!t.supportsFile){n.next=46;break}return n.t4=u,n.t5=p,n.t6=o,n.next=40,e.toFile();case 40:return n.t7=n.sent,n.next=43,n.t4.POSTFILE.call(n.t4,n.t5,n.t6,n.t7);case 43:h=n.sent;n.next=71;break;case 46:if(!t.supportsBuffer){n.next=58;break}return n.t8=u,n.t9=p,n.t10=o,n.next=52,e.toBuffer();case 52:return n.t11=n.sent,n.next=55,n.t8.POSTFILE.call(n.t8,n.t9,n.t10,n.t11);case 55:h=n.sent;n.next=71;break;case 58:if(!t.supportsBlob){n.next=70;break}return n.t12=u,n.t13=p,n.t14=o,n.next=64,e.toBlob();case 64:return n.t15=n.sent,n.next=67,n.t12.POSTFILE.call(n.t12,n.t13,n.t14,n.t15);case 67:h=n.sent;n.next=71;break;case 70:throw new Error("Unsupported environment");case 71:n.next=76;break;case 73:throw n.prev=73,n.t16=n.catch(21),new r.PubNubError("Upload to bucket failed",n.t16);case 76:if(204===h.status){n.next=78;break}throw new r.PubNubError("Upload to bucket was unsuccessful",h);case 78:rt=5;d=!1;case 80:if(d||!(rt>0)){n.next=92;break}return n.prev=81,n.next=84,l({channel:v,message:ut,fileId:b,fileName:k,meta:ft,storeInHistory:ot,ttl:et});case 84:d=!0;n.next=90;break;case 87:n.prev=87;n.t17=n.catch(81);rt-=1;case 90:n.next=80;break;case 92:if(d){n.next=96;break}throw new r.PubNubError("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{channel:v,id:b,name:k});case 96:return n.abrupt("return",{id:b,name:k});case 97:case"end":return n.stop()}},n,null,[[21,73],[81,87]])})),function(){return h.apply(this,arguments)});return function(n,t){var i=v(n);return"function"==typeof t?(i.then(function(n){return t(null,n)}).catch(function(n){return t(n,null)}),i):i}};n.exports=t.default},function(n){var t=function(n){"use strict";function u(n,t,i){return Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),n[t]}function g(n,i,r,u){var e=i&&i.prototype instanceof p?i:p,f=Object.create(e.prototype),o=new b(u||[]);return f._invoke=function(n,i,r){var u="suspendedStart";return function(f,e){var h,s,o;if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===f)throw e;return it()}for(r.method=f,r.arg=e;;){if(h=r.delegate,h&&(s=tt(h,r),s)){if(s===t)continue;return s}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===u)throw u="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);if(u="executing",o=y(n,i,r),"normal"===o.type){if(u=r.done?"completed":"suspendedYield",o.arg===t)continue;return{value:o.arg,done:r.done}}"throw"===o.type&&(u="completed",r.method="throw",r.arg=o.arg)}}}(n,r,o),f}function y(n,t,i){try{return{type:"normal",arg:n.call(t,i)}}catch(n){return{type:"throw",arg:n}}}function p(){}function s(){}function f(){}function nt(n){["next","throw","return"].forEach(function(t){u(n,t,function(n){return this._invoke(t,n)})})}function l(n,t){var r;this._invoke=function(u,f){function e(){return new t(function(r,e){!function r(u,f,e,o){var c=y(n[u],n,f),h,s;if("throw"!==c.type)return h=c.arg,s=h.value,s&&"object"==typeof s&&i.call(s,"__await")?t.resolve(s.__await).then(function(n){r("next",n,e,o)},function(n){r("throw",n,e,o)}):t.resolve(s).then(function(n){h.value=n;e(h)},function(n){return r("throw",n,e,o)});o(c.arg)}(u,f,r,e)})}return r=r?r.then(e,e):e()}}function tt(n,i){var f=n.iterator[i.method],u,r;if(void 0===f){if(i.delegate=null,"throw"===i.method){if(n.iterator.return&&(i.method="return",i.arg=void 0,tt(n,i),"throw"===i.method))return t;i.method="throw";i.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return(u=y(f,n.iterator,i.arg),"throw"===u.type)?(i.method="throw",i.arg=u.arg,i.delegate=null,t):(r=u.arg,r?r.done?(i[n.resultName]=r.value,i.next=n.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,t):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,t))}function ut(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]);2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]);this.tryEntries.push(t)}function w(n){var t=n.completion||{};t.type="normal";delete t.arg;n.completion=t}function b(n){this.tryEntries=[{tryLoc:"root"}];n.forEach(ut,this);this.reset(!0)}function k(n){var t,r,u;if(n){if(t=n[o],t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return r=-1,u=function t(){for(;++r<n.length;)if(i.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t},u.next=u}return{next:it}}function it(){return{value:void 0,done:!0}}var d=Object.prototype,i=d.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",rt=a.asyncIterator||"@@asyncIterator",v=a.toStringTag||"@@toStringTag",t,h,c,e,r;try{u({},"")}catch(n){u=function(n,t,i){return n[t]=i}}return n.wrap=g,t={},h={},h[o]=function(){return this},c=Object.getPrototypeOf,e=c&&c(c(k([]))),e&&e!==d&&i.call(e,o)&&(h=e),r=f.prototype=p.prototype=Object.create(h),s.prototype=r.constructor=f,f.constructor=s,s.displayName=u(f,v,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,u(n,v,"GeneratorFunction")),n.prototype=Object.create(r),n},n.awrap=function(n){return{__await:n}},nt(l.prototype),l.prototype[rt]=function(){return this},n.AsyncIterator=l,n.async=function(t,i,r,u,f){void 0===f&&(f=Promise);var e=new l(g(t,i,r,u),f);return n.isGeneratorFunction(i)?e:e.next().then(function(n){return n.done?n.value:e.next()})},nt(r),u(r,v,"Generator"),r[o]=function(){return this},r.toString=function(){return"[object Generator]"},n.keys=function(n){var i=[];for(var t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=k,b.prototype={constructor:b,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!n)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){function r(t,i){return e.type="throw",e.arg=n,u.next=t,i&&(u.method="next",u.arg=void 0),!!i}var u,f,t,e,o,s;if(this.done)throw n;for(u=this,f=this.tryEntries.length-1;f>=0;--f){if(t=this.tryEntries[f],e=t.completion,"root"===t.tryLoc)return r("end");if(t.tryLoc<=this.prev)if(o=i.call(t,"catchLoc"),s=i.call(t,"finallyLoc"),o&&s){if(this.prev<t.catchLoc)return r(t.catchLoc,!0);if(this.prev<t.finallyLoc)return r(t.finallyLoc)}else if(o){if(this.prev<t.catchLoc)return r(t.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<t.finallyLoc)return r(t.finallyLoc)}}},abrupt:function(n,r){for(var f,u,o,e=this.tryEntries.length-1;e>=0;--e)if(f=this.tryEntries[e],f.tryLoc<=this.prev&&i.call(f,"finallyLoc")&&this.prev<f.finallyLoc){u=f;break}return u&&("break"===n||"continue"===n)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null),o=u?u.completion:{},o.type=n,o.arg=r,u?(this.method="next",this.next=u.finallyLoc,t):this.complete(o)},complete:function(n,i){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&i&&(this.next=i),t},finish:function(n){for(var i,r=this.tryEntries.length-1;r>=0;--r)if(i=this.tryEntries[r],i.finallyLoc===n)return this.complete(i.completion,i.afterLoc),w(i),t},"catch":function(n){for(var i,r,u,t=this.tryEntries.length-1;t>=0;--t)if(i=this.tryEntries[t],i.tryLoc===n)return r=i.completion,"throw"===r.type&&(u=r.arg,w(i)),u;throw new Error("illegal catch attempt");},delegateYield:function(n,i,r){return this.delegate={iterator:k(n),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=void 0),t}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=i(18);t.default=function(n,t){var i=n.config,u=t.channel,f=t.id,e=t.name;if(!u)throw new r.PubNubError("Validation failed, check status for details",r.createValidationError("channel can't be empty"));if(!f)throw new r.PubNubError("Validation failed, check status for details",r.createValidationError("file id can't be empty"));if(!e)throw new r.PubNubError("Validation failed, check status for details",r.createValidationError("file name can't be empty"));return"https://".concat(i.origin,"/v1/files/").concat(i.subscribeKey,"/channels/").concat(u,"/files/").concat(f,"/").concat(e)};n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u,f=r(i(11)),e=r(i(12)),o=r(i(1)),s={getOperation:function(){return o.default.PNDownloadFileOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?(null==t?void 0:t.id)?void 0:"id can't be empty":"name can't be empty":"channel can't be empty"},useGetFile:function(){return!0},getFileURL:function(n,t){var i=n.config;return"/v1/files/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/files/").concat(t.id,"/").concat(t.name)},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},ignoreBody:function(){return!0},forceBuffered:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:(u=e.default(f.default.mark(function n(t,i,r){var e,o,s,c,u,h;return f.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.PubNubFile,s=t.config,c=t.cryptography,u=i.response.body,!o.supportsEncryptFile||!s.cipherKey){n.next=6;break}return n.next=5,c.decrypt(null!==(h=r.cipherKey)&&void 0!==h?h:s.cipherKey,u);case 5:u=n.sent;case 6:return n.abrupt("return",o.create({data:u,name:null!==(e=i.response.name)&&void 0!==e?e:r.name,mimeType:i.response.type}));case 7:case"end":return n.stop()}},n)})),function(){return u.apply(this,arguments)})};t.default=s;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNListFilesOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.id)?(null==t?void 0:t.name)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},useDelete:function(){return!0},getURL:function(n,t){var i=n.config;return"/v1/files/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/files/").concat(t.id,"/").concat(t.name)},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(n,t){return{status:t.status}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(1)),e={getOperation:function(){return f.default.PNGetAllUUIDMetadataOperation},validateParams:function(){},getURL:function(n){var t=n.config;return"/v2/objects/".concat(t.subscribeKey,"/uuids")},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("user")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,i={};return((null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)&&(i.include="custom"),null==t||null===(f=t.include)||void 0===f?void 0:f.totalCount)&&(i.count=null===(s=t.include)||void 0===s?void 0:s.totalCount),(null==t||null===(e=t.page)||void 0===e?void 0:e.next)&&(i.start=null===(h=t.page)||void 0===h?void 0:h.next),(null==t||null===(o=t.page)||void 0===o?void 0:o.prev)&&(i.end=null===(c=t.page)||void 0===c?void 0:c.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),i.limit=null==t?void 0:t.limit,null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(l=t.sort)&&void 0!==l?l:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,next:t.next,prev:t.prev}}};t.default=e;n.exports=t.default},function(n){n.exports=function(n){if(Array.isArray(n))return n}},function(n){n.exports=function(n,t){var o,i;if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var r=[],u=!0,f=!1,e=void 0;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);u=!0);}catch(n){f=!0;e=n}finally{try{u||null==i.return||i.return()}finally{if(f)throw e;}}return r}}},function(n,t,i){var r=i(80);n.exports=function(n,t){if(n){if("string"==typeof n)return r(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(n,t):void 0}}},function(n){n.exports=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}},function(n){n.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNGetUUIDMetadataOperation},validateParams:function(){},getURL:function(n,t){var i,r=n.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:r.getUUID())},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("user")},prepareParams:function(n,t){var i,r,u,f=n.config;return{uuid:null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:f.getUUID(),include:(null===(r=null==t||null===(u=t.include)||void 0===u?void 0:u.customFields)||void 0===r||r)&&"custom"}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNSetUUIDMetadataOperation},validateParams:function(n,t){if(!(null==t?void 0:t.data))return"Data cannot be empty"},usePatch:function(){return!0},patchURL:function(n,t){var i,r=n.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:r.getUUID())},patchPayload:function(n,t){return t.data},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("user")},prepareParams:function(n,t){var i,r,u,f=n.config;return{uuid:null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:f.getUUID(),include:(null===(r=null==t||null===(u=t.include)||void 0===u?void 0:u.customFields)||void 0===r||r)&&"custom"}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNRemoveUUIDMetadataOperation},validateParams:function(){},getURL:function(n,t){var i,r=n.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:r.getUUID())},useDelete:function(){return!0},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("user")},prepareParams:function(n,t){var i,r=n.config;return{uuid:null!==(i=null==t?void 0:t.uuid)&&void 0!==i?i:r.getUUID()}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(1)),e={getOperation:function(){return f.default.PNGetAllChannelMetadataOperation},validateParams:function(){},getURL:function(n){var t=n.config;return"/v2/objects/".concat(t.subscribeKey,"/channels")},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("channel")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,i={};return((null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)&&(i.include="custom"),null==t||null===(f=t.include)||void 0===f?void 0:f.totalCount)&&(i.count=null===(s=t.include)||void 0===s?void 0:s.totalCount),(null==t||null===(e=t.page)||void 0===e?void 0:e.next)&&(i.start=null===(h=t.page)||void 0===h?void 0:h.next),(null==t||null===(o=t.page)||void 0===o?void 0:o.prev)&&(i.end=null===(c=t.page)||void 0===c?void 0:c.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),(null==t?void 0:t.limit)&&(i.limit=t.limit),null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(l=t.sort)&&void 0!==l?l:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=e;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNGetChannelMetadataOperation},validateParams:function(n,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/channels/").concat(t.channel)},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("channel")},prepareParams:function(n,t){var i,r;return{include:(null===(i=null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)||void 0===i||i)&&"custom"}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNSetChannelMetadataOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.data)?void 0:"Data cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/channels/").concat(t.channel)},patchPayload:function(n,t){return t.data},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("channel")},prepareParams:function(n,t){var i,r;return{include:(null===(i=null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)||void 0===i||i)&&"custom"}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var f=i(0),r,u;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r=f(i(1));u={getOperation:function(){return r.default.PNRemoveChannelMetadataOperation},validateParams:function(n,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/channels/").concat(t.channel)},useDelete:function(){return!0},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("channel")},prepareParams:function(){return{}},handleResponse:function(n,t){return{status:t.status,data:t.data}}};t.default=u;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(1)),e={getOperation:function(){return f.default.PNGetMembersOperation},validateParams:function(n,t){if(!(null==t?void 0:t.channel))return"UUID cannot be empty"},getURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/uuids")},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("member")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,a,v,y,p,i={};return(null==t?void 0:t.include)&&(i.include=[],(null===(s=t.include)||void 0===s?void 0:s.customFields)&&i.include.push("custom"),(null===(h=t.include)||void 0===h?void 0:h.customUUIDFields)&&i.include.push("uuid.custom"),(null===(c=null===(l=t.include)||void 0===l?void 0:l.UUIDFields)||void 0===c||c)&&i.include.push("uuid"),i.include=i.include.join(",")),(null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(i.count=null===(a=t.include)||void 0===a?void 0:a.totalCount),(null==t||null===(f=t.page)||void 0===f?void 0:f.next)&&(i.start=null===(v=t.page)||void 0===v?void 0:v.next),(null==t||null===(e=t.page)||void 0===e?void 0:e.prev)&&(i.end=null===(y=t.page)||void 0===y?void 0:y.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),i.limit=null!==(o=null==t?void 0:t.limit)&&void 0!==o?o:100,null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(p=t.sort)&&void 0!==p?p:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=e;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(4)),e=r(i(1)),o={getOperation:function(){return e.default.PNSetMembersOperation},validateParams:function(n,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.uuids)&&0!==(null==t?void 0:t.uuids.length)?void 0:"UUIDs cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/channels/").concat(t.channel,"/uuids")},patchPayload:function(n,t){return f.default({set:[],remove:[]},t.type,t.uuids.map(function(n){return"string"==typeof n?{uuid:{id:n}}:{uuid:{id:n.id},custom:n.custom}}))},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("member")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,a,i={};return(null==t?void 0:t.include)&&(i.include=[],(null===(o=t.include)||void 0===o?void 0:o.customFields)&&i.include.push("custom"),(null===(s=t.include)||void 0===s?void 0:s.customUUIDFields)&&i.include.push("uuid.custom"),(null===(h=t.include)||void 0===h?void 0:h.UUIDFields)&&i.include.push("uuid"),i.include=i.include.join(",")),((null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(i.count=!0),null==t||null===(f=t.page)||void 0===f?void 0:f.next)&&(i.start=null===(c=t.page)||void 0===c?void 0:c.next),(null==t||null===(e=t.page)||void 0===e?void 0:e.prev)&&(i.end=null===(l=t.page)||void 0===l?void 0:l.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),(null==t?void 0:t.limit)&&(i.limit=t.limit),null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(a=t.sort)&&void 0!==a?a:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=o;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(1)),e={getOperation:function(){return f.default.PNGetMembershipsOperation},validateParams:function(n,t){if(!(null==t?void 0:t.uuid))return"UUID cannot be empty"},getURL:function(n,t){var i=n.config;return"/v2/objects/".concat(i.subscribeKey,"/uuids/").concat(t.uuid,"/channels")},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("membership")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,a,v,y,i={};return(null==t?void 0:t.include)&&(i.include=[],(null===(s=t.include)||void 0===s?void 0:s.customFields)&&i.include.push("custom"),(null===(h=t.include)||void 0===h?void 0:h.customChannelFields)&&i.include.push("channel.custom"),(null===(c=t.include)||void 0===c?void 0:c.channelFields)&&i.include.push("channel"),i.include=i.include.join(",")),(null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(i.count=null===(l=t.include)||void 0===l?void 0:l.totalCount),(null==t||null===(f=t.page)||void 0===f?void 0:f.next)&&(i.start=null===(a=t.page)||void 0===a?void 0:a.next),(null==t||null===(e=t.page)||void 0===e?void 0:e.prev)&&(i.end=null===(v=t.page)||void 0===v?void 0:v.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),i.limit=null!==(o=null==t?void 0:t.limit)&&void 0!==o?o:100,null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(y=t.sort)&&void 0!==y?y:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=e;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=r(i(9)),f=r(i(4)),e=r(i(1)),o={getOperation:function(){return e.default.PNSetMembershipsOperation},validateParams:function(n,t){if(!(null==t?void 0:t.channels)||0===(null==t?void 0:t.channels.length))return"Channels cannot be empty"},usePatch:function(){return!0},patchURL:function(n,t){var i,r=n.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(i=t.uuid)&&void 0!==i?i:r.getUUID(),"/channels")},patchPayload:function(n,t){return f.default({set:[],remove:[]},t.type,t.channels.map(function(n){return"string"==typeof n?{channel:{id:n}}:{channel:{id:n.id},custom:n.custom}}))},getRequestTimeout:function(n){return n.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(n){return n.tokenManager.getToken("membership")},prepareParams:function(n,t){var r,f,e,o,s,h,c,l,a,i={};return(null==t?void 0:t.include)&&(i.include=[],(null===(o=t.include)||void 0===o?void 0:o.customFields)&&i.include.push("custom"),(null===(s=t.include)||void 0===s?void 0:s.customChannelFields)&&i.include.push("channel.custom"),(null===(h=t.include)||void 0===h?void 0:h.channelFields)&&i.include.push("channel"),i.include=i.include.join(",")),((null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(i.count=!0),null==t||null===(f=t.page)||void 0===f?void 0:f.next)&&(i.start=null===(c=t.page)||void 0===c?void 0:c.next),(null==t||null===(e=t.page)||void 0===e?void 0:e.prev)&&(i.end=null===(l=t.page)||void 0===l?void 0:l.prev),((null==t?void 0:t.filter)&&(i.filter=t.filter),(null==t?void 0:t.limit)&&(i.limit=t.limit),null==t?void 0:t.sort)&&(i.sort=Object.entries(null!==(a=t.sort)&&void 0!==a?a:{}).map(function(n){var i=u.default(n,2),r=i[0],t=i[1];return"asc"===t||"desc"===t?"".concat(r,":").concat(t):r})),i},handleResponse:function(n,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=o;n.exports=t.default},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNCreateUserOperation};t.validateParams=function(n,t){var r=n.config,u=t.id,f=t.name,i=t.custom;return u?f?r.subscribeKey?i&&!Object.values(i).every(function(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n})?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"};t.usePost=function(){return!0};t.getURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/users")};t.postURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/users")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.id)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.postPayload=function(n,t){return function(n,t){return t}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateUserOperation};t.validateParams=function(n,t){var r=n.config,u=t.id,f=t.name,i=t.custom;return u?f?r.subscribeKey?i&&!Object.values(i).every(function(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n})?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"};t.usePatch=function(){return!0};t.getURL=function(n,t){var i=n.config,r=t.id;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(r)};t.patchURL=function(n,t){var i=n.config,r=t.id;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(r)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.id)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.patchPayload=function(n,t){return function(n,t){return t}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNDeleteUserOperation};t.validateParams=function(n,t){var i=n.config;return t?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing UserId"};t.useDelete=function(){return!0};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t)||n.tokenManager.getToken("user")};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetUserOperation};t.validateParams=function(n,t){if(!t.userId)return"Missing userId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.userId)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetUsersOperation};t.validateParams=function(){};t.getURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/users")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n){return n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var u=t.include,o=t.limit,r=t.page,s=t.filter,i={},f,e;return o&&(i.limit=o),u&&(f=[],u.totalCount&&(i.count=!0),u.customFields&&f.push("custom"),e=f.join(","),e.length>0&&(i.include=e)),r&&(r.next&&(i.start=r.next),r.prev&&(i.end=r.prev)),s&&(i.filter=s),i};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNCreateSpaceOperation};t.validateParams=function(n,t){var r=n.config,u=t.id,f=t.name,i=t.custom;return u?f?r.subscribeKey?i&&!Object.values(i).every(function(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n})?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"};t.usePost=function(){return!0};t.getURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")};t.postURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.id)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.postPayload=function(n,t){return function(n,t){return t}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateSpaceOperation};t.validateParams=function(n,t){var r=n.config,u=t.id,f=t.name,i=t.custom;return u?f?r.subscribeKey?i&&!Object.values(i).every(function(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n})?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"};t.usePatch=function(){return!0};t.getURL=function(n,t){var i=n.config,r=t.id;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(r)};t.patchURL=function(n,t){var i=n.config,r=t.id;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(r)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.id)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.patchPayload=function(n,t){return function(n,t){return t}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNDeleteSpaceOperation};t.validateParams=function(n,t){var i=n.config;return t?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing SpaceId"};t.useDelete=function(){return!0};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t)||n.tokenManager.getToken("space")};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetSpacesOperation};t.validateParams=function(){};t.getURL=function(n){var t=n.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n){return n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var u=t.include,o=t.limit,r=t.page,s=t.filter,i={},f,e;return o&&(i.limit=o),u&&(f=[],u.totalCount&&(i.count=!0),u.customFields&&f.push("custom"),e=f.join(","),e.length>0&&(i.include=e)),r&&(r.next&&(i.start=r.next),r.prev&&(i.end=r.prev)),s&&(i.filter=s),i};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetSpaceOperation};t.validateParams=function(n,t){if(!t.spaceId)return"Missing spaceId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.spaceId)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var i=t.include,f={},r,u;return i?void 0===i.customFields&&(i.customFields=!0):i={customFields:!0},i&&(r=[],i.customFields&&r.push("custom"),u=r.join(","),u.length>0&&(f.include=u)),f};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetMembersOperation};t.validateParams=function(n,t){if(!t.spaceId)return"Missing spaceId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.spaceId)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,s=t.filter,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.userFields&&f.push("user"),r.customUserFields&&f.push("user.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),s&&(i.filter=s),i};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembersOperation};t.validateParams=function(n,t){var i=t.spaceId,r=t.users;return i?r?void 0:"Missing users":"Missing spaceId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.spaceId)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var i=t.users,r={};return i&&i.length>0&&(r.add=[],i.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);r.add.push(t)})),r}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembersOperation};t.validateParams=function(n,t){var i=t.spaceId,r=t.users;return i?r?void 0:"Missing users":"Missing spaceId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.spaceId)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var r=t.addMembers,u=t.updateMembers,f=t.removeMembers,e=t.users,i={};return r&&r.length>0&&(i.add=[],r.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.add.push(t)})),u&&u.length>0&&(i.update=[],u.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.update.push(t)})),e&&e.length>0&&(i.update=i.update||[],e.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.update.push(t)})),f&&f.length>0&&(i.remove=[],f.forEach(function(n){i.remove.push({id:n})})),i}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembersOperation};t.validateParams=function(n,t){var i=t.spaceId,r=t.users;return i?r?void 0:"Missing users":"Missing spaceId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/spaces/").concat(t.spaceId,"/users")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("space",t.spaceId)||n.tokenManager.getToken("space")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var i=t.users,r={};return i&&i.length>0&&(r.remove=[],i.forEach(function(n){r.remove.push({id:n})})),r}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNGetMembershipsOperation};t.validateParams=function(n,t){if(!t.userId)return"Missing userId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.userId)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,s=t.filter,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),s&&(i.filter=s),i};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembershipsOperation};t.validateParams=function(n,t){var i=t.userId,r=t.spaces;return i?r?void 0:"Missing spaces":"Missing userId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.userId)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var r=t.addMemberships,u=t.updateMemberships,f=t.removeMemberships,e=t.spaces,i={};return r&&r.length>0&&(i.add=[],r.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.add.push(t)})),u&&u.length>0&&(i.update=[],u.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.update.push(t)})),e&&e.length>0&&(i.update=i.update||[],e.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);i.update.push(t)})),f&&f.length>0&&(i.remove=[],f.forEach(function(n){i.remove.push({id:n})})),i}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembershipsOperation};t.validateParams=function(n,t){var i=t.userId,r=t.spaces;return i?r?void 0:"Missing spaces":"Missing userId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.userId)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var i=t.spaces,r={};return i&&i.length>0&&(r.add=[],i.forEach(function(n){var t={id:n.id};n.custom&&(t.custom=n.custom);r.add.push(t)})),r}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNUpdateMembershipsOperation};t.validateParams=function(n,t){var i=t.userId,r=t.spaces;return i?r?void 0:"Missing spaces":"Missing userId"};t.getURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.patchURL=function(n,t){var i=n.config;return"/v1/objects/".concat(i.subscribeKey,"/users/").concat(t.userId,"/spaces")};t.usePatch=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.getAuthToken=function(n,t){return n.tokenManager.getToken("user",t.userId)||n.tokenManager.getToken("user")};t.prepareParams=function(n,t){var r=t.include,o=t.limit,u=t.page,i={},f,e;return o&&(i.limit=o),r&&(f=[],r.totalCount&&(i.count=!0),r.customFields&&f.push("custom"),r.spaceFields&&f.push("space"),r.customSpaceFields&&f.push("space.custom"),e=f.join(","),e.length>0&&(i.include=e)),u&&(u.next&&(i.start=u.next),u.prev&&(i.end=u.prev)),i};t.patchPayload=function(n,t){return function(n,t){var i=t.spaces,r={};return i&&i.length>0&&(r.remove=[],i.forEach(function(n){r.remove.push({id:n})})),r}(0,t)};t.handleResponse=function(n,t){return t};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNAccessManagerAudit};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n){var t=n.config;return"/v2/auth/audit/sub-key/".concat(t.subscribeKey)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!1};t.prepareParams=function(n,t){var r=t.channel,u=t.channelGroup,f=t.authKeys,e=void 0===f?[]:f,i={};return r&&(i.channel=r),u&&(i["channel-group"]=u),e.length>0&&(i.auth=e.join(",")),i};t.handleResponse=function(n,t){return t.payload};i(2);r=u(i(1))},function(n,t,i){"use strict";var u=i(0),r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return r.default.PNAccessManagerGrant};t.validateParams=function(n,t){var i=n.config;return i.subscribeKey?i.publishKey?i.secretKey?null!=t.uuids&&!t.authKeys?"authKeys are required for grant request on uuids":null!=t.uuids&&(null!=t.channels||null!=t.channelGroups)?"Both channel/channelgroup and uuid cannot be used in the same request":void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"};t.getURL=function(n){var t=n.config;return"/v2/auth/grant/sub-key/".concat(t.subscribeKey)};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!1};t.prepareParams=function(n,t){var u=t.channels,f=void 0===u?[]:u,e=t.channelGroups,o=void 0===e?[]:e,s=t.uuids,h=void 0===s?[]:s,r=t.ttl,c=t.read,k=void 0!==c&&c,l=t.write,d=void 0!==l&&l,a=t.manage,g=void 0!==a&&a,v=t.get,nt=void 0!==v&&v,y=t.join,tt=void 0!==y&&y,p=t.update,it=void 0!==p&&p,w=t.authKeys,b=void 0===w?[]:w,rt=t.delete,i={};return i.r=k?"1":"0",i.w=d?"1":"0",i.m=g?"1":"0",i.d=rt?"1":"0",i.g=nt?"1":"0",i.j=tt?"1":"0",i.u=it?"1":"0",f.length>0&&(i.channel=f.join(",")),o.length>0&&(i["channel-group"]=o.join(",")),b.length>0&&(i.auth=b.join(",")),h.length>0&&(i["target-uuid"]=h.join(",")),(r||0===r)&&(i.ttl=r),i};t.handleResponse=function(){return{}};i(2);r=u(i(1))},function(n,t,i){"use strict";function r(n){var t=0;return n.create&&(t|=16),n.delete&&(t|=8),n.manage&&(t|=4),n.write&&(t|=2),n.read&&(t|=1),t}var f=i(0),u;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNAccessManagerGrantToken};t.extractPermissions=r;t.validateParams=function(n,t){var i=n.config;return i.subscribeKey?i.publishKey?i.secretKey?!t.resources&&!t.patterns?"Missing either Resources or Patterns.":t.resources&&(!t.resources.users||0===Object.keys(t.resources.users).length)&&(!t.resources.spaces||0===Object.keys(t.resources.spaces).length)||t.patterns&&(!t.patterns.users||0===Object.keys(t.patterns.users).length)&&(!t.patterns.spaces||0===Object.keys(t.patterns.spaces).length)?"Missing values for either Resources or Patterns.":void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"};t.postURL=function(n){var t=n.config;return"/v3/pam/".concat(t.subscribeKey,"/grant")};t.usePost=function(){return!0};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!1};t.prepareParams=function(){return{}};t.postPayload=function(n,t){return function(n,t){var s=t.ttl,h=t.resources,c=t.patterns,l=t.meta,i={ttl:0,permissions:{resources:{channels:{},groups:{},users:{},spaces:{}},patterns:{channels:{},groups:{},users:{},spaces:{}},meta:{}}},u,f,e,o;return h&&(u=h.users,f=h.spaces,u&&Object.keys(u).forEach(function(n){i.permissions.resources.users[n]=r(u[n])}),f&&Object.keys(f).forEach(function(n){i.permissions.resources.spaces[n]=r(f[n])})),c&&(e=c.users,o=c.spaces,e&&Object.keys(e).forEach(function(n){i.permissions.patterns.users[n]=r(e[n])}),o&&Object.keys(o).forEach(function(n){i.permissions.patterns.spaces[n]=r(o[n])})),(s||0===s)&&(i.ttl=s),l&&(i.permissions.meta=l),i}(0,t)};t.handleResponse=function(n,t){return t.data.token};i(2);u=f(i(1))},function(n,t,i){"use strict";function f(n,t){var r=n.crypto,u=n.config,i=JSON.stringify(t);return u.cipherKey&&(i=r.encrypt(i),i=JSON.stringify(i)),i}var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return o.default.PNPublishOperation};t.validateParams=function(n,t){var i=n.config,r=t.message;return t.channel?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"};t.usePost=function(n,t){var i=t.sendByPost;return void 0!==i&&i};t.getURL=function(n,t){var i=n.config,r=t.channel,e=t.message,o=f(n,e);return"/publish/".concat(i.publishKey,"/").concat(i.subscribeKey,"/0/").concat(u.default.encodeString(r),"/0/").concat(u.default.encodeString(o))};t.postURL=function(n,t){var i=n.config,r=t.channel;return"/publish/".concat(i.publishKey,"/").concat(i.subscribeKey,"/0/").concat(u.default.encodeString(r),"/0")};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.postPayload=function(n,t){var i=t.message;return f(n,i)};t.prepareParams=function(n,t){var r=t.meta,u=t.replicate,s=void 0===u||u,f=t.storeInHistory,o=t.ttl,i={};return null!=f&&(i.store=f?"1":"0"),o&&(i.ttl=o),!1===s&&(i.norep="true"),r&&"object"===e.default(r)&&(i.meta=JSON.stringify(r)),i};t.handleResponse=function(n,t){return{timetoken:t[2]}};var e=r(i(7)),o=(i(2),r(i(1))),u=r(i(3))},function(n,t,i){"use strict";var u=i(0),f,r;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return f.default.PNSignalOperation};t.validateParams=function(n,t){var i=n.config,r=t.message;return t.channel?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"};t.getURL=function(n,t){var i=n.config,f=t.channel,e=t.message,o=(u=e,JSON.stringify(u)),u;return"/signal/".concat(i.publishKey,"/").concat(i.subscribeKey,"/0/").concat(r.default.encodeString(f),"/0/").concat(r.default.encodeString(o))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(){return{}};t.handleResponse=function(n,t){return{timetoken:t[2]}};i(2);f=u(i(1));r=u(i(3))},function(n,t,i){"use strict";function e(n,t){var i=n.config,r=n.crypto;if(!i.cipherKey)return t;try{return r.decrypt(t)}catch(n){return t}}var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNHistoryOperation};t.validateParams=function(n,t){var i=t.channel,r=n.config;return i?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"};t.getURL=function(n,t){var i=t.channel,r=n.config;return"/v2/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(f.default.encodeString(i))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.start,u=t.end,f=t.reverse,e=t.count,h=void 0===e?100:e,o=t.stringifiedTimeToken,c=void 0!==o&&o,s=t.includeMeta,l=void 0!==s&&s,i={include_token:"true"};return i.count=h,r&&(i.start=r),u&&(i.end=u),c&&(i.string_message_token="true"),null!=f&&(i.reverse=f.toString()),l&&(i.include_meta="true"),i};t.handleResponse=function(n,t){var i={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return Array.isArray(t[0])&&t[0].forEach(function(t){var r={timetoken:t.timetoken,entry:e(n,t.message)};t.meta&&(r.meta=t.meta);i.messages.push(r)}),i};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNDeleteMessagesOperation};t.validateParams=function(n,t){var i=t.channel,r=n.config;return i?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"};t.useDelete=function(){return!0};t.getURL=function(n,t){var i=t.channel,r=n.config;return"/v3/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(f.default.encodeString(i))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.start,u=t.end,i={};return r&&(i.start=r),u&&(i.end=u),i};t.handleResponse=function(n,t){return t.payload};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return f.default.PNMessageCounts};t.validateParams=function(n,t){var r=t.channels,u=t.timetoken,i=t.channelTimetokens,f=n.config;return r?u&&i?"timetoken and channelTimetokens are incompatible together":u&&i&&i.length>1&&r.length!==i.length?"Length of channelTimetokens and channels do not match":f.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"};t.getURL=function(n,t){var i=t.channels,r=n.config,u=i.join(",");return"/v3/history/sub-key/".concat(r.subscribeKey,"/message-counts/").concat(e.default.encodeString(u))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var f=t.timetoken,i=t.channelTimetokens,r={},e;return i&&1===i.length?(e=u.default(i,1)[0],r.timetoken=e):i?r.channelsTimetoken=i.join(","):f&&(r.timetoken=f),r};t.handleResponse=function(n,t){return{channels:t.channels}};var u=r(i(9)),f=r(i(1)),e=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNFetchMessagesOperation};t.validateParams=function(n,t){var i=t.channels,r=t.includeMessageActions,u=void 0!==r&&r,f=n.config;if(!i||0===i.length)return"Missing channels";if(!f.subscribeKey)return"Missing Subscribe Key";if(u&&i.length>1)throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.");};t.getURL=function(n,t){var i=t.channels,r=void 0===i?[]:i,u=t.includeMessageActions,e=void 0!==u&&u,o=n.config,s=e?"history-with-actions":"history",h=r.length>0?r.join(","):",";return"/v3/".concat(s,"/sub-key/").concat(o.subscribeKey,"/channel/").concat(f.default.encodeString(h))};t.getRequestTimeout=function(n){return n.config.getTransactionTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var r=t.start,u=t.end,f=t.count,e=t.stringifiedTimeToken,c=void 0!==e&&e,o=t.includeMeta,l=void 0!==o&&o,a=t.includeUuid,s=t.includeUUID,v=void 0===s||s,h=t.includeMessageType,y=void 0===h||h,i={};return f&&(i.max=f),r&&(i.start=r),u&&(i.end=u),c&&(i.string_message_token="true"),l&&(i.include_meta="true"),v&&!1!==a&&(i.include_uuid="true"),y&&(i.include_message_type="true"),i};t.handleResponse=function(n,t){var i={channels:{}};return Object.keys(t.channels||{}).forEach(function(r){i.channels[r]=[];(t.channels[r]||[]).forEach(function(t){var u={};u.channel=r;u.timetoken=t.timetoken;u.message=function(n,t){var i=n.config,r=n.crypto;if(!i.cipherKey)return t;try{return r.decrypt(t)}catch(n){return t}}(n,t.message);u.messageType=t.message_type;u.uuid=t.uuid;t.actions&&(u.actions=t.actions,u.data=t.actions);t.meta&&(u.meta=t.meta);i.channels[r].push(u)})}),i};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var r=i(0),u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return u.default.PNSubscribeOperation};t.validateParams=function(n){if(!n.config.subscribeKey)return"Missing Subscribe Key"};t.getURL=function(n,t){var u=n.config,i=t.channels,r=void 0===i?[]:i,e=r.length>0?r.join(","):",";return"/v2/subscribe/".concat(u.subscribeKey,"/").concat(f.default.encodeString(e),"/0")};t.getRequestTimeout=function(n){return n.config.getSubscribeTimeout()};t.isAuthSupported=function(){return!0};t.prepareParams=function(n,t){var h=n.config,u=t.state,f=t.channelGroups,e=void 0===f?[]:f,o=t.timetoken,r=t.filterExpression,s=t.region,i={heartbeat:h.getPresenceTimeout()};return e.length>0&&(i["channel-group"]=e.join(",")),r&&r.length>0&&(i["filter-expr"]=r),Object.keys(u).length&&(i.state=JSON.stringify(u)),o&&(i.tt=o),s&&(i.tr=s),i};t.handleResponse=function(n,t){var i=[],r;return t.m.forEach(function(n){var t={publishTimetoken:n.p.t,region:n.p.r},r={shard:parseInt(n.a,10),subscriptionMatch:n.b,channel:n.c,messageType:n.e,payload:n.d,flags:n.f,issuingClientId:n.i,subscribeKey:n.k,originationTimetoken:n.o,userMetadata:n.u,publishMetaData:t};i.push(r)}),r={timetoken:t.t.t,region:t.t.r},{messages:i,metadata:r}};i(2);u=r(i(1));f=r(i(3))},function(n,t,i){"use strict";var f=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var e=f(i(5)),o=f(i(6)),u=f(i(4)),r=(f(i(8)),f(i(10))),s=(i(2),function(){function n(t){var i=this;e.default(this,n);u.default(this,"_modules",void 0);u.default(this,"_config",void 0);u.default(this,"_maxSubDomain",void 0);u.default(this,"_currentSubDomain",void 0);u.default(this,"_standardOrigin",void 0);u.default(this,"_subscribeOrigin",void 0);u.default(this,"_providedFQDN",void 0);u.default(this,"_requestTimeout",void 0);u.default(this,"_coreParams",void 0);this._modules={};Object.keys(t).forEach(function(n){i._modules[n]=t[n].bind(i)})}return o.default(n,[{key:"init",value:function(n){this._config=n;this._maxSubDomain=20;this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain);this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin;this._coreParams={};this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return this._providedFQDN.match(/ps\.pndsn\.com$/i)?(this._currentSubDomain+=1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),n=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.pndsn.com","ps".concat(n,".pndsn.com"))):this._providedFQDN;var n}},{key:"hasModule",value:function(n){return n in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POSTFILE",value:function(n,t,i){return this._modules.postfile(n,t,i)}},{key:"GETFILE",value:function(n,t,i){return this._modules.getfile(n,t,i)}},{key:"POST",value:function(n,t,i,r){return this._modules.post(n,t,i,r)}},{key:"PATCH",value:function(n,t,i,r){return this._modules.patch(n,t,i,r)}},{key:"GET",value:function(n,t,i){return this._modules.get(n,t,i)}},{key:"DELETE",value:function(n,t,i){return this._modules.del(n,t,i)}},{key:"_detectErrorCategory",value:function(n){if("ENOTFOUND"===n.code||"ECONNREFUSED"===n.code||"ECONNRESET"===n.code||"EAI_AGAIN"===n.code||0===n.status||n.hasOwnProperty("status")&&void 0===n.status)return r.default.PNNetworkIssuesCategory;if(n.timeout)return r.default.PNTimeoutCategory;if("ETIMEDOUT"===n.code)return r.default.PNNetworkIssuesCategory;if(n.response){if(n.response.badRequest)return r.default.PNBadRequestCategory;if(n.response.forbidden)return r.default.PNAccessDeniedCategory}return r.default.PNUnknownCategory}}]),n}());t.default=s;n.exports=t.default},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var i={get:function(n){try{return localStorage.getItem(n)}catch(n){return null}},set:function(n,t){try{return localStorage.setItem(n,t)}catch(n){return null}}};t.default=i;n.exports=t.default},function(n,t,i){"use strict";var r=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f=r(i(7)),e=r(i(5)),o=r(i(6)),u=r(i(4)),s=function(){function n(t,i){e.default(this,n);u.default(this,"_base64ToBinary",void 0);u.default(this,"_cborReader",void 0);this._base64ToBinary=i;this._decode=t}return o.default(n,[{key:"decodeToken",value:function(n){var t="",r,i;return n.length%4==3?t="=":n.length%4==2&&(t="=="),r=n.replace(/-/gi,"+").replace(/_/gi,"/")+t,i=this._decode(this._base64ToBinary(r)),"object"===f.default(i)?i:void 0}}]),n}();t.default=s;n.exports=t.default},function(n,t,i){"use strict";function h(n){var i=(new Date).getTime(),r=(new Date).toISOString(),t=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;t.log("<<<<<");t.log("[".concat(r,"]"),"\n",n.url,"\n",n.qs);t.log("-----");n.on("response",function(r){var u=(new Date).getTime()-i,f=(new Date).toISOString();t.log(">>>>>>");t.log("[".concat(f," / ").concat(u,"]"),"\n",n.url,"\n",n.qs,"\n",r.text);t.log("-----")})}function u(n,t,i){var u=this,r;return this._config.logVerbosity&&(n=n.use(h)),this._config.proxy&&this._modules.proxy&&(n=this._modules.proxy.call(this,n)),this._config.keepAlive&&this._modules.keepAlive&&(n=this._modules.keepAlive(n)),r=n,!0===t.forceBuffered?r="undefined"==typeof Blob?r.buffer().responseType("arraybuffer"):r.responseType("arraybuffer"):!1===t.forceBuffered&&(r=r.buffer(!1)),r.timeout(t.timeout).end(function(n,r){var e,f={};if(f.error=null!==n,f.operation=t.operation,r&&r.status&&(f.statusCode=r.status),n){if(n.response&&n.response.text&&!u._config.logVerbosity)try{f.errorData=JSON.parse(n.response.text)}catch(t){f.errorData=n}else f.errorData=n;return f.category=u._detectErrorCategory(n),i(f,null)}if(t.ignoreBody)e={headers:r.headers,redirects:r.redirects,response:r};else try{e=JSON.parse(r.text)}catch(n){return f.errorData=r,f.error=!0,i(f,null)}return e.error&&1===e.error&&e.status&&e.message&&e.service?(f.errorData=e,f.statusCode=e.status,f.error=!0,f.category=u._detectErrorCategory(f),i(f,null)):(e.error&&e.error.message&&(f.errorData=e.error),i(f,e))})}function o(){return(o=s.default(e.default.mark(function n(t,i,u){var f,o;return e.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=r.default.post(t),i.forEach(function(n){var t=n.key,i=n.value;f=f.field(t,i)}),f.attach("file",u,{contentType:"application/octet-stream"}),n.next=5,f;case 5:return o=n.sent,n.abrupt("return",o);case 7:case"end":return n.stop()}},n)}))).apply(this,arguments)}var f=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.postfile=function(){return o.apply(this,arguments)};t.getfile=function(n,t,i){var f=r.default.get(this.getStandardOrigin()+t.url).set(t.headers).query(n);return u.call(this,f,t,i)};t.get=function(n,t,i){var f=r.default.get(this.getStandardOrigin()+t.url).set(t.headers).query(n);return u.call(this,f,t,i)};t.post=function(n,t,i,f){var e=r.default.post(this.getStandardOrigin()+i.url).query(n).set(i.headers).send(t);return u.call(this,e,i,f)};t.patch=function(n,t,i,f){var e=r.default.patch(this.getStandardOrigin()+i.url).query(n).set(i.headers).send(t);return u.call(this,e,i,f)};t.del=function(n,t,i){var f=r.default.delete(this.getStandardOrigin()+t.url).set(t.headers).query(n);return u.call(this,f,t,i)};var e=f(i(11)),s=f(i(12)),r=f(i(125));i(2)},function(n,t,i){function k(){}function s(n){var t,i;if(!c(n))return n;t=[];for(i in n)h(t,i,n[i]);return t.join("&")}function h(n,t,i){if(null!=i)if(Array.isArray(i))i.forEach(function(i){h(n,t,i)});else if(c(i))for(var r in i)h(n,t+"["+r+"]",i[r]);else n.push(encodeURIComponent(t)+"="+encodeURIComponent(i));else null===i&&n.push(encodeURIComponent(t))}function a(n){for(var t,i,r={},f=n.split("&"),u=0,e=f.length;u<e;++u)-1==(i=(t=f[u]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,i))]=decodeURIComponent(t.slice(i+1));return r}function v(n){return/[\/+]json($|[^-\w])/.test(n)}function e(n){this.req=n;this.xhr=this.req.xhr;this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204);this._setStatusProperties(t);this.header=this.headers=function(n){for(var t,i,u,f,e=n.split(/\r?\n/),o={},r=0,s=e.length;r<s;++r)-1!==(t=(i=e[r]).indexOf(":"))&&(u=i.slice(0,t).toLowerCase(),f=l(i.slice(t+1)),o[u]=f);return o}(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this._setHeaderProperties(this.header);this.body=null===this.text&&n._responseType?this.xhr.response:"HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function u(n,t){var i=this;this._query=this._query||[];this.method=n;this.url=t;this.header={};this._header={};this.on("end",function(){var t,n=null,r=null;try{r=new e(i)}catch(t){return(n=new Error("Parser is unable to parse the response")).parse=!0,n.original=t,i.xhr?(n.rawResponse=void 0===i.xhr.responseType?i.xhr.responseText:i.xhr.response,n.status=i.xhr.status?i.xhr.status:null,n.statusCode=n.status):(n.rawResponse=null,n.status=null),i.callback(n)}i.emit("response",r);try{i._isResponseOK(r)||(t=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(n){t=n}t?(t.original=n,t.response=r,t.status=r.status,i.callback(t,r)):i.callback(null,r)})}function y(n,t,i){var u=r("DELETE",n);return"function"==typeof t&&(i=t,t=null),t&&u.send(t),i&&u.end(i),u}var f,r,l;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var p=i(126),w=i(127),c=i(26),b=i(128),o=i(130);r=t=n.exports=function(n,i){return"function"==typeof i?new t.Request("GET",n).end(i):1==arguments.length?new t.Request("GET",n):new t.Request(n,i)};t.Request=u;r.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw Error("Browser-only version of superagent could not find XHR");};l="".trim?function(n){return n.trim()}:function(n){return n.replace(/(^\s*|\s*$)/g,"")};r.serializeObject=s;r.parseString=a;r.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};r.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify};r.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse};b(e.prototype);e.prototype._parseBody=function(n){var t=r.parse[this.type];return this.req._parser?this.req._parser(this,n):(!t&&v(this.type)&&(t=r.parse["application/json"]),t&&n&&(n.length||n instanceof Object)?t(n):null)};e.prototype.toError=function(){var t=this.req,i=t.method,r=t.url,u="cannot "+i+" "+r+" ("+this.status+")",n=new Error(u);return n.status=this.status,n.method=i,n.url=r,n};r.Response=e;p(u.prototype);w(u.prototype);u.prototype.type=function(n){return this.set("Content-Type",r.types[n]||n),this};u.prototype.accept=function(n){return this.set("Accept",r.types[n]||n),this};u.prototype.auth=function(n,t,i){1===arguments.length&&(t="");"object"==typeof t&&null!==t&&(i=t,t="");i||(i={type:"function"==typeof btoa?"basic":"auto"});var r=function(n){if("function"==typeof btoa)return btoa(n);throw new Error("Cannot use basic auth, btoa is not a function");};return this._auth(n,t,i,r)};u.prototype.query=function(n){return"string"!=typeof n&&(n=s(n)),n&&this._query.push(n),this};u.prototype.attach=function(n,t,i){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(n,t,i||t.name)}return this};u.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData};u.prototype.callback=function(n,t){if(this._shouldRetry(n,t))return this._retry();var i=this._callback;this.clearTimeout();n&&(this._maxRetries&&(n.retries=this._retries-1),this.emit("error",n));i(n,t)};u.prototype.crossDomainError=function(){var n=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");n.crossDomain=!0;n.status=this.status;n.method=this.method;n.url=this.url;this.callback(n)};u.prototype.buffer=u.prototype.ca=u.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this};u.prototype.pipe=u.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent");};u.prototype._isHost=function(n){return n&&"object"==typeof n&&!Array.isArray(n)&&"[object Object]"!==Object.prototype.toString.call(n)};u.prototype.end=function(n){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=n||k,this._finalizeQueryString(),this._end()};u.prototype._end=function(){var t=this,n=this.xhr=r.getXHR(),i=this._formData||this._data,o,e,u,f;if(this._setTimeouts(),n.onreadystatechange=function(){var r=n.readyState,i;if(r>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==r){try{i=n.status}catch(t){i=0}if(!i)return t.timedout||t._aborted?void 0:t.crossDomainError();t.emit("end")}},o=function(n,i){i.total>0&&(i.percent=i.loaded/i.total*100);i.direction=n;t.emit("progress",i)},this.hasListeners("progress"))try{n.onprogress=o.bind(null,"download");n.upload&&(n.upload.onprogress=o.bind(null,"upload"))}catch(t){}try{this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0)}catch(t){return this.callback(t)}(this._withCredentials&&(n.withCredentials=!0),this._formData||"GET"==this.method||"HEAD"==this.method||"string"==typeof i||this._isHost(i))||(e=this._header["content-type"],u=this._serializer||r.serialize[e?e.split(";")[0]:""],!u&&v(e)&&(u=r.serialize["application/json"]),u&&(i=u(i)));for(f in this.header)null!=this.header[f]&&this.header.hasOwnProperty(f)&&n.setRequestHeader(f,this.header[f]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send(void 0!==i?i:null),this};r.agent=function(){return new o};["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(n){o.prototype[n.toLowerCase()]=function(t,i){var u=new r.Request(n,t);return this._setDefaults(u),i&&u.end(i),u}});o.prototype.del=o.prototype.delete;r.get=function(n,t,i){var u=r("GET",n);return"function"==typeof t&&(i=t,t=null),t&&u.query(t),i&&u.end(i),u};r.head=function(n,t,i){var u=r("HEAD",n);return"function"==typeof t&&(i=t,t=null),t&&u.query(t),i&&u.end(i),u};r.options=function(n,t,i){var u=r("OPTIONS",n);return"function"==typeof t&&(i=t,t=null),t&&u.send(t),i&&u.end(i),u};r.del=y;r.delete=y;r.patch=function(n,t,i){var u=r("PATCH",n);return"function"==typeof t&&(i=t,t=null),t&&u.send(t),i&&u.end(i),u};r.post=function(n,t,i){var u=r("POST",n);return"function"==typeof t&&(i=t,t=null),t&&u.send(t),i&&u.end(i),u};r.put=function(n,t,i){var u=r("PUT",n);return"function"==typeof t&&(i=t,t=null),t&&u.send(t),i&&u.end(i),u}},function(n){function t(n){if(n)return function(n){for(var i in t.prototype)n[i]=t.prototype[i];return n}(n)}n.exports=t;t.prototype.on=t.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};t.prototype.once=function(n,t){function i(){this.off(n,i);t.apply(this,arguments)}return i.fn=t,this.on(n,i),this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,t){var u,i,r;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(i=this._callbacks["$"+n],!i)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(r=0;r<i.length;r++)if((u=i[r])===t||u.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+n],this};t.prototype.emit=function(n){var u;this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),i=this._callbacks["$"+n],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(i)for(t=0,u=(i=i.slice(0)).length;t<u;++t)i[t].apply(this,r);return this};t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};t.prototype.hasListeners=function(n){return!!this.listeners(n).length}},function(n,t,i){"use strict";function r(n){if(n)return function(n){for(var t in r.prototype)n[t]=r.prototype[t];return n}(n)}var u=i(26),f;n.exports=r;r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this};r.prototype.parse=function(n){return this._parser=n,this};r.prototype.responseType=function(n){return this._responseType=n,this};r.prototype.serialize=function(n){return this._serializer=n,this};r.prototype.timeout=function(n){if(!n||"object"!=typeof n)return this._timeout=n,this._responseTimeout=0,this;for(var t in n)switch(t){case"deadline":this._timeout=n.deadline;break;case"response":this._responseTimeout=n.response;break;default:console.warn("Unknown timeout option",t)}return this};r.prototype.retry=function(n,t){return 0!==arguments.length&&!0!==n||(n=1),n<=0&&(n=0),this._maxRetries=n,this._retries=0,this._retryCallback=t,this};f=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(n,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var i=this._retryCallback(n,t);if(!0===i)return!0;if(!1===i)return!1}catch(n){console.error(n)}return t&&t.status&&t.status>=500&&501!=t.status?!0:n&&(n.code&&~f.indexOf(n.code)||n.timeout&&"ECONNABORTED"==n.code||n.crossDomain)?!0:!1};r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()};r.prototype.then=function(n,t){if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises");this._fullfilledPromise=new Promise(function(n,t){i.end(function(i,r){i?t(i):n(r)})})}return this._fullfilledPromise.then(n,t)};r.prototype.catch=function(n){return this.then(void 0,n)};r.prototype.use=function(n){return n(this),this};r.prototype.ok=function(n){if("function"!=typeof n)throw Error("Callback required");return this._okCallback=n,this};r.prototype._isResponseOK=function(n){return!!n&&(this._okCallback?this._okCallback(n):n.status>=200&&n.status<300)};r.prototype.get=function(n){return this._header[n.toLowerCase()]};r.prototype.getHeader=r.prototype.get;r.prototype.set=function(n,t){if(u(n)){for(var i in n)this.set(i,n[i]);return this}return this._header[n.toLowerCase()]=t,this.header[n]=t,this};r.prototype.unset=function(n){return delete this._header[n.toLowerCase()],delete this.header[n],this};r.prototype.field=function(n,t){var i,r;if(null==n)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),u(n)){for(i in n)this.field(i,n[i]);return this}if(Array.isArray(t)){for(r in t)this.field(n,t[r]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(n,t),this};r.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this};r.prototype._auth=function(n,t,i,r){switch(i.type){case"basic":this.set("Authorization","Basic "+r(n+":"+t));break;case"auto":this.username=n;this.password=t;break;case"bearer":this.set("Authorization","Bearer "+n)}return this};r.prototype.withCredentials=function(n){return null==n&&(n=!0),this._withCredentials=n,this};r.prototype.redirects=function(n){return this._maxRedirects=n,this};r.prototype.maxResponseSize=function(n){if("number"!=typeof n)throw TypeError("Invalid argument");return this._maxResponseSize=n,this};r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};r.prototype.send=function(n){var i=u(n),t=this._header["content-type"],r;if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),i&&!this._data)Array.isArray(n)?this._data=[]:this._isHost(n)||(this._data={});else if(n&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(i&&u(this._data))for(r in n)this._data[r]=n[r];else"string"==typeof n?(t||this.type("form"),t=this._header["content-type"],this._data="application/x-www-form-urlencoded"==t?this._data?this._data+"&"+n:n:(this._data||"")+n):this._data=n;return!i||this._isHost(n)||t||this.type("json"),this};r.prototype.sortQuery=function(n){return this._sort=void 0===n||n,this};r.prototype._finalizeQueryString=function(){var i=this._query.join("&"),n,t;(i&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+i),this._query.length=0,this._sort)&&(n=this.url.indexOf("?"),n>=0&&(t=this.url.substring(n+1).split("&"),"function"==typeof this._sort?t.sort(this._sort):t.sort(),this.url=this.url.substring(0,n)+"?"+t.join("&")))};r.prototype._appendQueryString=function(){console.trace("Unsupported")};r.prototype._timeoutError=function(n,t,i){if(!this._aborted){var r=new Error(n+t+"ms exceeded");r.timeout=t;r.code="ECONNABORTED";r.errno=i;this.timedout=!0;this.abort();this.callback(r)}};r.prototype._setTimeouts=function(){var n=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){n._timeoutError("Timeout of ",n._timeout,"ETIME")},this._timeout));this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){n._timeoutError("Response timeout of ",n._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(n,t,i){"use strict";function r(n){if(n)return function(n){for(var t in r.prototype)n[t]=r.prototype[t];return n}(n)}var u=i(129);n.exports=r;r.prototype.get=function(n){return this.header[n.toLowerCase()]};r.prototype._setHeaderProperties=function(n){var r=n["content-type"]||"",t,i;this.type=u.type(r);t=u.params(r);for(i in t)this[i]=t[i];this.links={};try{n.link&&(this.links=u.parseLinks(n.link))}catch(n){}};r.prototype._setStatusProperties=function(n){var t=n/100|0;this.status=this.statusCode=n;this.statusType=t;this.info=1==t;this.ok=2==t;this.redirect=3==t;this.clientError=4==t;this.serverError=5==t;this.error=(4==t||5==t)&&this.toError();this.created=201==n;this.accepted=202==n;this.noContent=204==n;this.badRequest=400==n;this.unauthorized=401==n;this.notAcceptable=406==n;this.forbidden=403==n;this.notFound=404==n;this.unprocessableEntity=422==n}},function(n,t){"use strict";t.type=function(n){return n.split(/ *; */).shift()};t.params=function(n){return n.split(/ *; */).reduce(function(n,t){var i=t.split(/ *= */),r=i.shift(),u=i.shift();return r&&u&&(n[r]=u),n},{})};t.parseLinks=function(n){return n.split(/ *, */).reduce(function(n,t){var i=t.split(/ *; */),r=i[0].slice(1,-1);return n[i[1].split(/ *= */)[1].slice(1,-1)]=r,n},{})};t.cleanHeader=function(n,t){return delete n["content-type"],delete n["content-length"],delete n["transfer-encoding"],delete n.host,t&&(delete n.authorization,delete n.cookie),n}},function(n){function t(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(n){t.prototype[n]=function(){return this._defaults.push({fn:n,arguments:arguments}),this}});t.prototype._setDefaults=function(n){this._defaults.forEach(function(t){n[t.fn].apply(n,t.arguments)})};n.exports=t},function(n,t,i){"use strict";(function(r){function h(n,t){var i=new Uint8Array(n.byteLength+t.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(t),n.byteLength),i.buffer}var o=i(0),s;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var u=o(i(11)),f=o(i(12)),c=o(i(5)),l=o(i(6)),a=o(i(4)),e=o(i(133));s=function(){function n(){c.default(this,n)}var t,i,o,s,a,v,y,p,w;return l.default(n,[{key:"encrypt",value:(w=f.default(u.default.mark(function n(t,i){var r;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getKey(t);case 2:if(r=n.sent,!(i instanceof ArrayBuffer)){n.next=7;break}return n.abrupt("return",this.encryptArrayBuffer(r,i));case 7:if("string"!=typeof i){n.next=11;break}return n.abrupt("return",this.encryptString(r,i));case 11:throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer");case 12:case"end":return n.stop()}},n,this)})),function(){return w.apply(this,arguments)})},{key:"decrypt",value:(p=f.default(u.default.mark(function n(t,i){var r;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getKey(t);case 2:if(r=n.sent,!(i instanceof ArrayBuffer)){n.next=7;break}return n.abrupt("return",this.decryptArrayBuffer(r,i));case 7:if("string"!=typeof i){n.next=11;break}return n.abrupt("return",this.decryptString(r,i));case 11:throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer");case 12:case"end":return n.stop()}},n,this)})),function(){return p.apply(this,arguments)})},{key:"encryptFile",value:(y=f.default(u.default.mark(function n(t,i,r){var f,e,o;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getKey(t);case 2:return f=n.sent,n.next=5,i.toArrayBuffer();case 5:return e=n.sent,n.next=8,this.encryptArrayBuffer(f,e);case 8:return o=n.sent,n.abrupt("return",r.create({name:i.name,mimeType:"application/octet-stream",data:o}));case 10:case"end":return n.stop()}},n,this)})),function(){return y.apply(this,arguments)})},{key:"decryptFile",value:(v=f.default(u.default.mark(function n(t,i,r){var f,e,o;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getKey(t);case 2:return f=n.sent,n.next=5,i.toArrayBuffer();case 5:return e=n.sent,n.next=8,this.decryptArrayBuffer(f,e);case 8:if(o=n.sent,!(i.data instanceof ArrayBuffer)){n.next=13;break}return n.abrupt("return",r.create({name:i.name,data:o}));case 13:throw new Error("Cannot decrypt this file. In browser environment file decryption supports only ArrayBuffer.");case 14:case"end":return n.stop()}},n,this)})),function(){return v.apply(this,arguments)})},{key:"getKey",value:(a=f.default(u.default.mark(function n(t){var i,f,o;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.from(t),n.next=3,e.default.subtle.digest("SHA-256",i.buffer);case 3:return f=n.sent,o=r.from(r.from(f).toString("hex").slice(0,32),"utf8").buffer,n.abrupt("return",e.default.subtle.importKey("raw",o,"AES-CBC",!0,["encrypt","decrypt"]));case 6:case"end":return n.stop()}},n)})),function(){return a.apply(this,arguments)})},{key:"encryptArrayBuffer",value:(s=f.default(u.default.mark(function n(t,i){var r;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.default.getRandomValues(new Uint8Array(16)),n.t0=h,n.t1=r.buffer,n.next=5,e.default.subtle.encrypt({name:"AES-CBC",iv:r},t,i);case 5:return n.t2=n.sent,n.abrupt("return",n.t0(n.t1,n.t2));case 7:case"end":return n.stop()}},n)})),function(){return s.apply(this,arguments)})},{key:"decryptArrayBuffer",value:(o=f.default(u.default.mark(function n(t,i){var r;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=i.slice(0,16),n.abrupt("return",e.default.subtle.decrypt({name:"AES-CBC",iv:r},t,i.slice(16)));case 2:case"end":return n.stop()}},n)})),function(){return o.apply(this,arguments)})},{key:"encryptString",value:(i=f.default(u.default.mark(function n(t,i){var f,o,s,c;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=e.default.getRandomValues(new Uint8Array(16)),o=r.from(i).buffer,n.next=4,e.default.subtle.encrypt({name:"AES-CBC",iv:f},t,o);case 4:return s=n.sent,c=h(f.buffer,s),n.abrupt("return",r.from(c).toString("utf8"));case 7:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)})},{key:"decryptString",value:(t=f.default(u.default.mark(function n(t,i){var f,o,s,h;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=r.from(i),o=f.slice(0,16),s=f.slice(16),n.next=5,e.default.subtle.decrypt({name:"AES-CBC",iv:o},t,s);case 5:return h=n.sent,n.abrupt("return",r.from(h).toString("utf8"));case 7:case"end":return n.stop()}},n)})),function(){return t.apply(this,arguments)})},{key:"algo",get:function(){return"aes-256-cbc"}}]),n}();t.default=s;a.default(s,"IV_LENGTH",16);n.exports=t.default}).call(this,i(21).Buffer)},function(n,t,i){"use strict";var o=i(0);Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var f,s,r=o(i(11)),e=o(i(12)),c=o(i(5)),h=o(i(6)),u=o(i(4)),l=(i(25),s=f=function(){function n(t){if(c.default(this,n),u.default(this,"data",void 0),u.default(this,"name",void 0),u.default(this,"mimeType",void 0),t instanceof File)this.data=t,this.name=this.data.name,this.mimeType=this.data.type;else if(t.data){var i=t.data;this.data=new File([i],t.name,{type:t.mimeType});this.name=t.name;t.mimeType&&(this.mimeType=t.mimeType)}if(void 0===this.data)throw new Error("Couldn't construct a file out of supplied options.");if(void 0===this.name)throw new Error("Couldn't guess filename out of the options. Please provide one.");}var t,i,f,o,s,l,a;return h.default(n,null,[{key:"create",value:function(n){return new this(n)}}]),h.default(n,[{key:"toBuffer",value:(a=e.default(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return n.stop()}},n)})),function(){return a.apply(this,arguments)})},{key:"toStream",value:(l=e.default(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return n.stop()}},n)})),function(){return l.apply(this,arguments)})},{key:"toFileUri",value:(s=e.default(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:throw new Error("This feature is only supported in react native environments.");case 1:case"end":return n.stop()}},n)})),function(){return s.apply(this,arguments)})},{key:"toBlob",value:(o=e.default(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.data);case 1:case"end":return n.stop()}},n,this)})),function(){return o.apply(this,arguments)})},{key:"toArrayBuffer",value:(f=e.default(r.default.mark(function n(){var t=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,i){var r=new FileReader;r.addEventListener("load",function(){if(r.result instanceof ArrayBuffer)return n(r.result)});r.addEventListener("error",function(){i(r.error)});r.readAsArrayBuffer(t.data)}));case 1:case"end":return n.stop()}},n)})),function(){return f.apply(this,arguments)})},{key:"toString",value:(i=e.default(r.default.mark(function n(){var t=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,i){var r=new FileReader;r.addEventListener("load",function(){if("string"==typeof r.result)return n(r.result)});r.addEventListener("error",function(){i(r.error)});r.readAsBinaryString(t.data)}));case 1:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)})},{key:"toFile",value:(t=e.default(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.data);case 1:case"end":return n.stop()}},n,this)})),function(){return t.apply(this,arguments)})}]),n}(),u.default(f,"supportsFile","undefined"!=typeof File),u.default(f,"supportsBlob","undefined"!=typeof Blob),u.default(f,"supportsArrayBuffer","undefined"!=typeof ArrayBuffer),u.default(f,"supportsBuffer",!1),u.default(f,"supportsStream",!1),u.default(f,"supportsString",!0),u.default(f,"supportsEncryptFile",!0),u.default(f,"supportsFileUri",!1),s);t.default=l;n.exports=t.default},function(n,t,i){"use strict";i.r(t),function(n,t){"function"==typeof define&&define.amd?define([],function(){return t(n)}):"object"==typeof module&&module.exports?module.exports=t(n):t(n)}("undefined"!=typeof self?self:void 0,function(n){function k(n){return btoa(n).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(n){return n=(n+="===").slice(0,-n.length%4),atob(n.replace(/-/g,"+").replace(/_/g,"/"))}function e(n){for(var i=new Uint8Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}function h(n){return n instanceof ArrayBuffer&&(n=new Uint8Array(n)),String.fromCharCode.apply(String,n)}function f(n){var t={name:(n.name||n||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":n.length&&(t.length=n.length);break;case"HMAC":n.hash&&(t.hash=f(n.hash));n.length&&(t.length=n.length);break;case"RSAES-PKCS1-v1_5":n.publicExponent&&(t.publicExponent=new Uint8Array(n.publicExponent));n.modulusLength&&(t.modulusLength=n.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":n.hash&&(t.hash=f(n.hash));n.publicExponent&&(t.publicExponent=new Uint8Array(n.publicExponent));n.modulusLength&&(t.modulusLength=n.modulusLength);break;default:throw new SyntaxError("Bad algorithm name");}return t}function c(n){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[n.name][(n.hash||{}).name||n.length||""]}function o(n){(n instanceof ArrayBuffer||n instanceof Uint8Array)&&(n=JSON.parse(decodeURIComponent(escape(h(n)))));var t={kty:n.kty,alg:n.alg,ext:n.ext||n.extractable};switch(t.kty){case"oct":t.k=n.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(i){i in n&&(t[i]=n[i])});break;default:throw new TypeError("Unsupported key type");}return t}function it(n){var t=o(n);return i&&(t.extractable=t.ext,delete t.ext),e(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function rt(n){var r=p(n),f=!1,u,e,i,t;r.length>2&&(f=!0,r.shift());u={ext:!0};switch(r[0][0]){case"1.2.840.113549.1.1.1":for(e=["n","e","d","p","q","dp","dq","qi"],i=p(r[1]),f&&i.shift(),t=0;t<i.length;t++)i[t][0]||(i[t]=i[t].subarray(1)),u[e[t]]=k(h(i[t]));u.kty="RSA";break;default:throw new TypeError("Unsupported key type");}return u}function ut(n){var o,i=[["",null]],s=!1,u;switch(n.kty){case"RSA":for(var f=["n","e","d","p","q","dp","dq","qi"],r=[],t=0;t<f.length&&f[t]in n;t++)u=r[t]=e(d(n[f[t]])),128&u[0]&&(r[t]=new Uint8Array(u.length+1),r[t].set(u,1));r.length>2&&(s=!0,r.unshift(new Uint8Array([0])));i[0][0]="1.2.840.113549.1.1.1";o=r;break;default:throw new TypeError("Unsupported key type");}return i.push(new Uint8Array(w(o)).buffer),s?i.unshift(new Uint8Array([0])):i[1]={tag:3,value:i[1]},new Uint8Array(w(i)).buffer}function p(n,t){var r,e,i,u,f,o;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),t||(t={pos:0,end:n.length}),t.end-t.pos<2||t.end>n.length)throw new RangeError("Malformed DER");if(e=n[t.pos++],i=n[t.pos++],i>=128){if(i&=127,t.end-t.pos<i)throw new RangeError("Malformed DER");for(u=0;i--;)u<<=8,u|=n[t.pos++];i=u}if(t.end-t.pos<i)throw new RangeError("Malformed DER");switch(e){case 2:r=n.subarray(t.pos,t.pos+=i);break;case 3:if(n[t.pos++])throw new Error("Unsupported bit string");i--;case 4:r=new Uint8Array(n.subarray(t.pos,t.pos+=i)).buffer;break;case 5:r=null;break;case 6:if(f=btoa(h(n.subarray(t.pos,t.pos+=i))),!(f in v))throw new Error("Unsupported OBJECT ID "+f);r=v[f];break;case 48:for(r=[],o=t.pos+i;t.pos<o;)r.push(p(n,t));break;default:throw new Error("Unsupported DER tag 0x"+e.toString(16));}return r}function w(n,t){var r,s,f;t||(t=[]);var u=0,i=0,o=t.length+2;if(t.push(0,0),n instanceof Uint8Array)for(u=2,i=n.length,r=0;r<i;r++)t.push(n[r]);else if(n instanceof ArrayBuffer)for(u=4,i=n.byteLength,n=new Uint8Array(n),r=0;r<i;r++)t.push(n[r]);else if(null===n)u=5,i=0;else if("string"==typeof n&&n in y)for(s=e(atob(y[n])),u=6,i=s.length,r=0;r<i;r++)t.push(s[r]);else if(n instanceof Array){for(r=0;r<n.length;r++)w(n[r],t);u=48;i=t.length-o}else{if(!("object"==typeof n&&3===n.tag&&n.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+n);for(u=3,i=(n=new Uint8Array(n.value)).byteLength,t.push(0),r=0;r<i;r++)t.push(n[r]);i++}if(i>=128){for(f=i,i=4,t.splice(o,0,f>>24&255,f>>16&255,f>>8&255,255&f);i>1&&!(f>>24);)f<<=8,i--;i<4&&t.splice(o,4-i);i|=128}return t.splice(o-2,2,u,i),t}function s(n,t,i,r){Object.defineProperties(this,{_key:{value:n},type:{value:n.type,enumerable:!0},extractable:{value:void 0===i?n.extractable:i,enumerable:!0},algorithm:{value:void 0===t?n.algorithm:t,enumerable:!0},usages:{value:void 0===r?n.usages:r,enumerable:!0}})}function l(n){return"verify"===n||"encrypt"===n||"wrapKey"===n}function a(n){return"sign"===n||"decrypt"===n||"unwrapKey"===n}var r,t,v,y,b;if("function"!=typeof Promise)throw"Promise support required";if(r=n.crypto||n.msCrypto,r&&(t=r.subtle||r.webkitSubtle,t)){var g=n.Crypto||r.constructor||Object,nt=n.SubtleCrypto||t.constructor||Object,tt=(n.CryptoKey||n.Key,n.navigator.userAgent.indexOf("Edge/")>-1),i=!!n.msCrypto&&!tt,u=!r.subtle&&!!r.webkitSubtle;(i||u)&&(v={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},y={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"},(["generateKey","importKey","unwrapKey"].forEach(function(n){var h=t[n];t[n]=function(v,y,p){var w,g,k,nt,b=[].slice.call(arguments);switch(n){case"generateKey":w=f(v);g=y;k=p;break;case"importKey":w=f(p);g=b[3];k=b[4];"jwk"===v&&((y=o(y)).alg||(y.alg=c(w)),y.key_ops||(y.key_ops="oct"!==y.kty?"d"in y?k.filter(a):k.filter(l):k.slice()),b[1]=it(y));break;case"unwrapKey":w=b[4];g=b[5];k=b[6];b[2]=p._key}if("generateKey"===n&&"HMAC"===w.name&&w.hash)return w.length=w.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[w.hash.name],t.importKey("raw",r.getRandomValues(new Uint8Array(w.length+7>>3)),w,g,k);if(u&&"generateKey"===n&&"RSASSA-PKCS1-v1_5"===w.name&&(!w.modulusLength||w.modulusLength>=2048))return(v=f(v)).name="RSAES-PKCS1-v1_5",delete v.hash,t.generateKey(v,!0,["encrypt","decrypt"]).then(function(n){return Promise.all([t.exportKey("jwk",n.publicKey),t.exportKey("jwk",n.privateKey)])}).then(function(n){return n[0].alg=n[1].alg=c(w),n[0].key_ops=k.filter(l),n[1].key_ops=k.filter(a),Promise.all([t.importKey("jwk",n[0],w,!0,n[0].key_ops),t.importKey("jwk",n[1],w,g,n[1].key_ops)])}).then(function(n){return{publicKey:n[0],privateKey:n[1]}});if((u||i&&"SHA-1"===(w.hash||{}).name)&&"importKey"===n&&"jwk"===v&&"HMAC"===w.name&&"oct"===y.kty)return t.importKey("raw",e(d(y.k)),p,b[3],b[4]);if(u&&"importKey"===n&&("spki"===v||"pkcs8"===v))return t.importKey("jwk",rt(y),p,b[3],b[4]);if(i&&"unwrapKey"===n)return t.decrypt(b[3],p,y).then(function(n){return t.importKey(v,n,b[4],b[5],b[6])});try{nt=h.apply(t,b)}catch(n){return Promise.reject(n)}return i&&(nt=new Promise(function(n,t){nt.onabort=nt.onerror=function(n){t(n)};nt.oncomplete=function(t){n(t.target.result)}})),nt=nt.then(function(n){return"HMAC"===w.name&&(w.length||(w.length=8*n.algorithm.length)),0==w.name.search("RSA")&&(w.modulusLength||(w.modulusLength=(n.publicKey||n).algorithm.modulusLength),w.publicExponent||(w.publicExponent=(n.publicKey||n).algorithm.publicExponent)),n=n.publicKey&&n.privateKey?{publicKey:new s(n.publicKey,w,g,k.filter(l)),privateKey:new s(n.privateKey,w,g,k.filter(a))}:new s(n,w,g,k)})}}),["exportKey","wrapKey"].forEach(function(n){var r=t[n];t[n]=function(f,s,v){var y,p=[].slice.call(arguments);switch(n){case"exportKey":p[1]=s._key;break;case"wrapKey":p[1]=s._key;p[2]=v._key}if((u||i&&"SHA-1"===(s.algorithm.hash||{}).name)&&"exportKey"===n&&"jwk"===f&&"HMAC"===s.algorithm.name&&(p[0]="raw"),!u||"exportKey"!==n||"spki"!==f&&"pkcs8"!==f||(p[0]="jwk"),i&&"wrapKey"===n)return t.exportKey(f,s).then(function(n){return"jwk"===f&&(n=e(unescape(encodeURIComponent(JSON.stringify(o(n)))))),t.encrypt(p[3],v,n)});try{y=r.apply(t,p)}catch(n){return Promise.reject(n)}return i&&(y=new Promise(function(n,t){y.onabort=y.onerror=function(n){t(n)};y.oncomplete=function(t){n(t.target.result)}})),"exportKey"===n&&"jwk"===f&&(y=y.then(function(n){return(u||i&&"SHA-1"===(s.algorithm.hash||{}).name)&&"HMAC"===s.algorithm.name?{kty:"oct",alg:c(s.algorithm),key_ops:s.usages.slice(),ext:!0,k:k(h(n))}:((n=o(n)).alg||(n.alg=c(s.algorithm)),n.key_ops||(n.key_ops="public"===s.type?s.usages.filter(l):"private"===s.type?s.usages.filter(a):s.usages.slice()),n)})),!u||"exportKey"!==n||"spki"!==f&&"pkcs8"!==f||(y=y.then(function(n){return ut(o(n))})),y}}),["encrypt","decrypt","sign","verify"].forEach(function(n){var r=t[n];t[n]=function(u,e,o,s){var h,c,a,l;if(i&&(!o.byteLength||s&&!s.byteLength))throw new Error("Empy input is not allowed");c=[].slice.call(arguments);a=f(u);i&&"decrypt"===n&&"AES-GCM"===a.name&&(l=u.tagLength>>3,c[2]=(o.buffer||o).slice(0,o.byteLength-l),u.tag=(o.buffer||o).slice(o.byteLength-l));c[1]=e._key;try{h=r.apply(t,c)}catch(n){return Promise.reject(n)}return i&&(h=new Promise(function(t,i){h.onabort=h.onerror=function(n){i(n)};h.oncomplete=function(i){if(i=i.target.result,"encrypt"===n&&i instanceof AesGcmEncryptResult){var r=i.ciphertext,u=i.tag;(i=new Uint8Array(r.byteLength+u.byteLength)).set(new Uint8Array(r),0);i.set(new Uint8Array(u),r.byteLength);i=i.buffer}t(i)}})),h}}),i)&&(b=t.digest,t.digest=function(n,i){if(!i.byteLength)throw new Error("Empy input is not allowed");var r;try{r=b.call(t,n,i)}catch(n){return Promise.reject(n)}return r=new Promise(function(n,t){r.onabort=r.onerror=function(n){t(n)};r.oncomplete=function(t){n(t.target.result)}})},n.crypto=Object.create(r,{getRandomValues:{value:function(n){return r.getRandomValues(n)}},subtle:{value:t}}),n.CryptoKey=s),u&&(r.subtle=t,n.Crypto=g,n.SubtleCrypto=nt,n.CryptoKey=s))}});t.default=window.crypto}])});
/*!
 * bootstrap-fileinput v5.1.2
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2020, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD-3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=n(require("jquery")):n(window.jQuery)}(function(n){"use strict";var t,i,r;n.fn.fileinputLocales={};n.fn.fileinputThemes={};String.prototype.setTokens=function(n){var t,r,i=this.toString();for(t in n)n.hasOwnProperty(t)&&(r=new RegExp("{"+t+"}","g"),i=i.replace(r,n[t]));return i};Array.prototype.flatMap||(Array.prototype.flatMap=function(n){return[].concat(this.map(n))});t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",INIT_FLAG:"init-",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}<\/span>\n<\/div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],logMessages:{ajaxError:"{status}: {error}. Error Details: {text}.",badDroppedFiles:"Error scanning dropped files!",badExifParser:"Error loading the piexif.js library. {details}",badInputType:'The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.',exifWarning:'To avoid this warning, either set "autoOrientImage" to "false" OR ensure you have loaded the "piexif.js" library correctly on your page before the "fileinput.js" script.',invalidChunkSize:'Invalid upload chunk size: "{chunkSize}". Resumable uploads are disabled.',invalidThumb:'Invalid thumb frame with id: "{id}".',noResumableSupport:"The browser does not support resumable or chunk uploads.",noUploadUrl:'The "uploadUrl" is not set. Ajax uploads and resumable uploads have been disabled.',retryStatus:"Retrying upload for chunk # {chunk} for {filename}... retry # {retry}.",chunkQueueError:"Could not push task to ajax pool for chunk index # {index}.",resumableMaxRetriesReached:"Maximum resumable ajax retries ({n}) reached.",resumableRetryError:"Could not retry the resumable request (try # {n})... aborting.",resumableAborting:"Aborting / cancelling the resumable request."},objUrl:window.URL||window.webkitURL,now:function(){return(new Date).getTime()},round:function(n){return n=parseFloat(n),isNaN(n)?0:Math.floor(Math.round(n))},getArray:function(n){for(var i=[],r=n&&n.length||0,t=0;r>t;t++)i.push(n[t]);return i},getFileRelativePath:function(n){return String(n.newPath||n.relativePath||n.webkitRelativePath||t.getFileName(n)||null)},getFileId:function(n,i){var r=t.getFileRelativePath(n);return"function"==typeof i?i(n):n&&r?n.size+"_"+r.replace(/\s/gim,"_"):null},getFrameSelector:function(n,t){return t=t||"",'[id="'+n+'"]'+t},getZoomSelector:function(n,i){return t.getFrameSelector("zoom-"+n,i)},getFrameElement:function(n,i,r){return n.find(t.getFrameSelector(i,r))},getZoomElement:function(n,i,r){return n.find(t.getZoomSelector(i,r))},getElapsed:function(i){var e=i,r="",u={},f={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return t.getObjectKeys(f).forEach(function(n){u[n]=Math.floor(e/f[n]);e-=u[n]*f[n]}),n.each(u,function(n,t){t>0&&(r+=(r?" ":"")+t+n.substring(0,1))}),r},debounce:function(n,t){var i;return function(){var r=arguments,u=this;clearTimeout(i);i=setTimeout(function(){n.apply(u,r)},t)}},stopEvent:function(n){n.stopPropagation();n.preventDefault()},getFileName:function(n){return n?n.fileName||n.name||"":""},createObjectURL:function(n){return t.objUrl&&t.objUrl.createObjectURL&&n?t.objUrl.createObjectURL(n):""},revokeObjectURL:function(n){t.objUrl&&t.objUrl.revokeObjectURL&&n&&t.objUrl.revokeObjectURL(n)},compare:function(n,t,i){return void 0!==n&&(i?n===t:n.match(t))},isIE:function(n){var t,i;return"Microsoft Internet Explorer"!==navigator.appName?!1:10===n?new RegExp("msie\\s"+n,"i").test(navigator.userAgent):(t=document.createElement("div"),t.innerHTML="<!--[if IE "+n+"]> <i><\/i> <![endif]-->",i=t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),i)},canOrientImage:function(t){var i=n(document.createElement("img")).css({width:"1px",height:"1px"}).insertAfter(t),r=i.css("image-orientation");return i.remove(),!!r},canAssignFilesToInput:function(){var n=document.createElement("input");try{return n.type="file",n.files=null,!0}catch(t){return!1}},getDragDropFolders:function(n){var t,i,r=n?n.length:0,u=0;if(r>0&&n[0].webkitGetAsEntry())for(t=0;r>t;t++)i=n[t].webkitGetAsEntry(),i&&i.isDirectory&&u++;return u},initModal:function(t){var i=n("body");i.length&&t.appendTo(i)},isFunction:function(n){return"function"==typeof n},isEmpty:function(i,r){return void 0===i||null===i||!t.isFunction(i)&&(0===i.length||r&&""===n.trim(i))},isArray:function(n){return Array.isArray(n)||"[object Array]"===Object.prototype.toString.call(n)},ifSet:function(n,t,i){return i=i||"",t&&"object"==typeof t&&n in t?t[n]:i},cleanArray:function(n){return n instanceof Array||(n=[]),n.filter(function(n){return void 0!==n&&null!==n})},spliceArray:function(t,i,r){var u,f,o=0,e=[];if(!(t instanceof Array))return[];for(f=n.extend(!0,[],t),r&&f.reverse(),u=0;u<f.length;u++)u!==i&&(e[o]=f[u],o++);return r&&e.reverse(),e},getNum:function(n,t){return t=t||0,"number"==typeof n?n:("string"==typeof n&&(n=parseFloat(n)),isNaN(n)?t:n)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var n=document.createElement("div");return!t.isIE(9)&&(void 0!==n.draggable||void 0!==n.ondragstart&&void 0!==n.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(n){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(n){return!1}},hasResumableUploadSupport:function(){return t.hasFileUploadSupport()&&t.hasBlobSupport()&&t.hasArrayBufferViewSupport()&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||!1)},dataURI2Blob:function(n){var r,u,f,i,e,o,s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,h=t.hasBlobSupport(),c=(h||s)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!c)return null;for(r=n.split(",")[0].indexOf("base64")>=0?atob(n.split(",")[1]):decodeURIComponent(n.split(",")[1]),u=new ArrayBuffer(r.length),f=new Uint8Array(u),i=0;i<r.length;i+=1)f[i]=r.charCodeAt(i);return e=n.split(",")[0].split(":")[1].split(";")[0],h?new Blob([t.hasArrayBufferViewSupport()?f:u],{type:e}):(o=new s,o.append(u),o.getBlob(e))},arrayBuffer2String:function(n){if(window.TextDecoder)return new TextDecoder("utf-8").decode(n);for(var t,u,o,i=Array.prototype.slice.apply(new Uint8Array(n)),f="",r=0,e=i.length;e>r;)switch(t=i[r++],t>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:f+=String.fromCharCode(t);break;case 12:case 13:u=i[r++];f+=String.fromCharCode((31&t)<<6|63&u);break;case 14:u=i[r++];o=i[r++];f+=String.fromCharCode((15&t)<<12|(63&u)<<6|(63&o)<<0)}return f},isHtml:function(n){var r=document.createElement("div"),t,i;for(r.innerHTML=n,t=r.childNodes,i=t.length;i--;)if(1===t[i].nodeType)return!0;return!1},isSvg:function(n){return n.match(/^\s*<\?xml/i)&&(n.match(/<!DOCTYPE svg/i)||n.match(/<svg/i))},getMimeType:function(n,t,i){switch(n){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504e47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(n.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(n.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(n,t){n.removeClass(t).addClass(t)},getElement:function(i,r,u){return t.isEmpty(i)||t.isEmpty(i[r])?u:n(i[r])},createElement:function(t,i){return i=i||"div",n(n.parseHTML("<"+i+">"+t+"<\/"+i+">"))},uniqId:function(){return((new Date).getTime()+Math.floor(Math.random()*Math.pow(10,15))).toString(36)},parseEventCallback:function(n){return Function("'use strict'; return (function() { "+n+" });")()},cspBuffer:{CSP_ATTRIB:"data-csp-01928735",domEventsList:["mousedown","mouseup","click","dblclick","mousemove","mouseover","mousewheel","mouseout","contextmenu","touchstart","touchmove","touchend","touchcancel","keydown","keypress","keyup","focus","blur","change","submit","scroll","resize","hashchange","load","unload","cut","copy","paste"],domElementEvents:{},domElementsStyles:{},stash:function(i){var r=this,u=n.parseHTML("<div>"+i+"<\/div>"),f=n(u),e;return f.find("[style]").each(function(i,u){var e=n(u),f=e.attr("style"),o=t.uniqId(),s={};f&&f.length&&(-1===f.indexOf(";")&&(f+=";"),f.slice(0,f.length-1).split(";").map(function(n){n=n.split(":");n[0]&&(s[n[0]]=n[1]?n[1]:"")}),r.domElementsStyles[o]=s,e.removeAttr("style").attr(r.CSP_ATTRIB,o))}),f.filter("*").removeAttr("style"),n.each(r.domEventsList,function(n,i){var u,s,o="on"+i,e=f.find("["+o+"]");e.length&&(s=t.parseEventCallback(e.attr(o)),e.attr(r.CSP_ATTRIB)?u=e.attr(r.CSP_ATTRIB):(u=t.uniqId(),r.domElementEvents[u]=[]),r.domElementEvents[u].push({name:i+".csp",handler:s}),e.removeAttr(o).attr(r.CSP_ATTRIB,u))}),e=Object.values?Object.values(u):Object.keys(u).map(function(n){return u[n]}),e.flatMap(function(n){return n.innerHTML}).join("")},apply:function(t){var i=this,r=n(t);r.find("["+i.CSP_ATTRIB+"]").each(function(t,r){var u=n(r),f=u.attr(i.CSP_ATTRIB),e=i.domElementsStyles[f],o=i.domElementEvents[f];e&&u.css(e);o&&n.each(o,function(n,t){t&&t.name&&u.off(t.name).on(t.name,t.handler)});u.removeAttr(i.CSP_ATTRIB)});i.domElementsStyles={};i.domElementEvents={}}},setHtml:function(n,i){var r=t.cspBuffer;return n.html(r.stash(i)),r.apply(n),n},htmlEncode:function(n,t){return void 0===n?t||null:n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var r=t;return i?(n.each(i,function(n,t){"function"==typeof t&&(t=t());r=r.split(n).join(t)}),r):r},cleanMemory:function(n){var i=n.is("img")?n.attr("src"):n.find("source").attr("src");t.revokeObjectURL(i)},findFileName:function(n){var t=n.lastIndexOf("/");return-1===t&&(t=n.lastIndexOf("\\")),n.split(n.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(n){var i=document,r=i.documentElement,u=t.checkFullScreen();r&&n&&!u?r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):u&&(i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen())},moveArray:function(t,i,r,u){var f=n.extend(!0,[],t),e;if(u&&f.reverse(),r>=f.length)for(e=r-f.length;e--+1;)f.push(void 0);return f.splice(r,0,f.splice(i,1)[0]),u&&f.reverse(),f},closeButton:function(n){return n=n?"close "+n:"close",'<button type="button" class="'+n+'" aria-label="Close">\n  <span aria-hidden="true">&times;<\/span>\n<\/button>'},getRotation:function(n){switch(n){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(n,t){n&&(n.style.transform=t,n.style.webkitTransform=t,n.style["-moz-transform"]=t,n.style["-ms-transform"]=t,n.style["-o-transform"]=t)},getObjectKeys:function(t){var i=[];return t&&n.each(t,function(n){i.push(n)}),i},getObjectSize:function(n){return t.getObjectKeys(n).length},whenAll:function(i){var r,e,l,a,o,s,v=[].slice,u=1===arguments.length&&t.isArray(i)?i:v.call(arguments),f=n.Deferred(),y=0,h=u.length,c=h;for(l=a=o=Array(h),s=function(n,t,i){return function(){i!==u&&y++;f.notifyWith(t[n]=this,i[n]=v.call(arguments));--c||f[(y?"reject":"resolve")+"With"](t,i)}},r=0;h>r;r++)(e=u[r])&&n.isFunction(e.promise)?e.promise().done(s(r,o,u)).fail(s(r,l,a)):(f.notifyWith(this,e),--c);return c||f.resolveWith(o,u),f.promise()}};i=function(i,r){var u=this;u.$element=n(i);u.$parent=u.$element.parent();u._validate()&&(u.isPreviewable=t.hasFileAPISupport(),u.isIE9=t.isIE(9),u.isIE10=t.isIE(10),(u.isPreviewable||u.isIE9)&&(u._init(r),u._listen()),u.$element.removeClass("file-loading"))};i.prototype={constructor:i,_cleanup:function(){var n=this;n.reader=null;n.clearFileStack();n.fileBatchCompleted=!0;n.isError=!1;n.isDuplicateError=!1;n.isPersistentError=!1;n.cancelling=!1;n.paused=!1;n.lastProgress=0;n._initAjax()},_isAborted:function(){var n=this;return n.cancelling||n.paused},_initAjax:function(){var r=this,i=r.taskManager={pool:{},addPool:function(n){return i.pool[n]=new i.TasksPool(n)},getPool:function(n){return i.pool[n]},addTask:function(n,t){return new i.Task(n,t)},TasksPool:function(r){var u=this;u.id=r;u.cancelled=!1;u.cancelledDeferrer=n.Deferred();u.tasks={};u.addTask=function(n,t){return u.tasks[n]=new i.Task(n,t)};u.size=function(){return t.getObjectSize(u.tasks)};u.run=function(i){var f,s,h,a=0,c=!1,o=t.getObjectKeys(u.tasks).map(function(n){return u.tasks[n]}),e=[],r=n.Deferred(),l;if(u.cancelled)return u.cancelledDeferrer.resolve(),r.reject();if(!i)return l=t.getObjectKeys(u.tasks).map(function(n){return u.tasks[n].deferred}),t.whenAll(l).done(function(){var n=t.getArray(arguments);u.cancelled?(r.reject.apply(null,n),u.cancelledDeferrer.resolve()):(r.resolve.apply(null,n),u.cancelledDeferrer.reject())}).fail(function(){var n=t.getArray(arguments);r.reject.apply(null,n);u.cancelled?u.cancelledDeferrer.resolve():u.cancelledDeferrer.reject()}),n.each(u.tasks,function(n){f=u.tasks[n];f.run()}),r;for(s=function(t){n.when(t.deferred).fail(function(){c=!0;h.apply(null,arguments)}).always(h)},h=function(){var n=t.getArray(arguments);return r.notify(n),e.push(n),u.cancelled?(r.reject.apply(null,e),void u.cancelledDeferrer.resolve()):(e.length===u.size()&&(c?r.reject.apply(null,e):r.resolve.apply(null,e)),void(o.length&&(f=o.shift(),s(f),f.run())))};o.length&&a++<i;)f=o.shift(),s(f),f.run();return r};u.cancel=function(){return u.cancelled=!0,u.cancelledDeferrer}},Task:function(i,r){var u=this;u.id=i;u.deferred=n.Deferred();u.logic=r;u.context=null;u.run=function(){var n=t.getArray(arguments);return n.unshift(u.deferred),r.apply(u.context,n),u.deferred};u.runWithContext=function(n){return u.context=n,u.run()}}};r.ajaxQueue=[];r.ajaxRequests=[];r.ajaxAborted=!1},_init:function(i,r){var s,e,o,h,u=this,f=u.$element;u.options=i;u.canOrientImage=t.canOrientImage(f);n.each(i,function(n,i){switch(n){case"minFileCount":case"maxFileCount":case"maxTotalFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":u[n]=t.getNum(i);break;default:u[n]=i}});u.maxTotalFileCount>0&&u.maxTotalFileCount<u.maxFileCount&&(u.maxTotalFileCount=u.maxFileCount);u.rtl&&(h=u.previewZoomButtonIcons.prev,u.previewZoomButtonIcons.prev=u.previewZoomButtonIcons.next,u.previewZoomButtonIcons.next=h);!isNaN(u.maxAjaxThreads)&&u.maxAjaxThreads<u.resumableUploadOptions.maxThreads&&(u.resumableUploadOptions.maxThreads=u.maxAjaxThreads);u._initFileManager();"function"==typeof u.autoOrientImage&&(u.autoOrientImage=u.autoOrientImage());"function"==typeof u.autoOrientImageInitial&&(u.autoOrientImageInitial=u.autoOrientImageInitial());r||u._cleanup();u.duplicateErrors=[];u.$form=f.closest("form");u._initTemplateDefaults();u.uploadFileAttr=t.isEmpty(f.attr("name"))?"file_data":f.attr("name");o=u._getLayoutTemplate("progress");u.progressTemplate=o.replace("{class}",u.progressClass);u.progressInfoTemplate=o.replace("{class}",u.progressInfoClass);u.progressPauseTemplate=o.replace("{class}",u.progressPauseClass);u.progressCompleteTemplate=o.replace("{class}",u.progressCompleteClass);u.progressErrorTemplate=o.replace("{class}",u.progressErrorClass);u.isDisabled=f.attr("disabled")||f.attr("readonly");u.isDisabled&&f.attr("disabled",!0);u.isClickable=u.browseOnZoneClick&&u.showPreview&&(u.dropZoneEnabled||!t.isEmpty(u.defaultPreviewContent));u.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(u.uploadUrl);u.dropZoneEnabled=t.hasDragDropSupport()&&u.dropZoneEnabled;u.isAjaxUpload||(u.dropZoneEnabled=u.dropZoneEnabled&&t.canAssignFilesToInput());u.slug="function"==typeof i.slugCallback?i.slugCallback:u._slugDefault;u.mainTemplate=u.showCaption?u._getLayoutTemplate("main1"):u._getLayoutTemplate("main2");u.captionTemplate=u._getLayoutTemplate("caption");u.previewGenericTemplate=u._getPreviewTemplate("generic");!u.imageCanvas&&u.resizeImage&&(u.maxImageWidth||u.maxImageHeight)&&(u.imageCanvas=document.createElement("canvas"),u.imageCanvasContext=u.imageCanvas.getContext("2d"));t.isEmpty(f.attr("id"))&&f.attr("id",t.uniqId());u.namespace=".fileinput_"+f.attr("id").replace(/-/g,"_");void 0===u.$container?u.$container=u._createContainer():u._refreshContainer();e=u.$container;u.$dropZone=e.find(".file-drop-zone");u.$progress=e.find(".kv-upload-progress");u.$btnUpload=e.find(".fileinput-upload");u.$captionContainer=t.getElement(i,"elCaptionContainer",e.find(".file-caption"));u.$caption=t.getElement(i,"elCaptionText",e.find(".file-caption-name"));t.isEmpty(u.msgPlaceholder)||(s=f.attr("multiple")?u.filePlural:u.fileSingle,u.$caption.attr("placeholder",u.msgPlaceholder.replace("{files}",s)));u.$captionIcon=u.$captionContainer.find(".file-caption-icon");u.$previewContainer=t.getElement(i,"elPreviewContainer",e.find(".file-preview"));u.$preview=t.getElement(i,"elPreviewImage",e.find(".file-preview-thumbnails"));u.$previewStatus=t.getElement(i,"elPreviewStatus",e.find(".file-preview-status"));u.$errorContainer=t.getElement(i,"elErrorContainer",u.$previewContainer.find(".kv-fileinput-error"));u._validateDisabled();t.isEmpty(u.msgErrorClass)||t.addCss(u.$errorContainer,u.msgErrorClass);r?u._errorsExist()||u.$errorContainer.hide():(u._resetErrors(),u.$errorContainer.hide(),u.previewInitId="thumb-"+f.attr("id"),u._initPreviewCache(),u._initPreview(!0),u._initPreviewActions(),u.$parent.hasClass("file-loading")&&(u.$container.insertBefore(u.$parent),u.$parent.remove()));u._setFileDropZoneTitle();f.attr("disabled")&&u.disable();u._initZoom();u.hideThumbnailContent&&t.addCss(u.$preview,"hide-content")},_initFileManager:function(){var i=this;i.uploadStartTime=t.now();i.fileManager={stack:{},filesProcessed:[],errors:[],loadedImages:{},totalImages:0,totalFiles:null,totalSize:null,uploadedSize:0,stats:{},initStats:function(n){var r={started:t.now()};n?i.fileManager.stats[n]=r:i.fileManager.stats=r},getUploadStats:function(n,r,u){var f=i.fileManager,s=n?f.stats[n]&&f.stats[n].started||t.now():i.uploadStartTime,e=(t.now()-s)/1e3,h=e?r/e:0,c=i._getSize(h,["B/s","KB/s","MB/s","GB/s","TB/s","PB/s","EB/s","ZB/s","YB/s"]),l=u-r,o={fileId:n,started:s,elapsed:e,loaded:r,total:u,bps:h,bitrate:c,pendingBytes:l};return n?f.stats[n]=o:f.stats=o,o},exists:function(t){return-1!==n.inArray(t,i.fileManager.getIdList())},count:function(){return i.fileManager.getIdList().length},total:function(){var n=i.fileManager;return n.totalFiles||(n.totalFiles=n.count()),n.totalFiles},getTotalSize:function(){var t=i.fileManager;return t.totalSize?t.totalSize:(t.totalSize=0,n.each(i.fileManager.stack,function(n,i){var r=parseFloat(i.size);t.totalSize+=isNaN(r)?0:r}),t.totalSize)},add:function(n,r){r||(r=i.fileManager.getId(n));r&&(i.fileManager.stack[r]={file:n,name:t.getFileName(n),relativePath:t.getFileRelativePath(n),size:n.size,nameFmt:i._getFileName(n,""),sizeFmt:i._getSize(n.size)})},remove:function(n){var t=n.attr("data-fileid");t&&i.fileManager.removeFile(t)},removeFile:function(n){delete i.fileManager.stack[n];delete i.fileManager.loadedImages[n]},move:function(t,r){var u={},f=i.fileManager.stack;(t||r)&&t!==r&&(n.each(f,function(n,i){n!==t&&(u[n]=i);n===r&&(u[t]=f[t])}),i.fileManager.stack=u)},list:function(){var t=[];return n.each(i.fileManager.stack,function(n,i){i&&i.file&&t.push(i.file)}),t},isPending:function(t){return-1===n.inArray(t,i.fileManager.filesProcessed)&&i.fileManager.exists(t)},isProcessed:function(){var t=!0,r=i.fileManager;return n.each(r.stack,function(n){r.isPending(n)&&(t=!1)}),t},clear:function(){var n=i.fileManager;i.isDuplicateError=!1;i.isPersistentError=!1;n.totalFiles=null;n.totalSize=null;n.uploadedSize=0;n.stack={};n.errors=[];n.filesProcessed=[];n.stats={};n.clearImages()},clearImages:function(){i.fileManager.loadedImages={};i.fileManager.totalImages=0},addImage:function(n,t){i.fileManager.loadedImages[n]=t},removeImage:function(n){delete i.fileManager.loadedImages[n]},getImageIdList:function(){return t.getObjectKeys(i.fileManager.loadedImages)},getImageCount:function(){return i.fileManager.getImageIdList().length},getId:function(n){return i._getFileId(n)},getIndex:function(n){return i.fileManager.getIdList().indexOf(n)},getThumb:function(t){var r=null;return i._getThumbs().each(function(){var i=n(this);i.attr("data-fileid")===t&&(r=i)}),r},getThumbIndex:function(n){var t=n.attr("data-fileid");return i.fileManager.getIndex(t)},getIdList:function(){return t.getObjectKeys(i.fileManager.stack)},getFile:function(n){return i.fileManager.stack[n]||null},getFileName:function(n,t){var r=i.fileManager.getFile(n);return r?t?r.nameFmt||"":r.name||"":""},getFirstFile:function(){var n=i.fileManager.getIdList(),t=n&&n.length?n[0]:null;return i.fileManager.getFile(t)},setFile:function(n,t){i.fileManager.getFile(n)?i.fileManager.stack[n].file=t:i.fileManager.add(t,n)},setProcessed:function(n){i.fileManager.filesProcessed.push(n)},getProgress:function(){var n=i.fileManager.total(),t=i.fileManager.filesProcessed.length;return n?Math.ceil(t/n*100):0},setProgress:function(n,t){var r=i.fileManager.getFile(n);!isNaN(t)&&r&&(r.progress=t)}}},_setUploadData:function(i,r){var u=this;n.each(r,function(n,r){var f=u.uploadParamNames[n]||n;t.isArray(r)?i.append(f,r[0],r[1]):i.append(f,r)})},_initResumableUpload:function(){var i,r=this,f=r.resumableUploadOptions,e=t.logMessages,u=r.fileManager;if(r.enableResumableUpload){if(f.fallback!==!1&&"function"!=typeof f.fallback&&(f.fallback=function(n){n._log(e.noResumableSupport);n.enableResumableUpload=!1}),!t.hasResumableUploadSupport()&&f.fallback!==!1)return void f.fallback(r);if(!r.uploadUrl&&r.enableResumableUpload)return r._log(e.noUploadUrl),void(r.enableResumableUpload=!1);if(f.chunkSize=parseFloat(f.chunkSize),f.chunkSize<=0||isNaN(f.chunkSize))return r._log(e.invalidChunkSize,{chunkSize:f.chunkSize}),void(r.enableResumableUpload=!1);i=r.resumableManager={init:function(n,t,e){i.logs=[];i.stack=[];i.error="";i.id=n;i.file=t.file;i.fileName=t.name;i.fileIndex=e;i.completed=!1;i.lastProgress=0;r.showPreview&&(i.$thumb=u.getThumb(n)||null,i.$progress=i.$btnDelete=null,i.$thumb&&i.$thumb.length&&(i.$progress=i.$thumb.find(".file-thumb-progress"),i.$btnDelete=i.$thumb.find(".kv-file-remove")));i.chunkSize=1024*f.chunkSize;i.chunkCount=i.getTotalChunks()},setAjaxError:function(n,t,u,o){n.responseJSON&&n.responseJSON.error&&(u=n.responseJSON.error.toString());o||(i.error=u);f.showErrorLog&&r._log(e.ajaxError,{status:n.status,error:u,text:n.responseText||""})},reset:function(){i.stack=[];i.chunksProcessed={}},setProcessed:function(n){var s,e=i.id,t=i.$thumb,h=i.$progress,c=t&&t.length,o={id:c?t.attr("id"):"",index:u.getIndex(e),fileId:e};i.completed=!0;i.lastProgress=0;c&&t.removeClass("file-uploading");"success"===n?(u.uploadedSize+=i.file.size,r.showPreview&&(r._setProgress(101,h),r._setThumbStatus(t,"Success"),r._initUploadSuccess(i.chunksProcessed[e].data,t)),u.removeFile(e),delete i.chunksProcessed[e],r._raise("fileuploaded",[o.id,o.index,o.fileId]),u.isProcessed()&&r._setProgress(101)):"cancel"!==n&&(r.showPreview&&(r._setThumbStatus(t,"Error"),r._setPreviewError(t,!0),r._setProgress(101,h,r.msgProgressError),r._setProgress(101,r.$progress,r.msgProgressError),r.cancelling=!0),r.$errorContainer.find('li[data-file-id="'+o.fileId+'"]').length||(s=r.msgResumableUploadRetriesExceeded.setTokens({file:i.fileName,max:f.maxRetries,error:i.error}),r._showFileError(s,o)));u.isProcessed()&&i.reset()},check:function(){var t=!0;n.each(i.logs,function(n,i){if(!i)return(t=!1,!1)})},processedResumables:function(){var n,t=i.logs,r=0;if(!t||!t.length)return 0;for(n=0;n<t.length;n++)t[n]===!0&&r++;return r},getUploadedSize:function(){var n=i.processedResumables()*i.chunkSize;return n>i.file.size?i.file.size:n},getTotalChunks:function(){var n=parseFloat(i.chunkSize);return!isNaN(n)&&n>0?Math.ceil(i.file.size/n):0},getProgress:function(){var t=i.processedResumables(),n=i.chunkCount;return 0===n?0:Math.ceil(t/n*100)},checkAborted:function(n){r._isAborted()&&(clearInterval(n),r.unlock())},upload:function(){var n,e=u.getIdList(),f="new";n=setInterval(function(){var o,s;(i.checkAborted(n),"new"===f&&(r.lock(),f="processing",o=e.shift(),u.initStats(o),u.stack[o]&&(i.init(o,u.stack[o],u.getIndex(o)),i.processUpload())),!u.isPending(o)&&i.completed&&(f="new"),u.isProcessed())&&(s=r.$preview.find(".file-preview-initial"),s.length&&(t.addCss(s,t.SORT_CSS),r._initSortable()),clearInterval(n),r._clearFileInput(),r.unlock(),setTimeout(function(){var n=r.previewCache.data;n&&(r.initialPreview=n.content,r.initialPreviewConfig=n.config,r.initialPreviewThumbTags=n.tags);r._raise("filebatchuploadcomplete",[r.initialPreview,r.initialPreviewConfig,r.initialPreviewThumbTags,r._getExtraData()])},r.processDelay))},r.processDelay)},uploadResumable:function(){for(var u=r.taskManager,e=i.chunkCount,t=u.addPool(i.id),n=0;e>n;n++)i.logs[n]=!(!i.chunksProcessed[i.id]||!i.chunksProcessed[i.id][n]),i.logs[n]||i.pushAjax(n,0);t.run(f.maxThreads).done(function(){i.setProcessed("success")}).fail(function(){i.setProcessed(t.cancelled?"cancel":"error")})},processUpload:function(){var o,h,c,l,a,v,s,e=i.id;return f.testUrl?(o=new FormData,h=u.stack[e],r._setUploadData(o,{fileId:e,fileName:h.fileName,fileSize:h.size,fileRelativePath:h.relativePath,chunkSize:i.chunkSize,chunkCount:i.chunkCount}),c=function(n){s=r._getOutData(o,n);r._raise("filetestbeforesend",[e,u,i,s])},l=function(f,h,c){s=r._getOutData(o,c,f);var v=r.uploadParamNames,l=v.chunksUploaded||"chunksUploaded",a=[e,u,i,s];f[l]&&t.isArray(f[l])?(i.chunksProcessed[e]||(i.chunksProcessed[e]={}),n.each(f[l],function(n,t){i.logs[t]=!0;i.chunksProcessed[e][t]=!0}),i.chunksProcessed[e].data=f,r._raise("filetestsuccess",a)):r._raise("filetesterror",a);i.uploadResumable()},a=function(n,t,f){s=r._getOutData(o,n);r._raise("filetestajaxerror",[e,u,i,s]);i.setAjaxError(n,t,f,!0);i.uploadResumable()},v=function(){r._raise("filetestcomplete",[e,u,i,r._getOutData(o)])},void r._ajaxSubmit(c,l,v,a,o,e,i.fileIndex,f.testUrl)):void i.uploadResumable()},pushAjax:function(n,t){var f=r.taskManager,u=f.getPool(i.id);u.addTask(u.size()+1,function(n){var t,u=i.stack.shift();t=u[0];i.chunksProcessed[i.id]&&i.chunksProcessed[i.id][t]?r._log(e.chunkQueueError,{index:t}):i.sendAjax(t,u[1],n)});i.stack.push([n,t])},sendAjax:function(n,o,s){var b,v=i.chunkSize,h=i.id,a=i.file,w=i.$thumb,y=t.logMessages,rt=i.$btnDelete,p=function(n,t){t&&(n=n.setTokens(t));n="Error processing resumable ajax request. "+n;r._log(n);s.reject(n)},c,l,k,d,g,nt,tt,it;if(!i.chunksProcessed[h]||!i.chunksProcessed[h][n]){if(o>f.maxRetries)return p(y.resumableMaxRetriesReached,{n:f.maxRetries}),void i.setProcessed("error");tt=a.slice?"slice":a.mozSlice?"mozSlice":a.webkitSlice?"webkitSlice":"slice";it=a[tt](v*n,v*(n+1));c=new FormData;b=u.stack[h];r._setUploadData(c,{chunkCount:i.chunkCount,chunkIndex:n,chunkSize:v,chunkSizeStart:v*n,fileBlob:[it,i.fileName],fileId:h,fileName:i.fileName,fileRelativePath:b.relativePath,fileSize:a.size,retryCount:o});i.$progress&&i.$progress.length&&i.$progress.show();k=function(f){l=r._getOutData(c,f);r.showPreview&&(w.hasClass("file-preview-success")||(r._setThumbStatus(w,"Loading"),t.addCss(w,"file-uploading")),rt.attr("disabled",!0));r._raise("filechunkbeforesend",[h,n,o,u,i,l])};d=function(t,a,v){if(r._isAborted())return void p(y.resumableAborting);l=r._getOutData(c,v,t);var k=r.uploadParamNames,w=k.chunkIndex||"chunkIndex",b=[h,n,o,u,i,l];t.error?(f.showErrorLog&&r._log(e.retryStatus,{retry:o+1,filename:i.fileName,chunk:n}),i.pushAjax(n,o+1),i.error=t.error,r._raise("filechunkerror",b)):(i.logs[t[w]]=!0,i.chunksProcessed[h]||(i.chunksProcessed[h]={}),i.chunksProcessed[h][t[w]]=!0,i.chunksProcessed[h].data=t,s.resolve.call(null,t),r._raise("filechunksuccess",b),i.check())};g=function(t,f,e){return r._isAborted()?void p(y.resumableAborting):(l=r._getOutData(c,t),i.setAjaxError(t,f,e),r._raise("filechunkajaxerror",[h,n,o,u,i,l]),i.pushAjax(n,o+1),void p(y.resumableRetryError,{n:o-1}))};nt=function(){r._isAborted()||r._raise("filechunkcomplete",[h,n,o,u,i,r._getOutData(c)])};r._ajaxSubmit(k,d,nt,g,c,h,i.fileIndex)}}};i.reset()}},_initTemplateDefaults:function(){var o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,f,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,e,gt,i,ni,u,ti,r=this;o='{preview}\n<div class="kv-upload-progress kv-hidden"><\/div><div class="clearfix"><\/div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {pause}\n      {upload}\n      {browse}\n    <\/div>\n<\/div>';s='{preview}\n<div class="kv-upload-progress kv-hidden"><\/div>\n<div class="clearfix"><\/div>\n{remove}\n{cancel}\n{upload}\n{browse}\n';h='<div class="file-preview {class}">\n  {close}  <div class="{dropClass} clearfix">\n    <div class="file-preview-thumbnails clearfix">\n    <\/div>\n    <div class="file-preview-status text-center text-success"><\/div>\n    <div class="kv-fileinput-error"><\/div>\n  <\/div>\n<\/div>';l=t.closeButton("fileinput-remove");c='<i class="glyphicon glyphicon-file"><\/i>';a='<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"><\/span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n<\/div>';v='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}<\/button>';y='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}<\/a>';p='<div tabindex="500" class="{css}" {status}>{icon} {label}<\/div>';w='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"><\/div>';b='<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}<\/h5>\n      <span class="kv-zoom-title"><\/span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}<\/div>\n    <\/div>\n    <div class="modal-body">\n      <div class="floating-buttons"><\/div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"><\/div>\n{prev} {next}\n    <\/div>\n  <\/div>\n<\/div>\n';k='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     <\/div>\n<\/div>{stats}';ti='<div class="text-info file-upload-stats"><span class="pending-time">{pendingTime}<\/span> <span class="upload-speed">{uploadSpeed}<\/span><\/div>';d=" <samp>({sizeText})<\/samp>";g='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}<\/div>\n        <div class="file-size-info">{size}<\/div>\n    <\/div>\n    {progress}\n{indicator}\n{actions}\n<\/div>';nt='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    <\/div>\n<\/div>\n{drag}\n<div class="clearfix"><\/div>';tt='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}<\/button>\n';it='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}<\/button>';rt='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}<\/a>';ut='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}<\/button>';ft='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}<\/span>';et='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}<\/div>';f='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-fileid="{fileid}" data-template="{template}"';ot=f+'><div class="kv-file-content">\n';st=f+' title="{caption}"><div class="kv-file-content">\n';ht="<\/div>{footer}\n{zoomCache}<\/div>\n";ct="{content}\n";i=" {style}";lt='<div class="kv-preview-data file-preview-html" title="{caption}"'+i+">{data}<\/div>\n";at='<img src="{data}" class="file-preview-image kv-preview-data" title="{title}" alt="{alt}"'+i+">\n";vt='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly'+i+">{data}<\/textarea>\n";yt='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+i+"><\/iframe>";pt='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true"'+i+"><\/iframe>";wt='<video class="kv-preview-data file-preview-video" controls'+i+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n<\/video>\n";bt='<!--suppress ALL --><audio class="kv-preview-data file-preview-audio" controls'+i+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n<\/audio>\n";kt='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+i+">\n";e='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+i+">\n";dt='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+i+'>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n<\/object>\n";gt='<div class="kv-preview-data file-preview-other-frame"'+i+">\n"+t.DEFAULT_PREVIEW+"\n<\/div>\n";ni='<div class="kv-zoom-cache" style="display:none">{zoomContent}<\/div>';u={width:"100%",height:"100%","min-height":"480px"};r._isPdfRendered()&&(e=r.pdfRendererTemplate.replace("{renderer}",r._encodeURI(r.pdfRendererUrl)));r.defaults={layoutTemplates:{main1:o,main2:s,preview:h,close:l,fileIcon:c,caption:a,modalMain:w,modal:b,progress:k,stats:ti,size:d,footer:g,indicator:et,actions:nt,actionDelete:tt,actionUpload:it,actionDownload:rt,actionZoom:ut,actionDrag:ft,btnDefault:v,btnLink:y,btnBrowse:p,zoomCache:ni},previewMarkupTags:{tagBefore1:ot,tagBefore2:st,tagAfter:ht},previewContentTemplates:{generic:ct,html:lt,image:at,text:vt,office:yt,gdocs:pt,video:wt,audio:bt,flash:kt,object:dt,pdf:e,other:gt},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px",position:"relative"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:u,text:u,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:u,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(n,i){return t.compare(n,"image.*")&&!t.compare(n,/(tiff?|wmf)$/i)||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(n,i){return t.compare(n,"text/html")||t.compare(i,/\.(htm|html)$/i)},office:function(n,i){return t.compare(n,/(word|excel|powerpoint|office)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(n,i){return t.compare(n,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(n,i){return t.compare(n,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(n,i){return t.compare(n,"video.*")&&(t.compare(n,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(n,i){return t.compare(n,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(n,i){return t.compare(n,"application/x-shockwave-flash",!0)||t.compare(i,/\.(swf)$/i)},pdf:function(n,i){return t.compare(n,"application/pdf",!0)||t.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"><\/i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"><\/i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"><\/i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"><\/i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"><\/i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"><\/i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"><\/i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"><\/i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"><\/i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"><\/i>',indicatorPaused:'<i class="glyphicon glyphicon-pause text-primary"><\/i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading &hellip;",indicatorPausedTitle:"Upload Paused"}};n.each(r.defaults,function(t,i){return"allowedPreviewTypes"===t?void(void 0===r.allowedPreviewTypes&&(r.allowedPreviewTypes=i)):void(r[t]=n.extend(!0,{},i,r[t]))});r._initPreviewTemplates()},_initPreviewTemplates:function(){var i,r=this,u=r.previewMarkupTags,f=u.tagAfter;n.each(r.previewContentTemplates,function(n,e){t.isEmpty(r.previewTemplates[n])&&(i=u.tagBefore2,"generic"!==n&&"image"!==n&&"html"!==n&&"text"!==n||(i=u.tagBefore1),r._isPdfRendered()&&"pdf"===n&&(i=i.replace("kv-file-content","kv-file-content kv-pdf-rendered")),r.previewTemplates[n]=i+e+f)})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var n=i.initialPreview;n.length>0&&!t.isArray(n)&&(n=n.split(i.initialPreviewDelimiter));i.previewCache.data={content:n,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},count:function(n){if(!i.previewCache.data||!i.previewCache.data.content)return 0;if(n){var t=i.previewCache.data.content.filter(function(n){return null!==n});return t.length}return i.previewCache.data.content.length},get:function(n,r){var f,o,s,c,l,a,v,y=t.INIT_FLAG+n,e=i.previewCache.data,u=e.config[n],h=e.content[n],w=t.ifSet("previewAsData",u,i.initialPreviewAsData),b=u?{title:u.title||null,alt:u.alt||null}:{title:null,alt:null},p=function(n,r,f,e,o,s,h,c){var a=" file-preview-initial "+t.SORT_CSS+(h?" "+h:""),l=i.previewInitId+"-"+s,v=u&&u.fileId||l;return i._generatePreviewTemplate(n,r,f,e,l,v,!1,null,a,o,s,c,b,u&&u.zoomData||r)};return h&&h.length?(r=void 0===r?!0:r,s=t.ifSet("type",u,i.initialPreviewFileType||"generic"),l=t.ifSet("filename",u,t.ifSet("caption",u)),a=t.ifSet("filetype",u,s),c=i.previewCache.footer(n,r,u&&u.size||null),v=t.ifSet("frameClass",u),f=w?p(s,h,l,a,c,y,v):p("generic",h,l,a,c,y,v,s).setTokens({content:e.content[n]}),e.tags.length&&e.tags[n]&&(f=t.replaceTags(f,e.tags[n])),t.isEmpty(u)||t.isEmpty(u.frameAttr)||(o=t.createElement(f),o.find(".file-preview-initial").attr(u.frameAttr),f=o.html(),o.remove()),f):""},clean:function(n){n.content=t.cleanArray(n.content);n.config=t.cleanArray(n.config);n.tags=t.cleanArray(n.tags);i.previewCache.data=n},add:function(n,r,u,f){var o,e=i.previewCache.data;return n&&n.length?(o=n.length-1,t.isArray(n)||(n=n.split(i.initialPreviewDelimiter)),f&&e.content?(o=e.content.push(n[0])-1,e.config[o]=r,e.tags[o]=u):(e.content=n,e.config=r,e.tags=u),i.previewCache.clean(e),o):0},set:function(n,r,u,f){var e,s,o=i.previewCache.data;if(n&&n.length&&(t.isArray(n)||(n=n.split(i.initialPreviewDelimiter)),s=n.filter(function(n){return null!==n}),s.length)){if(void 0===o.content&&(o.content=[]),void 0===o.config&&(o.config=[]),void 0===o.tags&&(o.tags=[]),f){for(e=0;e<n.length;e++)n[e]&&o.content.push(n[e]);for(e=0;e<r.length;e++)r[e]&&o.config.push(r[e]);for(e=0;e<u.length;e++)u[e]&&o.tags.push(u[e])}else o.content=n,o.config=r,o.tags=u;i.previewCache.clean(o)}},unset:function(r){var f=i.previewCache.count(),u=i.reversePreviewOrder,e;if(f){if(1===f)return i.previewCache.data.content=[],i.previewCache.data.config=[],i.previewCache.data.tags=[],i.initialPreview=[],i.initialPreviewConfig=[],void(i.initialPreviewThumbTags=[]);i.previewCache.data.content=t.spliceArray(i.previewCache.data.content,r,u);i.previewCache.data.config=t.spliceArray(i.previewCache.data.config,r,u);i.previewCache.data.tags=t.spliceArray(i.previewCache.data.tags,r,u);e=n.extend(!0,{},i.previewCache.data);i.previewCache.clean(e)}},out:function(){var f,n,r,t="",u=i.previewCache.count();if(0===u)return{content:"",caption:""};for(n=0;u>n;n++)r=i.previewCache.get(n),t=i.reversePreviewOrder?r+t:t+r;return f=i._getMsgSelected(u),{content:t,caption:f}},footer:function(n,r,u){var e=i.previewCache.data||{};if(t.isEmpty(e.content))return"";(t.isEmpty(e.config)||t.isEmpty(e.config[n]))&&(e.config[n]={});r=void 0===r?!0:r;var c,f=e.config[n],y=t.ifSet("caption",f),p=t.ifSet("width",f,"auto"),l=t.ifSet("url",f,!1),a=t.ifSet("key",f,null),v=t.ifSet("fileId",f,null),o=i.fileActionSettings,w=i.initialPreviewShowDelete||!1,b=i.initialPreviewDownloadUrl?i.initialPreviewDownloadUrl+"?key="+a+(v?"&fileId="+v:""):"",s=f.downloadUrl||b,k=f.filename||f.caption||"",d=!!s,g=t.ifSet("showRemove",f,w),h=t.ifSet("showDownload",f,t.ifSet("showDownload",o,d)),nt=t.ifSet("showZoom",f,t.ifSet("showZoom",o,!0)),tt=t.ifSet("showDrag",f,t.ifSet("showDrag",o,!0)),it=l===!1&&r;return h=h&&f.downloadUrl!==!1&&!!s,c=i._renderFileActions(f,!1,h,g,nt,tt,it,l,a,!0,s,k),i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:c,caption:y,size:i._getSize(u),width:p,indicator:""})}};i.previewCache.init()},_isPdfRendered:function(){var t=this,n=t.usePdfRenderer,i="function"==typeof n?n():!!n;return i&&t.pdfRendererUrl},_handler:function(n,t,i){var f=this,r=f.namespace,u=t.split(" ").join(r+" ")+r;n&&n.length&&n.off(u).on(u,i)},_encodeURI:function(n){var t=this;return t.encodeUrl?encodeURI(n):n},_log:function(n,t){var i=this,r=i.$element.attr("id");i.showConsoleLogs&&(r&&(n='"'+r+'": '+n),n="bootstrap-fileinput: "+n,"object"==typeof t&&(n=n.setTokens(t)),window.console&&"undefined"!=typeof window.console.log?window.console.log(n):window.alert(n))},_validate:function(){var n=this,i="file"===n.$element.attr("type");return i||n._log(t.logMessages.badInputType),i},_errorsExist:function(){var i,r=this,u=r.$errorContainer.find("li");return u.length?!0:(i=t.createElement(r.$errorContainer.html()),i.find(".kv-error-close").remove(),i.find("ul").remove(),!!n.trim(i.text()).length)},_errorHandler:function(n,t){var r=this,i=n.target.error,u=function(n){r._showError(n.replace("{name}",t))};u(i.code===i.NOT_FOUND_ERR?r.msgFileNotFound:i.code===i.SECURITY_ERR?r.msgFileSecured:i.code===i.NOT_READABLE_ERR?r.msgFileNotReadable:i.code===i.ABORT_ERR?r.msgFilePreviewAborted:r.msgFilePreviewError)},_addError:function(n){var i=this,r=i.$errorContainer;n&&r.length&&(t.setHtml(r,i.errorCloseButton+n),i._handler(r.find(".kv-error-close"),"click",function(){setTimeout(function(){i.showPreview&&!i.getFrames().length&&i.clear();r.fadeOut("slow")},i.processDelay)}))},_setValidationError:function(n){var i=this;n=(n?n+" ":"")+"has-error";i.$container.removeClass(n).addClass("has-error");t.addCss(i.$captionContainer,"is-invalid")},_resetErrors:function(n){var t=this,i=t.$errorContainer;t.isPersistentError||(t.isError=!1,t.$container.removeClass("has-error"),t.$captionContainer.removeClass("is-invalid"),i.html(""),n?i.fadeOut("slow"):i.hide())},_showFolderError:function(n){var i,t=this,r=t.$errorContainer;n&&(t.isAjaxUpload||t._clearFileInput(),i=t.msgFoldersNotAllowed.replace("{n}",n),t._addError(i),t._setValidationError(),r.fadeIn(t.fadeDelay),t._raise("filefoldererror",[n,i]))},_showFileError:function(n,t,i){var r=this,u=r.$errorContainer,e=i||"fileuploaderror",o=t&&t.fileId||"",f=t&&t.id?'<li data-thumb-id="'+t.id+'" data-file-id="'+o+'">'+n+"<\/li>":"<li>"+n+"<\/li>";return 0===u.find("ul").length?r._addError("<ul>"+f+"<\/ul>"):u.find("ul").append(f),u.fadeIn(r.fadeDelay),r._raise(e,[t,n]),r._setValidationError("file-input-new"),!0},_showError:function(n,t,i){var r=this,u=r.$errorContainer,f=i||"fileerror";return t=t||{},t.reader=r.reader,r._addError(n),u.fadeIn(r.fadeDelay),r._raise(f,[t,n]),r.isAjaxUpload||r._clearFileInput(),r._setValidationError("file-input-new"),r.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(n){var t=this,u=t.minFileCount>1?t.filePlural:t.fileSingle,i=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",u),r=t.$errorContainer;i="<li>"+i+"<\/li>";0===r.find("ul").length?t._addError("<ul>"+i+"<\/ul>"):r.find("ul").append(i);t.isError=!0;t._updateFileDetails(0);r.fadeIn(t.fadeDelay);t._raise("fileerror",[n,i]);t._clearFileInput();t._setValidationError()},_parseError:function(t,i,r,u){var h,s,e,o=this,f=n.trim(r+"");return s=i.responseJSON&&i.responseJSON.error?i.responseJSON.error.toString():"",e=s?s:i.responseText,o.cancelling&&o.msgUploadAborted&&(f=o.msgUploadAborted),o.showAjaxErrorDetails&&e&&(s?f=n.trim(s+""):(e=n.trim(e.replace(/\n\s*\n/g,"\n")),h=e.length?"<pre>"+e+"<\/pre>":"",f+=f?h:e)),f||(f=o.msgAjaxError.replace("{operation}",t)),o.cancelling=!1,u?"<b>"+u+": <\/b>"+f:f},_parseFileType:function(n,i){var e,u,f,r,o=this,s=o.allowedPreviewTypes||[];if("application/text-plain"===n)return"text";for(r=0;r<s.length;r++)if(f=s[r],e=o.fileTypeSettings[f],u=e(n,i)?f:"",!t.isEmpty(u))return u;return"other"},_getPreviewIcon:function(t){var r,i=this,u=null;return t&&t.indexOf(".")>-1&&(r=t.split(".").pop(),i.previewFileIconSettings&&(u=i.previewFileIconSettings[r]||i.previewFileIconSettings[r.toLowerCase()]||null),i.previewFileExtSettings&&n.each(i.previewFileExtSettings,function(n,t){i.previewFileIconSettings[n]&&t(r)})),u||i.previewFileIcon},_parseFilePreviewIcon:function(n,t){var r=this,u=r._getPreviewIcon(t),i=n;return i.indexOf("{previewFileIcon}")>-1&&(i=i.setTokens({previewFileIconClass:r.previewFileIconClass,previewFileIcon:u})),i},_raise:function(t,i){var u=this,r=n.Event(t);if(void 0!==i?u.$element.trigger(r,i):u.$element.trigger(r),r.isDefaultPrevented()||r.result===!1)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:u.ajaxAborted||(u.ajaxAborted=r.result)}return!0},_listenFullScreen:function(n){var r,i,u=this,t=u.$modal;t&&t.length&&(r=t&&t.find(".btn-fullscreen"),i=t&&t.find(".btn-borderless"),r.length&&i.length&&(r.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),n?r.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),t.hasClass("file-zoom-fullscreen")?u._maximizeZoomDialog():n?u._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var f,i=this,r=i.$element,e=i.$form,u=i.$container;i._handler(r,"click",function(n){r.hasClass("file-no-browse")&&(r.data("zoneClicked")?r.data("zoneClicked",!1):n.preventDefault())});i._handler(r,"change",n.proxy(i._change,i));i.showBrowse&&i._handler(i.$btnFile,"click",n.proxy(i._browse,i));i._handler(u.find(".fileinput-remove:not([disabled])"),"click",n.proxy(i.clear,i));i._handler(u.find(".fileinput-cancel"),"click",n.proxy(i.cancel,i));i._handler(u.find(".fileinput-pause"),"click",n.proxy(i.pause,i));i._initDragDrop();i._handler(e,"reset",n.proxy(i.clear,i));i.isAjaxUpload||i._handler(e,"submit",n.proxy(i._submitForm,i));i._handler(i.$container.find(".fileinput-upload"),"click",n.proxy(i._uploadClick,i));i._handler(n(window),"resize",function(){i._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)});f="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";i._handler(n(document),f,function(){i._listenFullScreen(t.checkFullScreen())});i._autoFitContent();i._initClickable();i._refreshPreview()},_autoFitContent:function(){var i,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=this,u=400>r?t.previewSettingsSmall||t.defaults.previewSettingsSmall:t.previewSettings||t.defaults.previewSettings;n.each(u,function(n,r){i=".file-preview-frame .file-preview-"+n;t.$preview.find(i+".kv-preview-data,"+i+" .kv-preview-data").css(r)})},_scanDroppedItems:function(n,i,r){r=r||"";var u,e,o,f=this,s=function(n){f._log(t.logMessages.badDroppedFiles);f._log(n)};n.isFile?n.file(function(n){r&&(n.newPath=r+n.name);i.push(n)},s):n.isDirectory&&(e=n.createReader(),(o=function(){e.readEntries(function(t){if(t&&t.length>0){for(u=0;u<t.length;u++)f._scanDroppedItems(t[u],i,r+n.name+"/");o()}return null},s)})())},_initDragDrop:function(){var t=this,i=t.$dropZone;t.dropZoneEnabled&&t.showPreview&&(t._handler(i,"dragenter dragover",n.proxy(t._zoneDragEnter,t)),t._handler(i,"dragleave",n.proxy(t._zoneDragLeave,t)),t._handler(i,"drop",n.proxy(t._zoneDrop,t)),t._handler(n(document),"dragenter dragover drop",t._zoneDragDropInit))},_zoneDragDropInit:function(n){n.stopPropagation();n.preventDefault()},_zoneDragEnter:function(i){var r=this,u=i.originalEvent.dataTransfer,f=n.inArray("Files",u.types)>-1;return r._zoneDragDropInit(i),r.isDisabled||!f?(i.originalEvent.dataTransfer.effectAllowed="none",void(i.originalEvent.dataTransfer.dropEffect="none")):void(r._raise("fileDragEnter",{sourceEvent:i,files:u.types.Files})&&t.addCss(r.$dropZone,"file-highlighted"))},_zoneDragLeave:function(n){var t=this;t._zoneDragDropInit(n);t.isDisabled||t._raise("fileDragLeave",{sourceEvent:n})&&t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(n){var u,i=this,o=i.$element,s=n.originalEvent.dataTransfer,r=s.files,f=s.items,h=t.getDragDropFolders(f),c=function(){i.isAjaxUpload?i._change(n,r):(i.changeTriggered=!0,o.get(0).files=r,setTimeout(function(){i.changeTriggered=!1;o.trigger("change"+i.namespace)},i.processDelay));i.$dropZone.removeClass("file-highlighted")},e;if(n.preventDefault(),!i.isDisabled&&!t.isEmpty(r)&&i._raise("fileDragDrop",{sourceEvent:n,files:r}))if(h>0){if(!i.isAjaxUpload)return void i._showFolderError(h);for(r=[],u=0;u<f.length;u++)e=f[u].webkitGetAsEntry(),e&&i._scanDroppedItems(e,r);setTimeout(function(){c()},500)}else c()},_uploadClick:function(n){var r,u=this,i=u.$container.find(".fileinput-upload"),f=!i.hasClass("disabled")&&t.isEmpty(i.attr("disabled"));if(!n||!n.isDefaultPrevented()){if(!u.isAjaxUpload)return void(f&&"submit"!==i.attr("type")&&(r=i.closest("form"),r.length&&r.trigger("submit"),n.preventDefault()));n.preventDefault();f&&u.upload()}},_submitForm:function(){var n=this;return n._isFileSelectionValid()&&!n._abort({})},_clearPreview:function(){var t=this,i=t.showUploadedThumbs?t.getFrames(":not(.file-preview-success)"):t.getFrames();i.each(function(){var t=n(this);t.remove()});t.getFrames().length&&t.showPreview||t._resetUpload();t._validateDefaultPreview()},_initSortable:function(){var r,u,f,e,i=this,o=i.$preview,s="."+t.SORT_CSS,h=n("body"),c=n("html"),l=i.reversePreviewOrder,a=window.Sortable;a&&0!==o.find(s).length&&(u=h.length?h:c.length?c:i.$container,f=function(){u.addClass("file-grabbing")},e=function(){u.removeClass("file-grabbing")},r={handle:".drag-handle-init",dataIdAttr:"data-fileid",animation:600,draggable:s,scroll:!1,forceFallback:!0,onChoose:f,onStart:f,onUnchoose:e,onEnd:e,onSort:function(r){var f,e=r.oldIndex,u=r.newIndex,h=0,o=i.initialPreviewConfig.length,c=o>0&&u>=o,s=n(r.item);c&&(u=o-1);i.initialPreview=t.moveArray(i.initialPreview,e,u,l);i.initialPreviewConfig=t.moveArray(i.initialPreviewConfig,e,u,l);i.previewCache.init();i.getFrames(".file-preview-initial").each(function(){n(this).attr("data-fileindex",t.INIT_FLAG+h);h++});c&&(f=i.getFrames(":not(.file-preview-initial):first"),f.length&&s.slideUp(function(){s.insertBefore(f).slideDown()}));i._raise("filesorted",{previewId:s.attr("id"),oldIndex:e,newIndex:u,stack:i.initialPreviewConfig})}},n.extend(!0,r,i.fileActionSettings.dragSettings),i.sortable&&i.sortable.destroy(),i.sortable=a.create(o[0],r))},_setPreviewContent:function(n){var i=this;t.setHtml(i.$preview,n);i._autoFitContent()},_initPreviewImageOrientations:function(){var t=this,i=0,r=t.canOrientImage;(t.autoOrientImageInitial||r)&&t.getFrames(".file-preview-initial").each(function(){var f,o,s,e=n(this),u=t.initialPreviewConfig[i];u&&u.exif&&u.exif.Orientation&&(s=e.attr("id"),f=e.find(">.kv-file-content img"),o=t._getZoom(s," >.kv-file-content img"),r?f.css("image-orientation",t.autoOrientImageInitial?"from-image":"none"):t.setImageOrientation(f,o,u.exif.Orientation,e));i++})},_initPreview:function(n){var r,i=this,u=i.initialCaption||"";return i.previewCache.count(!0)?(r=i.previewCache.out(),u=n&&i.initialCaption?i.initialCaption:r.caption,i._setPreviewContent(r.content),i._setInitThumbAttr(),i._setCaption(u),i._initSortable(),t.isEmpty(r.content)||i.$container.removeClass("file-input-new"),void i._initPreviewImageOrientations()):(i._clearPreview(),void(n?i._setCaption(u):i._initCaption()))},_getZoomButton:function(n){var t=this,r=t.previewZoomButtonIcons[n],u=t.previewZoomButtonClasses[n],f=' title="'+(t.previewZoomButtonTitles[n]||"")+'" ',i=f+("close"===n?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==n&&"borderless"!==n&&"toggleheader"!==n||(i+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+u+" btn-"+n+'"'+i+">"+r+"<\/button>"},_getModalContent:function(){var n=this;return n._getLayoutTemplate("modal").setTokens({rtl:n.rtl?" kv-rtl":"",zoomFrameClass:n.frameClass,heading:n.msgZoomModalHeading,prev:n._getZoomButton("prev"),next:n._getZoomButton("next"),toggleheader:n._getZoomButton("toggleheader"),fullscreen:n._getZoomButton("fullscreen"),borderless:n._getZoomButton("borderless"),close:n._getZoomButton("close")})},_listenModalEvent:function(n){var r=this,i=r.$modal,u=function(n){return{sourceEvent:n,previewId:i.data("previewId"),modal:i}};i.on(n+".bs.modal",function(f){var e=i.find(".btn-fullscreen"),o=i.find(".btn-borderless");i.data("fileinputPluginId")===r.$element.attr("id")&&r._raise("filezoom"+n,u(f));"shown"===n&&(o.removeClass("active").attr("aria-pressed","false"),e.removeClass("active").attr("aria-pressed","false"),i.hasClass("file-zoom-fullscreen")&&(r._maximizeZoomDialog(),t.checkFullScreen()?e.addClass("active").attr("aria-pressed","true"):o.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var r,i=this,f=i._getLayoutTemplate("modalMain"),u="#"+t.MODAL_ID;i.showPreview&&(i.$modal=n(u),i.$modal&&i.$modal.length||(r=t.createElement(t.cspBuffer.stash(f)).insertAfter(i.$container),i.$modal=n(u).insertBefore(r),t.cspBuffer.apply(i.$modal),r.remove()),t.initModal(i.$modal),i.$modal.html(t.cspBuffer.stash(i._getModalContent())),t.cspBuffer.apply(i.$modal),n.each(t.MODAL_EVENTS,function(n,t){i._listenModalEvent(t)}))},_initZoomButtons:function(){var f,e,t=this,o=t.$modal.data("previewId")||"",i=t.getFrames().toArray(),s=i.length,r=t.$modal.find(".btn-prev"),u=t.$modal.find(".btn-next");return i.length<2?(r.hide(),void u.hide()):(r.show(),u.show(),void(s&&(f=n(i[0]),e=n(i[s-1]),r.removeAttr("disabled"),u.removeAttr("disabled"),f.length&&f.attr("id")===o&&r.attr("disabled",!0),e.length&&e.attr("id")===o&&u.attr("disabled",!0))))},_maximizeZoomDialog:function(){var o=this,t=o.$modal,u=t.find(".modal-header:visible"),f=t.find(".modal-footer:visible"),i=t.find(".modal-body"),r=n(window).height(),e=0;t.addClass("file-zoom-fullscreen");u&&u.length&&(r-=u.outerHeight(!0));f&&f.length&&(r-=f.outerHeight(!0));i&&i.length&&(e=i.outerHeight(!0)-i.height(),r-=e);t.find(".kv-zoom-body").height(r)},_resizeZoomDialog:function(n){var r=this,i=r.$modal,u=i.find(".btn-fullscreen"),f=i.find(".btn-borderless");if(i.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),n?u.hasClass("active")||(i.removeClass("file-zoom-fullscreen"),r._resizeZoomDialog(!0),f.hasClass("active")&&f.removeClass("active").attr("aria-pressed","false")):u.hasClass("active")?u.removeClass("active").attr("aria-pressed","false"):(i.removeClass("file-zoom-fullscreen"),r.$modal.find(".kv-zoom-body").css("height",r.zoomModalHeight));else{if(!n)return void r._maximizeZoomDialog();t.toggleFullScreen(!0)}i.focus()},_setZoomContent:function(i,r){var h,y,c,l,e,o,a,v,p,w,u=this,s=i.attr("id"),b=u._getZoom(s),f=u.$modal,k=f.find(".btn-fullscreen"),d=f.find(".btn-borderless"),g=f.find(".btn-toggleheader");y=b.attr("data-template")||"generic";h=b.find(".kv-file-content");c=h.length?h.html():"";p=i.data("caption")||"";w=i.data("size")||"";l=p+" "+w;f.find(".kv-zoom-title").attr("title",n("<div/>").html(l).text()).html(l);e=f.find(".kv-zoom-body");f.removeClass("kv-single-content");r?(v=e.addClass("file-thumb-loading").clone().insertAfter(e),t.setHtml(e,c).hide(),v.fadeOut("fast",function(){e.fadeIn("fast",function(){e.removeClass("file-thumb-loading")});v.remove()})):t.setHtml(e,c);a=u.previewZoomSettings[y];a&&(o=e.find(".kv-preview-data"),t.addCss(o,"file-zoom-detail"),n.each(a,function(n,t){o.css(n,t);(o.attr("width")&&"width"===n||o.attr("height")&&"height"===n)&&o.removeAttr(n)}));f.data("previewId",s);u._handler(f.find(".btn-prev"),"click",function(){u._zoomSlideShow("prev",s)});u._handler(f.find(".btn-next"),"click",function(){u._zoomSlideShow("next",s)});u._handler(k,"click",function(){u._resizeZoomDialog(!0)});u._handler(d,"click",function(){u._resizeZoomDialog(!1)});u._handler(g,"click",function(){var t,n=f.find(".modal-header"),i=f.find(".modal-body .floating-buttons"),r=n.find(".kv-zoom-actions"),e=function(t){var r=u.$modal.find(".kv-zoom-body"),i=u.zoomModalHeight;f.hasClass("file-zoom-fullscreen")&&(i=r.outerHeight(!0),t||(i-=n.outerHeight(!0)));r.css("height",t?i+t:i)};n.is(":visible")?(t=n.outerHeight(!0),n.slideUp("slow",function(){r.find(".btn").appendTo(i);e(t)})):(i.find(".btn").appendTo(r),n.slideDown("slow",function(){e()}));f.focus()});u._handler(f,"keydown",function(t){var i=t.which||t.keyCode,r=n(this).find(".btn-prev"),f=n(this).find(".btn-next"),e=n(this).data("previewId"),o=u.rtl?39:37,s=u.rtl?37:39;i===o&&r.length&&!r.attr("disabled")&&u._zoomSlideShow("prev",e);i===s&&f.length&&!f.attr("disabled")&&u._zoomSlideShow("next",e)})},_showModal:function(n){var i=this,r=i.$modal;n&&n.length&&(t.initModal(r),t.setHtml(r,i._getModalContent()),i._setZoomContent(n),r.data("fileinputPluginId",i.$element.attr("id")),r.modal("show"),i._initZoomButtons())},_zoomPreview:function(n){var i,r=this;if(!n.length)throw"Cannot zoom to detailed preview!";i=n.closest(t.FRAMES);r._showModal(i)},_zoomSlideShow:function(t,i){var h,r,o,f,u=this,l=u.$modal.find(".kv-zoom-actions .btn-"+t),c=u.getFrames().toArray(),e=[],s=c.length;if(!l.attr("disabled")){for(r=0;s>r;r++)o=n(c[r]),o&&o.length&&o.find(".kv-file-zoom:visible").length&&e.push(c[r]);for(s=e.length,r=0;s>r;r++)if(n(e[r]).attr("id")===i){f="prev"===t?r-1:r+1;break}0>f||f>=s||!e[f]||(h=n(e[f]),h.length&&u._setZoomContent(h,!0),u._initZoomButtons(),u._raise("filezoom"+t,{previewId:i,modal:u.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=n(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_inputFileCount:function(){return this.$element[0].files.length},_refreshPreview:function(){var i,t=this;(t._inputFileCount()||t.isAjaxUpload)&&t.showPreview&&t.isPreviewable&&(t.isAjaxUpload&&t.fileManager.count()>0?(i=n.extend(!0,{},t.fileManager.stack),t.fileManager.clear(),t._clearFileInput()):i=t.$element[0].files,i&&i.length&&(t.readFiles(i),t._setFileDropZoneTitle()))},_clearObjects:function(t){t.find("video audio").each(function(){this.pause();n(this).remove()});t.find("img object div").each(function(){n(this).remove()})},_clearFileInput:function(){var u,t,i,f=this,r=f.$element;f._inputFileCount()&&(u=r.closest("form"),t=n(document.createElement("form")),i=n(document.createElement("div")),r.before(i),u.length?u.after(t):i.after(t),t.append(r).trigger("reset"),i.before(r).remove(),t.remove())},_resetUpload:function(){var n=this;n.uploadStartTime=t.now();n.uploadCache=[];n.$btnUpload.removeAttr("disabled");n._setProgress(0);n._hideProgress();n._resetErrors(!1);n._initAjax();n.fileManager.clearImages();n._resetCanvas();n.overwriteInitial&&(n.initialPreview=[],n.initialPreviewConfig=[],n.initialPreviewThumbTags=[],n.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var n=this;n.canvas&&n.imageCanvasContext&&n.imageCanvasContext.clearRect(0,0,n.canvas.width,n.canvas.height)},_hasInitialPreview:function(){var n=this;return!n.overwriteInitial&&n.previewCache.count(!0)},_resetPreview:function(){var u,f,r,i=this,e=i.showUploadedThumbs,o=!i.removeFromPreviewOnError,s=(e||o)&&i.isDuplicateError;i.previewCache.count(!0)?(u=i.previewCache.out(),s&&(r=t.createElement("").insertAfter(i.$container),i.getFrames().each(function(){var t=n(this);(e&&t.hasClass("file-preview-success")||o&&t.hasClass("file-preview-error"))&&r.append(t)})),i._setPreviewContent(u.content),i._setInitThumbAttr(),f=i.initialCaption?i.initialCaption:u.caption,i._setCaption(f),s&&(r.contents().appendTo(i.$preview),r.remove())):(i._clearPreview(),i._initCaption());i.showPreview&&(i._initZoom(),i._initSortable());i.isDuplicateError=!1},_clearDefaultPreview:function(){var n=this;n.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var n=this;n.showPreview&&!t.isEmpty(n.defaultPreviewContent)&&(n._setPreviewContent('<div class="file-default-preview">'+n.defaultPreviewContent+"<\/div>"),n.$container.removeClass("file-input-new"),n._initClickable())},_resetPreviewThumbs:function(n){var i,t=this;return n?(t._clearPreview(),void t.clearFileStack()):void(t._hasInitialPreview()?(i=t.previewCache.out(),t._setPreviewContent(i.content),t._setInitThumbAttr(),t._setCaption(i.caption),t._initPreviewActions()):t._clearPreview())},_getLayoutTemplate:function(n){var i=this,r=i.layoutTemplates[n];return t.isEmpty(i.customLayoutTags)?r:t.replaceTags(r,i.customLayoutTags)},_getPreviewTemplate:function(n){var i=this,r=i.previewTemplates,u=r[n]||r.other;return t.isEmpty(i.customPreviewTags)?u:t.replaceTags(u,i.customPreviewTags)},_getOutData:function(n,t,i,r){var u=this;return t=t||{},i=i||{},r=r||u.fileManager.list(),{formdata:n,files:r,filenames:u.filenames,filescount:u.getFilesCount(),extra:u._getExtraData(),response:i,reader:u.reader,jqXHR:t}},_getMsgSelected:function(n){var t=this,i=1===n?t.fileSingle:t.filePlural;return n>0?t.msgSelected.replace("{n}",n).replace("{files}",i):t.msgNoFilesSelected},_getFrame:function(n,i){var r=this,u=t.getFrameElement(r.$preview,n);return!r.showPreview||i||u.length||r._log(t.logMessages.invalidThumb,{id:n}),u},_getZoom:function(n,i){var r=this,u=t.getZoomElement(r.$preview,n,i);return r.showPreview&&!u.length&&r._log(t.logMessages.invalidThumb,{id:n}),u},_getThumbs:function(n){return n=n||"",this.getFrames(":not(.file-preview-initial)"+n)},_getThumbId:function(n){var t=this;return t.previewInitId+"-"+n},_getExtraData:function(n,t){var i=this,r=i.uploadExtraData;return"function"==typeof i.uploadExtraData&&(r=i.uploadExtraData(n,t)),r},_initXhr:function(n,i){var r=this,f=r.fileManager,u=function(n){var u=0,o=n.total,s=n.loaded||n.position,e=f.getUploadStats(i,s,o);n.lengthComputable&&!r.enableResumableUpload&&(u=t.round(s/o*100));i?r._setFileUploadStats(i,u,e):r._setProgress(u,null,null,r._getStats(e));r._raise("fileajaxprogress",[e])};return n.upload&&(r.progressDelay&&(u=t.debounce(u,r.progressDelay)),n.upload.addEventListener("progress",u,!1)),n},_initAjaxSettings:function(){var t=this;t._ajaxSettings=n.extend(!0,{},t.ajaxSettings);t._ajaxDeleteSettings=n.extend(!0,{},t.ajaxDeleteSettings)},_mergeAjaxCallback:function(n,t,i){var r,u=this,f=u._ajaxSettings,e=u.mergeAjaxCallbacks;"delete"===i&&(f=u._ajaxDeleteSettings,e=u.mergeAjaxDeleteCallbacks);r=f[n];f[n]=e&&"function"==typeof r?"before"===e?function(){r.apply(this,arguments);t.apply(this,arguments)}:function(){t.apply(this,arguments);r.apply(this,arguments)}:t},_ajaxSubmit:function(t,i,r,u,f,e,o,s){var l,a,c,v,h=this;h._raise("filepreajax",[f,e,o])&&(f.append("initialPreview",JSON.stringify(h.initialPreview)),f.append("initialPreviewConfig",JSON.stringify(h.initialPreviewConfig)),f.append("initialPreviewThumbTags",JSON.stringify(h.initialPreviewThumbTags)),h._initAjaxSettings(),h._mergeAjaxCallback("beforeSend",t),h._mergeAjaxCallback("success",i),h._mergeAjaxCallback("complete",r),h._mergeAjaxCallback("error",u),s=s||h.uploadUrlThumb||h.uploadUrl,"function"==typeof s&&(s=s()),c=h._getExtraData(e,o)||{},"object"==typeof c&&n.each(c,function(n,t){f.append(n,t)}),a={xhr:function(){var t=n.ajaxSettings.xhr();return h._initXhr(t,e)},url:h._encodeURI(s),type:"POST",dataType:"json",data:f,cache:!1,processData:!1,contentType:!1},l=n.extend(!0,{},a,h._ajaxSettings),v=h.taskManager.addTask(e+"-"+o,function(){var t,i,r=this.self;t=r.ajaxQueue.shift();i=n.ajax(t);r.ajaxRequests.push(i)}),h.ajaxQueue.push(l),v.runWithContext({self:h}))},_mergeArray:function(n,i){var r=this,u=t.cleanArray(r[n]),f=t.cleanArray(i);r[n]=u.concat(f)},_initUploadSuccess:function(i,r,u){var h,y,p,c,l,e,o,s,a,v,f=this;return!f.showPreview||"object"!=typeof i||n.isEmptyObject(i)?void f._resetCaption():(void 0!==i.initialPreview&&i.initialPreview.length>0&&(f.hasInitData=!0,e=i.initialPreview||[],o=i.initialPreviewConfig||[],s=i.initialPreviewThumbTags||[],h=void 0===i.append||i.append,e.length>0&&!t.isArray(e)&&(e=e.split(f.initialPreviewDelimiter)),e.length&&(f._mergeArray("initialPreview",e),f._mergeArray("initialPreviewConfig",o),f._mergeArray("initialPreviewThumbTags",s)),void 0!==r?u?(a=r.attr("id"),v=f._getUploadCacheIndex(a),null!==v&&(f.uploadCache[v]={id:a,content:e[0],config:o[0]||[],tags:s[0]||[],append:h})):(p=f.previewCache.add(e[0],o[0],s[0],h),y=f.previewCache.get(p,!1),c=t.createElement(y).hide().appendTo(r),l=c.find(".kv-zoom-cache"),l&&l.length&&l.appendTo(r),r.fadeOut("slow",function(){var n=c.find(".file-preview-frame");n&&n.length&&n.insertBefore(r).fadeIn("slow").css("display:inline-block");f._initPreviewActions();f._clearFileInput();r.remove();c.remove();f._initSortable()})):(f.previewCache.set(e,o,s,h),f._initPreview(),f._initPreviewActions())),void f._resetCaption())},_getUploadCacheIndex:function(n){for(var i,r=this,u=r.uploadCache.length,t=0;u>t;t++)if(i=r.uploadCache[t],i.id===n)return t;return null},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var r=n(this),u=r.find(".kv-file-remove");u.removeAttr("disabled");i._handler(u,"click",function(){var n=r.attr("id"),u=i._raise("filesuccessremove",[n,r.attr("data-fileindex")]);t.cleanMemory(r);u!==!1&&r.fadeOut("slow",function(){r.remove();i.getFrames().length||i.reset()})})})},_updateInitialPreview:function(){var t=this,i=t.uploadCache;t.showPreview&&(n.each(i,function(n,i){t.previewCache.add(i.content,i.config,i.tags,i.append)}),t.hasInitData&&(t._initPreview(),t._initPreviewActions()))},_uploadSingle:function(i,r,u){var c,e,p,s,a,w,b,g,v,nt,tt,it,y,f=this,o=f.fileManager,rt=o.count(),l=new FormData,k=f._getThumbId(r),ut=rt>0||!n.isEmptyObject(f.uploadExtraData),d=f.ajaxOperations.uploadThumb,ft=o.getFile(r),h={id:k,index:i,fileId:r},et=f.fileManager.getFileName(r,!0);f.enableResumableUpload||(f.showPreview&&(e=f.fileManager.getThumb(r),b=e.find(".file-thumb-progress"),s=e.find(".kv-file-upload"),a=e.find(".kv-file-remove"),b.show()),0===rt||!ut||f.showPreview&&s&&s.hasClass("disabled")||f._abort(h)||(y=function(){w?o.errors.push(r):o.removeFile(r);o.setProcessed(r);o.isProcessed()&&(f.fileBatchCompleted=!0,p())},p=function(){var n;f.fileBatchCompleted&&setTimeout(function(){var i=0===o.count(),r=o.errors.length;f._updateInitialPreview();f.unlock(i);i&&f._clearFileInput();n=f.$preview.find(".file-preview-initial");f.uploadAsync&&n.length&&(t.addCss(n,t.SORT_CSS),f._initSortable());f._raise("filebatchuploadcomplete",[o.stack,f._getExtraData()]);f.retryErrorUploads&&0!==r||o.clear();f._setProgress(101);f.ajaxAborted=!1},f.processDelay)},g=function(v){c=f._getOutData(l,v);o.initStats(r);f.fileBatchCompleted=!1;u||(f.ajaxAborted=!1);f.showPreview&&(e.hasClass("file-preview-success")||(f._setThumbStatus(e,"Loading"),t.addCss(e,"file-uploading")),s.attr("disabled",!0),a.attr("disabled",!0));u||f.lock();-1!==o.errors.indexOf(r)&&delete o.errors[r];f._raise("filepreupload",[c,k,i]);n.extend(!0,h,c);f._abort(h)&&(v.abort(),u||(f._setThumbStatus(e,"New"),e.removeClass("file-uploading"),s.removeAttr("disabled"),a.removeAttr("disabled"),f.unlock()),f._setProgressCancelled())},nt=function(o,a,p){var g=f.showPreview&&e.attr("id")?e.attr("id"):k;c=f._getOutData(l,p,o);n.extend(!0,h,c);setTimeout(function(){t.isEmpty(o)||t.isEmpty(o.error)?(f.showPreview&&(f._setThumbStatus(e,"Success"),s.hide(),f._initUploadSuccess(o,e,u),f._setProgress(101,b)),f._raise("fileuploaded",[c,g,i]),u?y():f.fileManager.remove(e)):(w=!0,v=f._parseError(d,p,f.msgUploadError,f.fileManager.getFileName(r)),f._showFileError(v,h),f._setPreviewError(e,!0),f.retryErrorUploads||s.hide(),u&&y(),f._setProgress(101,f._getFrame(g).find(".file-thumb-progress"),f.msgUploadError))},f.processDelay)},tt=function(){f.showPreview&&(s.removeAttr("disabled"),a.removeAttr("disabled"),e.removeClass("file-uploading"));u?p():(f.unlock(!1),f._clearFileInput());f._initSuccessThumbs()},it=function(t,i,o){v=f._parseError(d,t,o,f.fileManager.getFileName(r));w=!0;setTimeout(function(){var i;u&&y();f.fileManager.setProgress(r,100);f._setPreviewError(e,!0);f.retryErrorUploads||s.hide();n.extend(!0,h,f._getOutData(l,t));f._setProgress(101,f.$progress,f.msgAjaxProgressError.replace("{operation}",d));i=f.showPreview&&e?e.find(".file-thumb-progress"):"";f._setProgress(101,i,f.msgUploadError);f._showFileError(v,h)},f.processDelay)},l.append(f.uploadFileAttr,ft.file,et),f._setUploadData(l,{fileId:r}),f._ajaxSubmit(g,nt,tt,it,l,r,i)))},_uploadBatch:function(){var s,h,c,l,u,a,i=this,v=i.fileManager,f=v.total(),y=f>0||!n.isEmptyObject(i.uploadExtraData),r=new FormData,e=i.ajaxOperations.uploadBatch,o;0!==f&&y&&!i._abort({})&&(a=function(){i.fileManager.clear();i._clearFileInput()},s=function(u){i.lock();v.initStats();var f=i._getOutData(r,u);i.ajaxAborted=!1;i.showPreview&&i._getThumbs().each(function(){var r=n(this),u=r.find(".kv-file-upload"),f=r.find(".kv-file-remove");r.hasClass("file-preview-success")||(i._setThumbStatus(r,"Loading"),t.addCss(r,"file-uploading"));u.attr("disabled",!0);f.attr("disabled",!0)});i._raise("filebatchpreupload",[f]);i._abort(f)&&(u.abort(),i._getThumbs().each(function(){var t=n(this),r=t.find(".kv-file-upload"),u=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(i._setThumbStatus(t,"New"),t.removeClass("file-uploading"));r.removeAttr("disabled");u.removeAttr("disabled")}),i._setProgressCancelled())},h=function(f,o,s){var h=i._getOutData(r,s,f),c=0,l=i._getThumbs(":not(.file-preview-success)"),v=t.isEmpty(f)||t.isEmpty(f.errorkeys)?[]:f.errorkeys;t.isEmpty(f)||t.isEmpty(f.error)?(i._raise("filebatchuploadsuccess",[h]),a(),i.showPreview?(l.each(function(){var t=n(this);i._setThumbStatus(t,"Success");t.removeClass("file-uploading");t.find(".kv-file-upload").hide().removeAttr("disabled")}),i._initUploadSuccess(f)):i.reset(),i._setProgress(101)):(i.showPreview&&(l.each(function(){var t=n(this);t.removeClass("file-uploading");t.find(".kv-file-upload").removeAttr("disabled");t.find(".kv-file-remove").removeAttr("disabled");0===v.length||-1!==n.inArray(c,v)?(i._setPreviewError(t,!0),i.retryErrorUploads||(t.find(".kv-file-upload").hide(),i.fileManager.remove(t))):(t.find(".kv-file-upload").hide(),i._setThumbStatus(t,"Success"),i.fileManager.remove(t));t.hasClass("file-preview-error")&&!i.retryErrorUploads||c++}),i._initUploadSuccess(f)),u=i._parseError(e,s,i.msgUploadError),i._showFileError(u,h,"filebatchuploaderror"),i._setProgress(101,i.$progress,i.msgUploadError))},l=function(){i.unlock();i._initSuccessThumbs();i._clearFileInput();i._raise("filebatchuploadcomplete",[i.fileManager.stack,i._getExtraData()])},c=function(t,o,s){var h=i._getOutData(r,t);u=i._parseError(e,t,s);i._showFileError(u,h,"filebatchuploaderror");i.uploadFileCount=f-1;i.showPreview&&(i._getThumbs().each(function(){var t=n(this);t.removeClass("file-uploading");i.fileManager.getFile(t.attr("data-fileid"))&&i._setPreviewError(t)}),i._getThumbs().removeClass("file-uploading"),i._getThumbs(" .kv-file-upload").removeAttr("disabled"),i._getThumbs(" .kv-file-delete").removeAttr("disabled"),i._setProgress(101,i.$progress,i.msgAjaxProgressError.replace("{operation}",e)))},o=0,n.each(i.fileManager.stack,function(n,u){t.isEmpty(u.file)||r.append(i.uploadFileAttr,u.file,u.nameFmt||"untitled_"+o);o++}),i._ajaxSubmit(s,h,l,c,r))},_uploadExtraOnly:function(){var e,o,s,h,r,n=this,i={},u=new FormData,f=n.ajaxOperations.uploadExtra;n._abort(i)||(e=function(t){n.lock();var r=n._getOutData(u,t);n._raise("filebatchpreupload",[r]);n._setProgress(50);i.data=r;i.xhr=t;n._abort(i)&&(t.abort(),n._setProgressCancelled())},o=function(i,e,o){var s=n._getOutData(u,o,i);t.isEmpty(i)||t.isEmpty(i.error)?(n._raise("filebatchuploadsuccess",[s]),n._clearFileInput(),n._initUploadSuccess(i),n._setProgress(101)):(r=n._parseError(f,o,n.msgUploadError),n._showFileError(r,s,"filebatchuploaderror"))},s=function(){n.unlock();n._clearFileInput();n._raise("filebatchuploadcomplete",[n.fileManager.stack,n._getExtraData()])},h=function(t,e,o){var s=n._getOutData(u,t);r=n._parseError(f,t,o);i.data=s;n._showFileError(r,s,"filebatchuploaderror");n._setProgress(101,n.$progress,n.msgAjaxProgressError.replace("{operation}",f))},n._ajaxSubmit(e,o,s,h,u))},_deleteFileIndex:function(i){var r=this,u=i.attr("data-fileindex"),f=r.reversePreviewOrder;u.substring(0,5)===t.INIT_FLAG&&(u=parseInt(u.replace(t.INIT_FLAG,"")),r.initialPreview=t.spliceArray(r.initialPreview,u,f),r.initialPreviewConfig=t.spliceArray(r.initialPreviewConfig,u,f),r.initialPreviewThumbTags=t.spliceArray(r.initialPreviewThumbTags,u,f),r.getFrames().each(function(){var r=n(this),i=r.attr("data-fileindex");i.substring(0,5)===t.INIT_FLAG&&(i=parseInt(i.replace(t.INIT_FLAG,"")),i>u&&(i--,r.attr("data-fileindex",t.INIT_FLAG+i)))}))},_resetCaption:function(){var n=this;setTimeout(function(){var t,i,r,u=n.previewCache.count(!0),f=n.fileManager.count(),e=n.showPreview&&n.getFrames(":not(.file-preview-success):not(.file-preview-error)").length;0!==f||0!==u||e?(i=u+f,i>1?t=n._getMsgSelected(i):(r=n.fileManager.getFirstFile(),t=r?r.nameFmt:"_"),n._setCaption(t)):n.reset()},n.processDelay)},_initFileActions:function(){var i=this;i.showPreview&&(i._initZoomButton(),i.getFrames(" .kv-file-remove").each(function(){var f,e,o=n(this),r=o.closest(t.FRAMES),u=r.attr("id"),s=r.attr("data-fileindex");i._handler(o,"click",function(){return e=i._raise("filepreremove",[u,s]),e!==!1&&i._validateMinCount()?(f=r.hasClass("file-preview-error"),t.cleanMemory(r),void r.fadeOut("slow",function(){i.fileManager.remove(r);i._clearObjects(r);r.remove();u&&f&&i.$errorContainer.find('li[data-thumb-id="'+u+'"]').fadeOut("fast",function(){n(this).remove();i._errorsExist()||i._resetErrors()});i._clearFileInput();i._resetCaption();i._raise("fileremoved",[u,s])})):!1})}),i.getFrames(" .kv-file-upload").each(function(){var r=n(this);i._handler(r,"click",function(){var n=r.closest(t.FRAMES),u=n.attr("data-fileid");i._hideProgress();n.hasClass("file-preview-error")&&!i.retryErrorUploads||i._uploadSingle(i.fileManager.getIndex(u),u,!1)})}))},_initPreviewActions:function(){var i=this,o=i.$preview,s=i.deleteExtraData||{},h=t.FRAMES+" .kv-file-remove",e=i.fileActionSettings,r=e.removeClass,u=e.removeErrorClass,f=function(){var n=i.isAjaxUpload?i.previewCache.count(!0):i._inputFileCount();i.getFrames().length||n||(i._setCaption(""),i.reset(),i.initialCaption="")};i._initZoomButton();o.find(h).each(function(){var k,d,g,nt,o=n(this),y=o.data("url")||i.deleteUrl,a=o.data("key"),tt=i.ajaxOperations.deleteThumb;if(!t.isEmpty(y)&&void 0!==a){"function"==typeof y&&(y=y());var p,c,l,w,h,e=o.closest(t.FRAMES),b=i.previewCache.data,v=e.attr("data-fileindex");v=parseInt(v.replace(t.INIT_FLAG,""));l=t.isEmpty(b.config)&&t.isEmpty(b.config[v])?null:b.config[v];h=t.isEmpty(l)||t.isEmpty(l.extra)?s:l.extra;w=l&&(l.filename||l.caption)||"";"function"==typeof h&&(h=h());c={id:o.attr("id"),key:a,extra:h};d=function(n){i.ajaxAborted=!1;i._raise("filepredelete",[a,n,h]);i._abort()?n.abort():(o.removeClass(u),t.addCss(e,"file-uploading"),t.addCss(o,"disabled "+r))};g=function(n,s,l){var y,p;return t.isEmpty(n)||t.isEmpty(n.error)?(e.removeClass("file-uploading").addClass("file-deleted"),void e.fadeOut("slow",function(){v=parseInt(e.attr("data-fileindex").replace(t.INIT_FLAG,""));i.previewCache.unset(v);i._deleteFileIndex(e);y=i.previewCache.count(!0);p=y>0?i._getMsgSelected(y):"";i._setCaption(p);i._raise("filedeleted",[a,l,h]);i._clearObjects(e);e.remove();f()})):(c.jqXHR=l,c.response=n,k=i._parseError(tt,l,i.msgDeleteError,w),i._showFileError(k,c,"filedeleteerror"),e.removeClass("file-uploading"),o.removeClass("disabled "+r).addClass(u),void f())};nt=function(n,t,s){var h=i._parseError(tt,n,s,w);c.jqXHR=n;c.response={};i._showFileError(h,c,"filedeleteerror");e.removeClass("file-uploading");o.removeClass("disabled "+r).addClass(u);f()};i._initAjaxSettings();i._mergeAjaxCallback("beforeSend",d,"delete");i._mergeAjaxCallback("success",g,"delete");i._mergeAjaxCallback("error",nt,"delete");p=n.extend(!0,{},{url:i._encodeURI(y),type:"POST",dataType:"json",data:n.extend(!0,{},{key:a},h)},i._ajaxDeleteSettings);i._handler(o,"click",function(){return i._validateMinCount()?(i.ajaxAborted=!1,i._raise("filebeforedelete",[a,h]),void(i.ajaxAborted instanceof Promise?i.ajaxAborted.then(function(t){t||n.ajax(p)}):i.ajaxAborted||n.ajax(p))):!1})}})},_hideFileIcon:function(){var n=this;n.overwriteInitial&&n.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){var n=this;t.addCss(n.$captionContainer,"icon-visible")},_getSize:function(t,i){var f,u,e=this,r=parseFloat(t),o=e.fileSizeGetter;return n.isNumeric(t)&&n.isNumeric(r)?("function"==typeof o?u=o(r):0===r?u="0.00 B":(f=Math.floor(Math.log(r)/Math.log(1024)),i||(i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"]),u=1*(r/Math.pow(1024,f)).toFixed(2)+" "+i[f]),e._getLayoutTemplate("size").replace("{sizeText}",u)):""},_getFileType:function(n){var t=this;return t.mimeTypeAliases[n]||n},_generatePreviewTemplate:function(i,r,u,f,e,o,s,h,c,l,a,v,y,p){var rt,g,nt,w=this,k=w.slug(u),b="",tt="",et=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,it=k,ot=k,ut="type-default",st=l||w._renderFileFooter(i,k,h,"auto",s),ft=w.preferIconicPreview,ht=w.preferIconicZoomPreview,d=ft?"other":i;return g=400>et?w.previewSettingsSmall[d]||w.defaults.previewSettingsSmall[d]:w.previewSettings[d]||w.defaults.previewSettings[d],g&&n.each(g,function(n,t){tt+=n+":"+t+";"}),nt=function(r,s,h,l){var d=h?"zoom-"+e:e,b=w._getPreviewTemplate(r),p=(c||"")+" "+l;return w.frameClass&&(p=w.frameClass+" "+p),h&&(p=p.replace(" "+t.SORT_CSS,"")),b=w._parseFilePreviewIcon(b,u),"text"===r&&(s=t.htmlEncode(s)),"object"!==i||f||n.each(w.defaults.fileTypeSettings,function(n,t){"object"!==n&&"other"!==n&&t(u,f)&&(ut="type-"+n)}),t.isEmpty(y)||(void 0!==y.title&&null!==y.title&&(it=y.title),void 0!==y.alt&&null!==y.alt&&(it=y.alt)),b.setTokens({previewId:d,caption:k,title:it,alt:ot,frameClass:p,type:w._getFileType(f),fileindex:a,fileid:o||"",typeCss:ut,footer:st,data:s,template:v||i,style:tt?'style="'+tt+'"':""})},a=a||e.slice(e.lastIndexOf("-")+1),w.fileActionSettings.showZoom&&(b=nt(ht?"other":i,p?p:r,!0,"kv-zoom-thumb")),b="\n"+w._getLayoutTemplate("zoomCache").replace("{zoomContent}",b),"function"==typeof w.sanitizeZoomCache&&(b=w.sanitizeZoomCache(b)),rt=nt(ft?"other":i,r,!1,"kv-preview-thumb"),rt.setTokens({zoomCache:b})},_addToPreview:function(n,i){var r,u=this;return i=t.cspBuffer.stash(i),r=u.reversePreviewOrder?n.prepend(i):n.append(i),t.cspBuffer.apply(n),r},_previewDefault:function(n,i){var r=this,s=r.$preview;if(r.showPreview){var f,h=t.getFileName(n),c=n?n.type:"",e=n.size||0,l=r._getFileName(n,""),a=i===!0&&!r.isAjaxUpload,v=t.createObjectURL(n),o=r.fileManager.getId(n),u=r._getThumbId(o);r._clearDefaultPreview();f=r._generatePreviewTemplate("other",v,h,c,u,o,a,e);r._addToPreview(s,f);r._setThumbAttr(u,l,e);i===!0&&r.isAjaxUpload&&r._setThumbStatus(r._getFrame(u),"Error")}},_previewFile:function(n,i,r,u,f){var w;if(this.showPreview){var v,e=this,y=t.getFileName(i),c=f.type,p=f.name,o=e._parseFileType(c,y),b=e.$preview,l=i.size||0,s="text"===o||"html"===o||"image"===o?r.target.result:u,a=e.fileManager.getId(i),h=e._getThumbId(a);"html"===o&&e.purifyHtml&&window.DOMPurify&&(s=window.DOMPurify.sanitize(s));v=e._generatePreviewTemplate(o,s,y,c,h,a,!1,l);e._clearDefaultPreview();e._addToPreview(b,v);w=e._getFrame(h);e._validateImageOrientation(w.find("img"),i,h,a,p,c,l,s);e._setThumbAttr(h,p,l);e._initSortable()}},_setThumbAttr:function(n,t,i){var r=this,u=r._getFrame(n);u.length&&(i=i&&i>0?r._getSize(i):"",u.data({caption:t,size:i}))},_setInitThumbAttr:function(){var i,u,f,e,r=this,s=r.previewCache.data,o=r.previewCache.count(!0),n;if(0!==o)for(n=0;o>n;n++)i=s.config[n],e=r.previewInitId+"-"+t.INIT_FLAG+n,u=t.ifSet("caption",i,t.ifSet("filename",i)),f=t.ifSet("size",i),r._setThumbAttr(e,u,f)},_slugDefault:function(n){return t.isEmpty(n,!0)?"":String(n).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(n,i){var u,f,s,h,c,r=this,e=r.$element,o=t.isIE(9)&&t.findFileName(e.val())||e[0].files[0]&&e[0].files[0].name;!o&&r.fileManager.count()>0?(c=r.fileManager.getFirstFile(),u=c.nameFmt):u=o?r.slug(o):"_";f=r.isAjaxUpload?r.fileManager.count():n;h=r.previewCache.count(!0)+f;s=1===f?u:r._getMsgSelected(h);r.isError?(r.$previewContainer.removeClass("file-thumb-loading"),r.$previewStatus.html(""),r.$captionContainer.removeClass("icon-visible")):r._showFileIcon();r._setCaption(s,r.isError);r.$container.removeClass("file-input-new file-input-ajax-new");i||r._raise("fileselect",[n,u]);r.previewCache.count(!0)&&r._initPreviewActions()},_setThumbStatus:function(n,i){var r=this;if(r.showPreview){var u="indicator"+i,o=u+"Title",s="file-preview-"+i.toLowerCase(),f=n.find(".file-upload-indicator"),e=r.fileActionSettings;n.removeClass("file-preview-success file-preview-error file-preview-paused file-preview-loading");"Success"===i&&n.find(".file-drag-handle").remove();t.setHtml(f,e[u]);f.attr("title",e[o]);n.addClass(s);"Error"!==i||r.retryErrorUploads||n.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var n=this;n._setProgress(101,n.$progress,n.msgCancelled)},_setProgress:function(n,i,r,u){var f=this;if(i=i||f.$progress,i.length){var e,o=Math.min(n,100),s=f.progressUploadThreshold,c=100>=n?f.progressTemplate:f.progressCompleteTemplate,h=100>o?f.progressTemplate:r?f.paused?f.progressPauseTemplate:f.progressErrorTemplate:c;n>=100&&(u="");t.isEmpty(h)||(e=s&&o>s&&100>=n?h.setTokens({percent:s,status:f.msgUploadThreshold}):h.setTokens({percent:o,status:n>100?f.msgUploadEnd:o+"%"}),u=u||"",e=e.setTokens({stats:u}),t.setHtml(i,e),r&&t.setHtml(i.find('[role="progressbar"]'),r))}},_hasFiles:function(){var n=this.$element[0];return!!(n&&n.files&&n.files.length)},_setFileDropZoneTitle:function(){var r,n=this,i=n.$container.find(".file-drop-zone"),u=n.dropZoneTitle;n.isClickable&&(r=t.isEmpty(n.$element.attr("multiple"))?n.fileSingle:n.filePlural,u+=n.dropZoneClickTitle.replace("{files}",r));i.find("."+n.dropZoneTitleClass).remove();!n.showPreview||0===i.length||n.fileManager.count()>0||!n.dropZoneEnabled||n.previewCache.count()>0||!n.isAjaxUpload&&n._hasFiles()||(0===i.find(t.FRAMES).length&&t.isEmpty(n.defaultPreviewContent)&&i.prepend('<div class="'+n.dropZoneTitleClass+'">'+u+"<\/div>"),n.$container.removeClass("file-input-new"),t.addCss(n.$container,"file-input-ajax-new"))},_getStats:function(n){var r,u,i=this;return i.showUploadStats&&n&&n.bitrate?(u=i._getLayoutTemplate("stats"),r=n.elapsed&&n.bps?i.msgPendingTime.setTokens({time:t.getElapsed(Math.ceil(n.pendingBytes/n.bps))}):i.msgCalculatingTime,u.setTokens({uploadSpeed:n.bitrate,pendingTime:r})):""},_setResumableProgress:function(n,t,i){var u=this,f=u.resumableManager,r=i?f:u,e=i?i.find(".file-thumb-progress"):null;0===r.lastProgress&&(r.lastProgress=n);n<r.lastProgress&&(n=r.lastProgress);u._setProgress(n,e,null,u._getStats(t));r.lastProgress=n},_toggleResumableProgress:function(n,i){var u=this,r=u.$progress;r&&r.length&&t.setHtml(r,n.setTokens({percent:101,status:i,stats:""}))},_setFileUploadStats:function(i,r,u){var f=this,o=f.$progress;if(f.showPreview||o&&o.length){var s,e=f.fileManager,p=f.resumableManager,h=e.getThumb(i),a=0,c=e.getTotalSize(),l=n.extend(!0,{},u);if(f.enableResumableUpload){var v,y=u.loaded,w=p.getUploadedSize(),b=p.file.size;y+=w;v=e.uploadedSize+y;r=t.round(100*y/b);u.pendingBytes=b-w;f._setResumableProgress(r,u,h);s=Math.floor(100*v/c);l.pendingBytes=c-v;f._setResumableProgress(s,l)}else e.setProgress(i,r),o=h&&h.length?h.find(".file-thumb-progress"):null,f._setProgress(r,o,null,f._getStats(u)),n.each(e.stats,function(n,t){a+=t.loaded}),l.pendingBytes=c-a,s=t.round(a/c*100),f._setProgress(s,null,null,f._getStats(l))}},_validateMinCount:function(){var n=this,t=n.isAjaxUpload?n.fileManager.count():n._inputFileCount();return n.validateInitialCount&&n.minFileCount>0&&n._getFileCount(t-1)<n.minFileCount?(n._noFilesError({}),!1):!0},_getFileCount:function(n,t){var i=this,r=0;return void 0===t&&(t=i.validateInitialCount&&!i.overwriteInitial),t&&(r=i.previewCache.count(!0),n+=r),n},_getFileId:function(n){return t.getFileId(n,this.generateFileId)},_getFileName:function(n,i){var u=this,r=t.getFileName(n);return r?u.slug(r):i},_getFileNames:function(n){var t=this;return t.filenames.filter(function(t){return n?void 0!==t:void 0!==t&&null!==t})},_setPreviewError:function(n,t){var i=this,r=i.removeFromPreviewOnError&&!i.retryErrorUploads;if(t&&!r||i.fileManager.remove(n),i.showPreview){if(r)return void n.remove();i._setThumbStatus(n,"Error");i._refreshUploadButton(n)}},_refreshUploadButton:function(n){var u=this,r=n.find(".kv-file-upload"),i=u.fileActionSettings,f=i.uploadIcon,e=i.uploadTitle;r.length&&(u.retryErrorUploads&&(f=i.uploadRetryIcon,e=i.uploadRetryTitle),r.attr("title",e),t.setHtml(r,f))},_checkDimensions:function(n,i,r,u,f,e,o){var a,l,s,v,h=this,y="Small"===i?"min":"max",c=h[y+"Image"+e];!t.isEmpty(c)&&r.length&&(s=r[0],l="Width"===e?s.naturalWidth||s.width:s.naturalHeight||s.height,v="Small"===i?l>=c:c>=l,v||(a=h["msgImage"+e+i].setTokens({name:f,size:c}),h._showFileError(a,o),h._setPreviewError(u)))},_getExifObj:function(n){var i,f=this,r=t.logMessages.exifWarning;if("data:image/jpeg;base64,"!==n.slice(0,23)&&"data:image/jpg;base64,"!==n.slice(0,22))return void(i=null);try{i=window.piexif?window.piexif.load(n):null}catch(u){i=null;r=u&&u.message||""}return i||f._log(t.logMessages.badExifParser,{details:r}),i},setImageOrientation:function(i,r,u,f){var e,o,s,h=this,l=!i||!i.length,v=!r||!r.length,c=!1,a=l&&f&&"image"===f.attr("data-template");l&&v||(s="load.fileinputimageorient",a?(i=r,r=null,i.css(h.previewSettings.image),o=n(document.createElement("div")).appendTo(f.find(".kv-file-content")),e=n(document.createElement("span")).insertBefore(i),i.css("visibility","hidden").removeClass("file-zoom-detail").appendTo(o)):c=!i.is(":visible"),i.off(s).on(s,function(){c&&(h.$preview.removeClass("hide-content"),f.find(".kv-file-content").css("visibility","hidden"));var n=i[0],l=r&&r.length?r[0]:null,v=n.offsetHeight,y=n.offsetWidth,s=t.getRotation(u);if(c&&(f.find(".kv-file-content").css("visibility","visible"),h.$preview.addClass("hide-content")),i.data("orientation",u),l&&r.data("orientation",u),5>u)return t.setTransform(n,s),void t.setTransform(l,s);var b=Math.atan(y/v),p=Math.sqrt(Math.pow(v,2)+Math.pow(y,2)),k=p?v/Math.cos(Math.PI/2+b)/p:1,w=" scale("+Math.abs(k)+")";t.setTransform(n,s+w);t.setTransform(l,s+w);a&&(i.css("visibility","visible").insertAfter(e).addClass("file-zoom-detail"),e.remove(),o.remove())}))},_validateImageOrientation:function(i,r,u,f,e,o,s,h){var l,a,v,c=this,y=c.autoOrientImage;return c.canOrientImage?void i.css("image-orientation",y?"from-image":"none"):(v=t.getZoomSelector(u," img"),l=y?c._getExifObj(h):null,(a=l?l["0th"][piexif.ImageIFD.Orientation]:null)?(c.setImageOrientation(i,n(v),a,c._getFrame(u)),c._raise("fileimageoriented",{$img:i,file:r}),void c._validateImage(u,f,e,o,s,h,l)):void c._validateImage(u,f,e,o,s,h,l))},_validateImage:function(t,i,r,u,f,e,o){var a,v,y,s=this,p=s.$preview,h=s._getFrame(t),l=h.attr("data-fileindex"),c=h.find("img");r=r||"Untitled";c.one("load",function(){v=h.width();y=p.width();v>y&&c.css("width","100%");a={ind:l,id:t,fileId:i};s._checkDimensions(l,"Small",c,h,r,"Width",a);s._checkDimensions(l,"Small",c,h,r,"Height",a);s.resizeImage||(s._checkDimensions(l,"Large",c,h,r,"Width",a),s._checkDimensions(l,"Large",c,h,r,"Height",a));s._raise("fileimageloaded",[t]);s.fileManager.addImage(i,{ind:l,img:c,thumb:h,pid:t,typ:u,siz:f,validated:!1,imgData:e,exifObj:o});h.data("exif",o);s._validateAllImages()}).one("error",function(){s._raise("fileimageloaderror",[t])}).each(function(){this.complete?n(this).trigger("load"):this.error&&n(this).trigger("error")})},_validateAllImages:function(){var i,t=this,u={val:0},r=t.fileManager.getImageCount(),f=t.resizeIfSizeMoreThan;r===t.fileManager.totalImages&&(t._raise("fileimagesloaded"),t.resizeImage&&n.each(t.fileManager.loadedImages,function(n,e){e.validated||(i=e.siz,i&&i>1e3*f&&t._getResizedImage(n,e,u,r),e.validated=!0)}))},_getResizedImage:function(i,r,u,f){var y,p,w,h,c,rt,ut,b,l,k,e=this,d=n(r.img)[0],o=d.naturalWidth,s=d.naturalHeight,g=1,a=e.maxImageWidth||o,v=e.maxImageHeight||s,nt=!(!o||!s),tt=e.imageCanvas,st=e.imageCanvasContext,it=r.typ,ft=r.pid,et=r.ind,ht=r.thumb,ot=r.exifObj;if(c=function(n,t,i){e.isAjaxUpload?e._showFileError(n,t,i):e._showError(n,t,i);e._setPreviewError(ht)},b=e.fileManager.getFile(i),l={id:ft,index:et,fileId:i},k=[i,ft,et],(!b||!nt||a>=o&&v>=s)&&(nt&&b&&e._raise("fileimageresized",k),u.val++,u.val===f&&e._raise("fileimagesresized"),!nt))return void c(e.msgImageResizeError,l,"fileimageresizeerror");it=it||e.resizeDefaultImageType;p=o>a;w=s>v;g="width"===e.resizePreference?p?a/o:w?v/s:1:w?v/s:p?a/o:1;e._resetCanvas();o*=g;s*=g;tt.width=o;tt.height=s;try{st.drawImage(d,0,0,o,s);h=tt.toDataURL(it,e.resizeQuality);ot&&(ut=window.piexif.dump(ot),h=window.piexif.insert(ut,h));y=t.dataURI2Blob(h);e.fileManager.setFile(i,y);e._raise("fileimageresized",k);u.val++;u.val===f&&e._raise("fileimagesresized",[void 0,void 0]);y instanceof Blob||c(e.msgImageResizeError,l,"fileimageresizeerror")}catch(ct){u.val++;u.val===f&&e._raise("fileimagesresized",[void 0,void 0]);rt=e.msgImageResizeException.replace("{errors}",ct.message);c(rt,l,"fileimageresizeexception")}},_showProgress:function(){var n=this;n.$progress&&n.$progress.length&&n.$progress.show()},_hideProgress:function(){var n=this;n.$progress&&n.$progress.length&&n.$progress.hide()},_initBrowse:function(n){var i=this,r=i.$element;i.showBrowse?i.$btnFile=n.find(".btn-file").append(r):(r.appendTo(n).attr("tabindex",-1),t.addCss(r,"file-no-browse"))},_initClickable:function(){var r,u,i=this;i.isClickable&&(r=i.$dropZone,i.isAjaxUpload||(u=i.$preview.find(".file-default-preview"),u.length&&(r=u)),t.addCss(r,"clickable"),r.attr("tabindex",-1),i._handler(r,"click",function(t){var u=n(t.target);n(i.elErrorContainer+":visible").length||u.parents(".file-preview-thumbnails").length&&!u.parents(".file-default-preview").length||(i.$element.data("zoneClicked",!0).trigger("click"),r.blur())}))},_initCaption:function(){var n=this,i=n.initialCaption||"";return n.overwriteInitial||t.isEmpty(i)?(n.$caption.val(""),!1):(n._setCaption(i),!0)},_setCaption:function(i,r){var f,o,s,e,h,c,u=this;if(u.$caption.length){if(u.$captionContainer.removeClass("icon-visible"),r)f=n("<div>"+u.msgValidationError+"<\/div>").text(),e=u.fileManager.count(),e?(c=u.fileManager.getFirstFile(),h=1===e&&c?c.nameFmt:u._getMsgSelected(e)):h=u._getMsgSelected(u.msgNo),o=t.isEmpty(i)?h:i,s='<span class="'+u.msgValidationErrorClass+'">'+u.msgValidationErrorIcon+"<\/span>";else{if(t.isEmpty(i))return;f=n("<div>"+i+"<\/div>").text();o=f;s=u._getLayoutTemplate("fileIcon")}u.$captionContainer.addClass("icon-visible");u.$caption.attr("title",f).val(o);t.setHtml(u.$captionIcon,s)}},_createContainer:function(){var n=this,r={"class":"file-input file-input-new"+(n.rtl?" kv-rtl":"")},i=t.createElement(t.cspBuffer.stash(n._renderMain()));return t.cspBuffer.apply(i),i.insertBefore(n.$element).attr(r),n._initBrowse(i),n.theme&&i.addClass("theme-"+n.theme),i},_refreshContainer:function(){var n=this,i=n.$container,r=n.$element;r.insertAfter(i);t.setHtml(i,n._renderMain());n._initBrowse(i);n._validateDisabled()},_validateDisabled:function(){var n=this;n.$caption.attr({readonly:n.isDisabled})},_renderMain:function(){var n=this,t=n.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=n.showClose?n._getLayoutTemplate("close"):"",r=n.showPreview?n._getLayoutTemplate("preview").setTokens({"class":n.previewClass,dropClass:t}):"",u=n.isDisabled?n.captionClass+" file-caption-disabled":n.captionClass,f=n.captionTemplate.setTokens({"class":u+" kv-fileinput-caption"});return n.mainTemplate.setTokens({"class":n.mainClass+(!n.showBrowse&&n.showCaption?" no-browse":""),preview:r,close:i,caption:f,upload:n._renderButton("upload"),remove:n._renderButton("remove"),cancel:n._renderButton("cancel"),pause:n._renderButton("pause"),browse:n._renderButton("browse")})},_renderButton:function(n){var i=this,f=i._getLayoutTemplate("btnDefault"),r=i[n+"Class"],o=i[n+"Title"],s=i[n+"Icon"],u=i[n+"Label"],h=i.isDisabled?" disabled":"",e="button";switch(n){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";r+=" kv-hidden";break;case"pause":if(!i.showPause)return"";r+=" kv-hidden";break;case"upload":if(!i.showUpload)return"";i.isAjaxUpload&&!i.isDisabled?f=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):e="submit";break;case"browse":if(!i.showBrowse)return"";f=i._getLayoutTemplate("btnBrowse");break;default:return""}return r+="browse"===n?" btn-file":" fileinput-"+n+" fileinput-"+n+"-button",t.isEmpty(u)||(u=' <span class="'+i.buttonLabelClass+'">'+u+"<\/span>"),f.setTokens({type:e,css:r,title:o,status:h,icon:s,label:u})},_renderThumbProgress:function(){var n=this;return'<div class="file-thumb-progress kv-hidden">'+n.progressInfoTemplate.setTokens({percent:101,status:n.msgUploadBegin,stats:""})+"<\/div>"},_renderFileFooter:function(n,i,r,u,f){var h,s,e=this,o=e.fileActionSettings,a=o.showRemove,c=o.showDrag,v=o.showUpload,l=o.showZoom,y=e._getLayoutTemplate("footer"),p=e._getLayoutTemplate("indicator"),w=f?o.indicatorError:o.indicatorNew,b=f?o.indicatorErrorTitle:o.indicatorNewTitle,k=p.setTokens({indicator:w,indicatorTitle:b});return r=e._getSize(r),s={type:n,caption:i,size:r,width:u,progress:"",indicator:k},e.isAjaxUpload?(s.progress=e._renderThumbProgress(),s.actions=e._renderFileActions(s,v,!1,a,l,c,!1,!1,!1)):s.actions=e._renderFileActions(s,!1,!1,!1,l,c,!1,!1,!1),h=y.setTokens(s),h=t.replaceTags(h,e.previewThumbTags)},_renderFileActions:function(n,t,i,r,u,f,e,o,s,h,c,l){var v=this;if(!n.type&&h&&(n.type="image"),v.enableResumableUpload?t=!1:"function"==typeof t&&(t=t(n)),"function"==typeof i&&(i=i(n)),"function"==typeof r&&(r=r(n)),"function"==typeof u&&(u=u(n)),"function"==typeof f&&(f=f(n)),!(t||i||r||u||f))return"";var p,nt=o===!1?"":' data-url="'+o+'"',w="",b="",k=s===!1?"":' data-key="'+s+'"',d="",g="",y="",tt=v._getLayoutTemplate("actions"),a=v.fileActionSettings,it=v.otherActionButtons.setTokens({dataKey:k,key:s}),rt=e?a.removeClass+" disabled":a.removeClass;return r&&(d=v._getLayoutTemplate("actionDelete").setTokens({removeClass:rt,removeIcon:a.removeIcon,removeTitle:a.removeTitle,dataUrl:nt,dataKey:k,key:s})),t&&(g=v._getLayoutTemplate("actionUpload").setTokens({uploadClass:a.uploadClass,uploadIcon:a.uploadIcon,uploadTitle:a.uploadTitle})),i&&(y=v._getLayoutTemplate("actionDownload").setTokens({downloadClass:a.downloadClass,downloadIcon:a.downloadIcon,downloadTitle:a.downloadTitle,downloadUrl:c||v.initialPreviewDownloadUrl}),y=y.setTokens({filename:l,key:s})),u&&(w=v._getLayoutTemplate("actionZoom").setTokens({zoomClass:a.zoomClass,zoomIcon:a.zoomIcon,zoomTitle:a.zoomTitle})),f&&h&&(p="drag-handle-init "+a.dragClass,b=v._getLayoutTemplate("actionDrag").setTokens({dragClass:p,dragTitle:a.dragTitle,dragIcon:a.dragIcon})),tt.setTokens({"delete":d,upload:g,download:y,zoom:w,drag:b,other:it})},_browse:function(n){var t=this;n&&n.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.focusCaptionOnBrowse&&t.$captionContainer.focus())},_change:function(i){var r=this;if(!r.changeTriggered){var h,o,l,u,a=r.$element,k=arguments.length>1,f=r.isAjaxUpload,c=k?arguments[1]:a[0].files,v=r.fileManager.count(),y=t.isEmpty(a.attr("multiple")),e=!f&&y?1:r.maxFileCount,s=r.maxTotalFileCount,p=s>0&&s>e,w=y&&v>0,d=function(t,i,u,e){var o=n.extend(!0,{},r._getOutData(null,{},{},c),{id:u,index:e}),s={id:u,index:e,file:i,files:c};return r.isPersistentError=!0,f?r._showFileError(t,o):r._showError(t,s)},b=function(n,t,i){var u=i?r.msgTotalFilesTooMany:r.msgFilesTooMany;u=u.replace("{m}",t).replace("{n}",n);r.isError=d(u,null,null,null);r.$captionContainer.removeClass("icon-visible");r._setCaption("",!0);r.$container.removeClass("file-input-new file-input-ajax-new")};if(r.reader=null,r._resetUpload(),r._hideFileIcon(),r.dropZoneEnabled&&r.$container.find(".file-drop-zone ."+r.dropZoneTitleClass).remove(),f||(c=i.target&&void 0===i.target.files?i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files||{}),h=c,t.isEmpty(h)||0===h.length)return f||r.clear(),void r._raise("fileselectnone");if(r._resetErrors(),u=h.length,l=f?r.fileManager.count()+u:u,o=r._getFileCount(l,p?!1:void 0),e>0&&o>e){if(!r.autoReplace||u>e)return void b(r.autoReplace&&u>e?u:o,e);o>e&&r._resetPreviewThumbs(f)}else{if(p&&(o=r._getFileCount(l,!0),s>0&&o>s)){if(!r.autoReplace||u>e)return void b(r.autoReplace&&u>s?u:o,s,!0);o>e&&r._resetPreviewThumbs(f)}!f||w?(r._resetPreviewThumbs(!1),w&&r.clearFileStack()):!f||0!==v||r.previewCache.count(!0)&&!r.overwriteInitial||r._resetPreviewThumbs(!0)}r.readFiles(h)}},_abort:function(t){var r,i=this;return i.ajaxAborted&&"object"==typeof i.ajaxAborted&&void 0!==i.ajaxAborted.message?(r=n.extend(!0,{},i._getOutData(null),t),r.abortData=i.ajaxAborted.data||{},r.abortMessage=i.ajaxAborted.message,i._setProgress(101,i.$progress,i.msgCancelled),i._showFileError(i.ajaxAborted.message,r,"filecustomerror"),i.cancel(),!0):!!i.ajaxAborted},_resetFileStack:function(){var t=this,i=0;t._getThumbs().each(function(){var r=n(this),u=r.attr("data-fileindex"),f=r.attr("id");"-1"!==u&&-1!==u&&(t.fileManager.getFile(r.attr("data-fileid"))?r.attr({"data-fileindex":"-1"}):(r.attr({"data-fileindex":i}),i++),t._getZoom(f).attr({"data-fileindex":r.attr("data-fileindex")}))})},_isFileSelectionValid:function(n){var t=this;return n=n||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showFileError(t.msgFileRequired),!1):t.minFileCount>0&&t._getFileCount(n)<t.minFileCount?(t._noFilesError({}),!1):!0},_canPreview:function(n){var i=this;if(!(n&&i.showPreview&&i.$preview&&i.$preview.length))return!1;var e,o,s,h,r=n.name||"",u=n.type||"",b=(n.size||0)/1e3,c=i._parseFileType(u,r),l=i.allowedPreviewTypes,a=i.allowedPreviewMimeTypes,v=i.allowedPreviewExtensions||[],y=i.disabledPreviewTypes,p=i.disabledPreviewMimeTypes,w=i.disabledPreviewExtensions||[],f=i.maxFilePreviewSize&&parseFloat(i.maxFilePreviewSize)||0,k=new RegExp("\\.("+v.join("|")+")$","i"),d=new RegExp("\\.("+w.join("|")+")$","i");return e=!l||-1!==l.indexOf(c),o=!a||-1!==a.indexOf(u),s=!v.length||t.compare(r,k),h=y&&-1!==y.indexOf(c)||p&&-1!==p.indexOf(u)||w.length&&t.compare(r,d)||f&&!isNaN(f)&&b>f,!h&&(e||o||s)},addToStack:function(n,t){this.fileManager.add(n,t)},clearFileStack:function(){var n=this;return n.fileManager.clear(),n._initResumableUpload(),n.enableResumableUpload?(null===n.showPause&&(n.showPause=!0),null===n.showCancel&&(n.showCancel=!1)):(n.showPause=!1,null===n.showCancel&&(n.showCancel=!0)),n.$element},getFileStack:function(){return this.fileManager.stack},getFileList:function(){return this.fileManager.list()},getFilesCount:function(n){var t=this,i=t.isAjaxUpload?t.fileManager.count():t._inputFileCount();return n&&(i+=t.previewCache.count(!0)),t._getFileCount(i)},readFiles:function(i){this.reader=new FileReader;var e,r=this,u=r.reader,c=r.$previewContainer,s=r.$previewStatus,p=r.msgLoading,v=r.msgProgress,w=r.previewInitId,f=i.length,l=r.fileTypeSettings,o=r.allowedFileTypes,y=o?o.length:0,h=r.allowedFileExtensions,b=t.isEmpty(h)?"":h.join(", "),a=function(t,u,o,s,h){var c,l=n.extend(!0,{},r._getOutData(null,{},{},i),{id:o,index:s,fileId:h}),a={id:o,index:s,fileId:h,file:u,files:i};r._previewDefault(u,!0);c=r._getFrame(o,!0);r.isAjaxUpload?setTimeout(function(){e(s+1)},r.processDelay):(r.unlock(),f=0);r.removeFromPreviewOnError&&c.length?c.remove():(r._initFileActions(),c.find(".kv-file-upload").remove());r.isPersistentError=!0;r.isError=r.isAjaxUpload?r._showFileError(t,l):r._showError(t,a);r._updateFileDetails(f)};r.fileManager.clearImages();n.each(i,function(n,t){var i=r.fileTypeSettings.image;i&&i(t.type)&&r.fileManager.totalImages++});e=function(k){var vt,ut=r.$errorContainer,ft=r.fileManager,si;if(k>=f)return r.unlock(),r.duplicateErrors.length&&(vt="<li>"+r.duplicateErrors.join("<\/li><li>")+"<\/li>",0===ut.find("ul").length?t.setHtml(ut,r.errorCloseButton+"<ul>"+vt+"<\/ul>"):ut.find("ul").append(vt),ut.fadeIn(r.fadeDelay),r._handler(ut.find(".kv-error-close"),"click",function(){ut.fadeOut(r.fadeDelay)}),r.duplicateErrors=[]),r.isAjaxUpload?(r._raise("filebatchselected",[ft.stack]),0!==ft.count()||r.isError||r.reset()):r._raise("filebatchselected",[i]),c.removeClass("file-thumb-loading"),void s.html("");r.lock(!0);var et,tt,nt,ni,yt,pt,wt,rt,st,ht,ct,lt,at,bt,d=i[k],it=w+"-"+r._getFileId(d),ti=l.text,ii=l.image,ri=l.html,g=r._getFileName(d,""),kt=(d&&d.size||0)/1e3,dt="",ui=t.createObjectURL(d),ot=0,fi="",gt=!1,ei=0,oi=function(){var n=v.setTokens({index:k+1,files:f,percent:50,name:g});setTimeout(function(){s.html(n);r._updateFileDetails(f);e(k+1)},r.processDelay);r._raise("fileloaded",[d,it,k,u])&&r.isAjaxUpload&&ft.add(d)};if(d){if(rt=ft.getId(d),y>0)for(tt=0;y>tt;tt++)pt=o[tt],wt=r.msgFileTypes[pt]||pt,fi+=0===tt?wt:", "+wt;if(g===!1)return void e(k+1);if(0===g.length)return nt=r.msgInvalidFileName.replace("{name}",t.htmlEncode(t.getFileName(d),"[unknown]")),void a(nt,d,it,k,rt);if(t.isEmpty(h)||(dt=new RegExp("\\.("+h.join("|")+")$","i")),et=kt.toFixed(2),r.isAjaxUpload&&ft.exists(rt)||r._getFrame(it,!0).length)return si={id:it,index:k,fileId:rt,file:d,files:i},nt=r.msgDuplicateFile.setTokens({name:g,size:et}),void(r.isAjaxUpload?(r.duplicateErrors.push(nt),r.isDuplicateError=!0,r._raise("fileduplicateerror",[d,rt,g,et,it,k]),e(k+1),r._updateFileDetails(f)):(r._showError(nt,si),r.unlock(),f=0,r._clearFileInput(),r.reset(),r._updateFileDetails(f)));if(r.maxFileSize>0&&kt>r.maxFileSize)return nt=r.msgSizeTooLarge.setTokens({name:g,size:et,maxSize:r.maxFileSize}),void a(nt,d,it,k,rt);if(null!==r.minFileSize&&kt<=t.getNum(r.minFileSize))return nt=r.msgSizeTooSmall.setTokens({name:g,size:et,minSize:r.minFileSize}),void a(nt,d,it,k,rt);if(!t.isEmpty(o)&&t.isArray(o)){for(tt=0;tt<o.length;tt+=1)ni=o[tt],ht=l[ni],ot+=ht&&"function"==typeof ht&&ht(d.type,t.getFileName(d))?1:0;if(0===ot)return nt=r.msgInvalidFileType.setTokens({name:g,types:fi}),void a(nt,d,it,k,rt)}if(0===ot&&!t.isEmpty(h)&&t.isArray(h)&&!t.isEmpty(dt)&&(yt=t.compare(g,dt),ot+=t.isEmpty(yt)?0:yt.length,0===ot))return nt=r.msgInvalidFileExtension.setTokens({name:g,extensions:b}),void a(nt,d,it,k,rt);if(!r._canPreview(d))return st=r.isAjaxUpload&&r._raise("filebeforeload",[d,k,u]),r.isAjaxUpload&&st&&ft.add(d),r.showPreview&&st&&(c.addClass("file-thumb-loading"),r._previewDefault(d),r._initFileActions()),void setTimeout(function(){st&&r._updateFileDetails(f);e(k+1);r._raise("fileloaded",[d,it,k])},10);ct=ti(d.type,g);lt=ri(d.type,g);at=ii(d.type,g);s.html(p.replace("{index}",k+1).replace("{files}",f));c.addClass("file-thumb-loading");u.onerror=function(n){r._errorHandler(n,g)};u.onload=function(i){var o,e,h,v,a,f,y=[],p=function(n){var t=new FileReader;t.onerror=function(n){r._errorHandler(n,g)};t.onload=function(n){return r.isAjaxUpload&&!r._raise("filebeforeload",[d,k,u])?(gt=!0,r._resetCaption(),u.abort(),s.html(""),c.removeClass("file-thumb-loading"),void r.enable()):(r._previewFile(k,d,n,ui,e),r._initFileActions(),void oi())};n?t.readAsText(d,r.textEncoding):t.readAsDataURL(d)};if(e={name:g,type:d.type},n.each(l,function(n,t){"object"!==n&&"other"!==n&&"function"==typeof t&&t(d.type,g)&&ei++}),0===ei){for(h=new Uint8Array(i.target.result),tt=0;tt<h.length;tt++)v=h[tt].toString(16),y.push(v);if(o=y.join("").toLowerCase().substring(0,8),f=t.getMimeType(o,"",""),t.isEmpty(f)&&(a=t.arrayBuffer2String(u.result),f=t.isSvg(a)?"image/svg+xml":t.getMimeType(o,a,d.type)),e={name:g,type:f},ct=ti(f,""),lt=ri(f,""),at=ii(f,""),bt=ct||lt,bt||at)return void p(bt)}return r.isAjaxUpload&&!r._raise("filebeforeload",[d,k,u])?(gt=!0,r._resetCaption(),u.abort(),s.html(""),c.removeClass("file-thumb-loading"),void r.enable()):(r._previewFile(k,d,i,ui,e),r._initFileActions(),void oi())};u.onprogress=function(n){if(n.lengthComputable){var t=n.loaded/n.total*100,i=Math.ceil(t);nt=v.setTokens({index:k+1,files:f,percent:i,name:g});setTimeout(function(){gt||s.html(nt)},r.processDelay)}};ct||lt?u.readAsText(d,r.textEncoding):at?u.readAsDataURL(d):u.readAsArrayBuffer(d)}};e(0);r._updateFileDetails(f,!0)},lock:function(n){var t=this,i=t.$container;return t._resetErrors(),t.disable(),!n&&t.showCancel&&i.find(".fileinput-cancel").show(),!n&&t.showPause&&i.find(".fileinput-pause").show(),t._raise("filelock",[t.fileManager.stack,t._getExtraData()]),t.$element},unlock:function(n){var t=this,i=t.$container;return void 0===n&&(n=!0),t.enable(),i.removeClass("is-locked"),t.showCancel&&i.find(".fileinput-cancel").hide(),t.showPause&&i.find(".fileinput-pause").hide(),n&&t._resetFileStack(),t._raise("fileunlock",[t.fileManager.stack,t._getExtraData()]),t.$element},resume:function(){var n=this,t=!1,i=n.resumableManager;return n.enableResumableUpload?(n.paused?n._toggleResumableProgress(n.progressPauseTemplate,n.msgUploadResume):t=!0,n.paused=!1,t&&n._toggleResumableProgress(n.progressInfoTemplate,n.msgUploadBegin),setTimeout(function(){i.upload()},n.processDelay),n.$element):n.$element},pause:function(){var i,t=this,r=t.resumableManager,u=t.ajaxRequests,f=u.length,e=r.getProgress(),s=t.fileActionSettings,h=t.taskManager,o=h.getPool(r.id);if(!t.enableResumableUpload)return t.$element;if(o&&o.cancel(),t._raise("fileuploadpaused",[t.fileManager,r]),f>0)for(i=0;f>i;i+=1)t.paused=!0,u[i].abort();return t.showPreview&&t._getThumbs().each(function(){var r,i=n(this),u=i.attr("data-fileid"),f=t._getLayoutTemplate("stats"),o=i.find(".file-upload-indicator");i.removeClass("file-uploading");o.attr("title")===s.indicatorLoadingTitle&&(t._setThumbStatus(i,"Paused"),r=f.setTokens({pendingTime:t.msgPaused,uploadSpeed:""}),t.paused=!0,t._setProgress(e,i.find(".file-thumb-progress"),e+"%",r));t.fileManager.getFile(u)||i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}),t._setProgress(101,t.$progress,t.msgPaused),t.$element},cancel:function(){var i,t=this,u=t.ajaxRequests,r=t.resumableManager,o=t.taskManager,f=r?o.getPool(r.id):void 0,e=u.length;if(t.enableResumableUpload&&f?(f.cancel().done(function(){t._setProgressCancelled()}),r.reset(),t._raise("fileuploadcancelled",[t.fileManager,r])):t._raise("fileuploadcancelled",[t.fileManager]),t._initAjax(),e>0)for(i=0;e>i;i+=1)t.cancelling=!0,u[i].abort();return t._getThumbs().each(function(){var i=n(this),u=i.attr("data-fileid"),r=i.find(".file-thumb-progress");i.removeClass("file-uploading");t._setProgress(0,r);r.hide();t.fileManager.getFile(u)||(i.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled"));t.unlock()}),setTimeout(function(){t._setProgressCancelled()},t.processDelay),t.$element},clear:function(){var r,i=this;if(i._raise("fileclear"))return i.$btnUpload.removeAttr("disabled"),i._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(n(this))}),i._clearFileInput(),i._resetUpload(),i.clearFileStack(),i.isDuplicateError=!1,i.isPersistentError=!1,i._resetErrors(!0),i._hasInitialPreview()?(i._showFileIcon(),i._resetPreview(),i._initPreviewActions(),i.$container.removeClass("file-input-new")):(i._getThumbs().each(function(){i._clearObjects(n(this))}),i.isAjaxUpload&&(i.previewCache.data={}),i.$preview.html(""),r=!i.overwriteInitial&&i.initialCaption.length>0?i.initialCaption:"",i.$caption.attr("title","").val(r),t.addCss(i.$container,"file-input-new"),i._validateDefaultPreview()),0===i.$container.find(t.FRAMES).length&&(i._initCaption()||i.$captionContainer.removeClass("icon-visible")),i._hideFileIcon(),i.focusCaptionOnClear&&i.$captionContainer.focus(),i._setFileDropZoneTitle(),i._raise("filecleared"),i.$element},reset:function(){var n=this;if(n._raise("filereset"))return n.lastProgress=0,n._resetPreview(),n.$container.find(".fileinput-filename").text(""),t.addCss(n.$container,"file-input-new"),n.getFrames().length&&n.$container.removeClass("file-input-new"),n.clearFileStack(),n._setFileDropZoneTitle(),n.$element},disable:function(){var n=this,i=n.$container;return n.isDisabled=!0,n._raise("filedisabled"),n.$element.attr("disabled","disabled"),i.addClass("is-locked"),t.addCss(i.find(".btn-file"),"disabled"),i.find(".kv-fileinput-caption").addClass("file-caption-disabled"),i.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),n._initDragDrop(),n.$element},enable:function(){var n=this,t=n.$container;return n.isDisabled=!1,n._raise("fileenabled"),n.$element.removeAttr("disabled"),t.removeClass("is-locked"),t.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),t.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),t.find(".btn-file").removeClass("disabled"),n._initDragDrop(),n.$element},upload:function(){var r,f,i=this,e=i.fileManager,u=e.count(),o=!n.isEmptyObject(i._getExtraData());if(i.isAjaxUpload&&!i.isDisabled&&i._isFileSelectionValid(u))return i.lastProgress=0,i._resetUpload(),0!==u||o?(i.cancelling=!1,i._showProgress(),i.lock(),0===u&&o?(i._setProgress(2),void i._uploadExtraOnly()):i.enableResumableUpload?i.resume():((i.uploadAsync||i.enableResumableUpload)&&(f=i._getOutData(null),i._raise("filebatchpreupload",[f]),i.fileBatchCompleted=!1,i.uploadCache=[],n.each(i.getFileStack(),function(n){var t=i._getThumbId(n);i.uploadCache.push({id:t,content:null,config:null,tags:null,append:!0})}),i.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),i._initSortable()),i._setProgress(2),i.hasInitData=!1,i.uploadAsync?(r=0,void n.each(e.stack,function(n){i._uploadSingle(r,n,!0);r++})):(i._uploadBatch(),i.$element))):void i._showFileError(i.msgUploadEmpty)},destroy:function(){var t=this,r=t.$form,u=t.$container,f=t.$element,i=t.namespace;return n(document).off(i),n(window).off(i),r&&r.length&&r.off(i),t.isAjaxUpload&&t._clearFileInput(),t._cleanup(),t._initPreviewCache(),f.insertBefore(u).off(i).removeData(),u.off().remove(),f},refresh:function(i){var r=this,u=r.$element;return i="object"!=typeof i||t.isEmpty(i)?r.options:n.extend(!0,{},r.options,i),r._init(i,!0),r._listen(),u},zoom:function(n){var t=this,i=t._getFrame(n);t._showModal(i)},getExif:function(n){var i=this,t=i._getFrame(n);return t&&t.data("exif")||null},getFrames:function(i){var r,u=this;return i=i||"",r=u.$preview.find(t.FRAMES+i),u.reversePreviewOrder&&(r=n(r.get().reverse())),r},getPreview:function(){var n=this;return{content:n.initialPreview,config:n.initialPreviewConfig,tags:n.initialPreviewThumbTags}}};n.fn.fileinput=function(r){if(t.hasFileAPISupport()||t.isIE(9)){var f=Array.apply(null,arguments),u=[];switch(f.shift(),this.each(function(){var c,e=n(this),o=e.data("fileinput"),s="object"==typeof r&&r,l=s.theme||e.data("theme"),a={},v={},h=s.language||e.data("language")||n.fn.fileinput.defaults.language||"en";o||(l&&(v=n.fn.fileinputThemes[l]||{}),"en"===h||t.isEmpty(n.fn.fileinputLocales[h])||(a=n.fn.fileinputLocales[h]||{}),c=n.extend(!0,{},n.fn.fileinput.defaults,v,n.fn.fileinputLocales.en,a,s,e.data()),o=new i(this,c),e.data("fileinput",o));"string"==typeof r&&u.push(o[r].apply(o,f))}),u.length){case 0:return this;case 1:return u[0];default:return u}}};r='class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}';n.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showUploadStats:!0,showCancel:null,showPause:null,showClose:!0,showUploadedThumbs:!0,showConsoleLogs:!1,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:function(){var n=window.navigator.userAgent,t=!!n.match(/WebKit/i),i=!!n.match(/iP(od|ad|hone)/i),r=i&&t&&!n.match(/CriOS/i);return!r},autoOrientImageInitial:!0,required:!1,rtl:!1,hideThumbnailContent:!1,encodeUrl:!0,focusCaptionOnBrowse:!0,focusCaptionOnClear:!0,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,sanitizeZoomCache:function(n){var i=t.createElement(n);return i.find("input,textarea,select,datalist,form,.file-thumbnail-footer").remove(),i.html()},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"><\/i>',next:'<i class="glyphicon glyphicon-triangle-right"><\/i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"><\/i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"><\/i>',borderless:'<i class="glyphicon glyphicon-resize-full"><\/i>',close:'<i class="glyphicon glyphicon-remove"><\/i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedFileTypes:null,allowedFileExtensions:null,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedPreviewExtensions:null,disabledPreviewTypes:void 0,disabledPreviewExtensions:["msi","exe","com","zip","rar","app","vb","scr"],disabledPreviewMimeTypes:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"><\/i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"><\/i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"><\/i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"><\/i>',cancelClass:"btn btn-default btn-secondary",pauseIcon:'<i class="glyphicon glyphicon-pause"><\/i>',pauseClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"><\/i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadParamNames:{chunkCount:"chunkCount",chunkIndex:"chunkIndex",chunkSize:"chunkSize",chunkSizeStart:"chunkSizeStart",chunksUploaded:"chunksUploaded",fileBlob:"fileBlob",fileId:"fileId",fileName:"fileName",fileRelativePath:"fileRelativePath",fileSize:"fileSize",retryCount:"retryCount"},maxAjaxThreads:5,fadeDelay:800,processDelay:100,queueDelay:10,progressDelay:0,enableResumableUpload:!1,resumableUploadOptions:{fallback:null,testUrl:null,chunkSize:2048,maxThreads:4,maxRetries:3,showErrorLog:!0},uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,maxTotalFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"><\/i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressInfoClass:"progress-bar bg-info progress-bar-info progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressPauseClass:"progress-bar bg-primary progress-bar-primary progress-bar-striped active",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1,usePdfRenderer:function(){var n=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||n},pdfRendererUrl:"",pdfRendererTemplate:"<iframe "+r+"><\/iframe>"};n.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear all unprocessed files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",pauseLabel:"Pause",pauseTitle:"Pause ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPaused:"Paused",msgPlaceholder:"Select {files} ...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB<\/b>) is too small and must be larger than <b>{minSize} KB<\/b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB<\/b>) exceeds maximum allowed upload size of <b>{maxSize} KB<\/b>.',msgFilesTooLess:"You must select at least <b>{n}<\/b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})<\/b> exceeds maximum allowed limit of <b>{m}<\/b>.",msgTotalFilesTooMany:"You can upload a maximum of <b>{m}<\/b> files (<b>{n}<\/b> files detected).",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing &hellip;",msgUploadBegin:"Initializing &hellip;",msgUploadEnd:"Done",msgUploadResume:"Resuming upload &hellip;",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Upload Error",msgDeleteError:"Delete Error",msgProgressError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}<\/pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",msgDuplicateFile:'File "{name}" of same size "{size} KB" has already been selected earlier. Skipping duplicate selection.',msgResumableUploadRetriesExceeded:"Upload aborted beyond <b>{max}<\/b> retries for file <b>{file}<\/b>! Error Details: <pre>{error}<\/pre>",msgPendingTime:"{time} remaining",msgCalculatingTime:"calculating time remaining",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}};n.fn.fileinput.Constructor=i;n(document).ready(function(){var t=n("input.file[type=file]");t.length&&t.fileinput()})});
/*!
 * bootstrap-fileinput v5.1.2
 * http://plugins.krajee.com/file-input
 *
 * Font Awesome icon theme configuration for bootstrap-fileinput. Requires font awesome assets to be loaded.
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2020, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD-3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
!function(n){"use strict";n.fn.fileinputThemes.fa={fileActionSettings:{removeIcon:'<i class="fa fa-trash"><\/i>',uploadIcon:'<i class="fa fa-upload"><\/i>',uploadRetryIcon:'<i class="fa fa-repeat"><\/i>',downloadIcon:'<i class="fa fa-download"><\/i>',zoomIcon:'<i class="fa fa-search-plus"><\/i>',dragIcon:'<i class="fa fa-arrows"><\/i>',indicatorNew:'<i class="fa fa-plus-circle text-warning"><\/i>',indicatorSuccess:'<i class="fa fa-check-circle text-success"><\/i>',indicatorError:'<i class="fa fa-exclamation-circle text-danger"><\/i>',indicatorLoading:'<i class="fa fa-hourglass text-muted"><\/i>',indicatorPaused:'<i class="fa fa-pause text-info"><\/i>'},layoutTemplates:{fileIcon:'<i class="fa fa-file kv-caption-icon"><\/i> '},previewZoomButtonIcons:{prev:'<i class="fa fa-caret-left fa-lg"><\/i>',next:'<i class="fa fa-caret-right fa-lg"><\/i>',toggleheader:'<i class="fa fa-fw fa-arrows-v"><\/i>',fullscreen:'<i class="fa fa-fw fa-arrows-alt"><\/i>',borderless:'<i class="fa fa-fw fa-external-link"><\/i>',close:'<i class="fa fa-fw fa-remove"><\/i>'},previewFileIcon:'<i class="fa fa-file"><\/i>',browseIcon:'<i class="fa fa-folder-open"><\/i>',removeIcon:'<i class="fa fa-trash"><\/i>',cancelIcon:'<i class="fa fa-ban"><\/i>',pauseIcon:'<i class="fa fa-pause"><\/i>',uploadIcon:'<i class="fa fa-upload"><\/i>',msgValidationErrorIcon:'<i class="fa fa-exclamation-circle"><\/i> '}}(window.jQuery);