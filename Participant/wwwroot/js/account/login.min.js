(function(){function e(t){t.preventDefault();toastr.info("Please be patient while we complete your login process.");gapi.load("auth2",function(){gapi.auth2.init({client_id:"819390282854-j5g7iabuau4c524le3oqfuv94ihhr22e.apps.googleusercontent.com"}).then(function(t){if(t.isSignedIn.get()){var r=t.currentUser.get(),i=r.getBasicProfile();n.email=i.getEmail();n.providerKey=r.getId();n.photoUrl=i.getImageUrl();n.firstName=i.getGivenName();n.lastName=i.getFamilyName();n.loginProvider=loginProviders.GOOGLE;u(n)}else t.signIn({scope:"profile email"}).then(function(t){var i=t.getBasicProfile();n.email=i.getEmail();n.providerKey=t.getId();n.photoUrl=i.getImageUrl();n.firstName=i.getGivenName();n.lastName=i.getFamilyName();n.loginProvider=loginProviders.GOOGLE;u(n)})})})}function o(n){var t,e,i,o,u;if(n.preventDefault(),t=$(this),e=t.html(),setLoadingButton(t),i=$("#login-form"),initializeValidation(i,r),o=isValidForm(i,r),o){showValidationToast(o);resetLoadingButton(t,e);return}u=formDataToJson(i);u.RememberMe=convertToBoolean(u.RememberMe);axios.post("/api/auth/token",u).then(function(n){localStorage.setItem("token",n.data);f(n.data)}).catch(function(){toastr.error("Invalid username or password!")}).finally(function(){resetLoadingButton(t,e)})}function u(n){axios.post("/api/auth/externallogin",n).then(function(n){localStorage.setItem("token",n.data);f(n.data)}).catch(function(n){var t=n.response.data;toastr.error(t)}).finally(function(){resetLoadingButton(t,i)})}function f(n){axios.post(`/account/login`,n).then(function(){toastr.success("Successfully logged in to App!");window.location.href=appConstants.LOGIN_REDIRECT_PATH}).catch(function(n){var t=n.response.data;toastr.error(t)}).finally(function(){resetLoadingButton(t,i)})}var t,i,n={email:"",photoUrl:"",loginProvider:"",providerKey:"",firstName:"",lastName:""},r={Email:{presence:!0,email:!0},Password:{presence:!0,length:{minimum:6,maximum:20}}};$(function(){$("#btn-login").on("click",o);$("#login-google").on("click",e)})})();