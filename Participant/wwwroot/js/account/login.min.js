(function(){function u(t){t.preventDefault();toastr.info("Please be patient while we complete your login process.");gapi.load("auth2",function(){gapi.auth2.init({client_id:"819390282854-j5g7iabuau4c524le3oqfuv94ihhr22e.apps.googleusercontent.com"}).then(function(t){if(t.isSignedIn.get()){var u=t.currentUser.get(),r=u.getBasicProfile();n.email=r.getEmail();n.providerKey=u.getId();n.photoUrl=r.getImageUrl();n.firstName=r.getGivenName();n.lastName=r.getFamilyName();n.loginProvider=loginProviders.GOOGLE;i(n)}else t.signIn({scope:"profile email"}).then(function(t){var r=t.getBasicProfile();n.email=r.getEmail();n.providerKey=t.getId();n.photoUrl=r.getImageUrl();n.firstName=r.getGivenName();n.lastName=r.getFamilyName();n.loginProvider=loginProviders.GOOGLE;i(n)})})})}function f(n){var i,u,f,o,e;if(n.preventDefault(),i=$(this),u=i.html(),setLoadingButton(i),f=$("#login-form"),initializeValidation(f,t),o=isValidForm(f,t),o){showValidationToast(o);resetLoadingButton(i,u);return}e=formDataToJson(f);e.RememberMe=convertToBoolean(e.RememberMe);axios.post("/api/auth/token",e).then(function(n){resetLoadingButton(i,u);localStorage.setItem("token",n.data.accessToken);r(n.data)}).catch(function(n){resetLoadingButton(i,u);showResponseError(n)})}function i(n){axios.post("/api/auth/externallogin",n).then(function(n){localStorage.setItem("token",n.data.accessToken);r(n.data)}).catch(showResponseError)}function r(n){axios.post(`/account/login`,n).then(function(){toastr.success("Successfully logged in to App!");var n=$("#returnUrl").val();console.log(n);window.location.href=n&&n.trim()?n:appConstants.LOGIN_REDIRECT_PATH}).catch(showResponseError)}var n={email:"",photoUrl:"",loginProvider:"",providerKey:"",firstName:"",lastName:""},t={Email:{presence:!0,email:!0},Password:{presence:!0,length:{minimum:6,maximum:20}}};$(function(){$("#btn-login").on("click",f);$("#login-google").on("click",u)})})();