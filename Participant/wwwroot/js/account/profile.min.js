(function(){function u(n){var u,f,e,o,s,h;if(n.preventDefault(),u=$(this),f=u.html(),setLoadingButton(u),initializeValidation(t,i),e=isValidForm(t,i),e){showValidationToast(e);resetLoadingButton(u,f);return}resetValidationState(t);o=getFormData(t);s=$("input[name='primaryEmail']:checked").val()==="work"?t.find("#emailCorp").val():t.find("#emailPersonal").val();o.append("email",s);h={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}};axios.put("/api/profile",o,h).then(function(){toastr.success("Profile updated successfully!");resetLoadingButton(u,f);$("#edit-profile-modal").modal("hide");r()}).catch(function(n){resetLoadingButton(u,f);showResponseError(n)})}function r(){axios.get("/api/profile").then(function(t){n=t.data;console.log(n);e();f(n)}).catch(function(n){console.error(n)})}function f(i){setFormData(t,i);previewFileInput(n.id,i.photoUrl,$("#photo"))}function e(){if(!n){toastr.info("User profile is not set.");$("#profileNotSet").show();$("#profileSet").hide();return}var t=`${n.title?n.title:""}${n.firstName} ${n.lastName}`;$("#d-profile-name").text(t);$("#d-profile-email").text(n.email);n.phone||(n.phone="N/A");n.mobile||(n.mobile="N/A");$("#d-profile-phone").text(n.phone);$("#d-profile-mobile").text(n.mobile);n.photoUrl||(n.photoUrl="https://dummyimage.com/100");$("#d-profile-photo").attr("src",n.photoUrl)}var n,t,i={firstName:{presence:!0,length:{maximum:100}},lastName:{presence:!0,length:{maximum:100}},emailCorp:{email:!0,length:{maximum:500}},emailPersonal:{email:!0,length:{maximum:500}},phone:{length:{maximum:20}},PhoneCorp:{length:{maximum:20}},title:{length:{maximum:100}},linkedinUrl:{length:{maximum:250}}};$(function(){$(".btn-edit-profile").click(function(){$("#edit-profile-modal").modal("show")});t=$("#edit-profile-form");$("#btn-save-profile").click(u);r()})})();