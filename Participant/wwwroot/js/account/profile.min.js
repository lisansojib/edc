(function(){function i(n){var r,s,u,f,i,e,o,h;if(n.preventDefault(),r=$(this),s=r.html(),setLoadingButton(r),u=$("#profile-form"),initializeValidation(u,t),f=isValidForm(u,t),f){showValidationToast(f);resetLoadingButton(r,s);return}i=new FormData;i.append("Title",$("#Title").val());i.append("PhoneNumber",$("#PhoneNumber").val());i.append("Company",$("#Company").val());i.append("Bio",$("#Bio").val());i.append("BringsToGroup",$("#BringsToGroup").val());i.append("GoalsForProgram",$("#GoalsForProgram").val());e=$("#ProfilePic")[0].files[0];e&&i.append("ProfilePic",e);o=$("#LogoImage")[0].files[0];o&&i.append("LogoImage",o);h={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}};axios.post("/api/user/profile",i,h).then(function(){toastr.success("Profile picture uploaded successfully!");disableElement(r);window.location.reload()}).catch(function(n){toastr.error(n.response.data)}).then(function(){resetLoadingButton(r,btnContent)})}function r(){axios.get("/api/auth/me").then(function(t){n=t.data;u()}).catch(function(n){console.error(n)})}function u(){if(!n){toastr.info("User profile is not set.");$("#profileNotSet").show();$("#profileSet").hide();return}var t=`${n.firstName} ${n.lastName}`;$("#d-profile-name").text(t);n.photoUrl||(n.photoUrl="https://via.placeholder.com/400");$("#photo").attr("src",n.photoUrl);n.logoUrl||(n.LogoUrl="https://via.placeholder.com/100");$("#logo").attr("src",n.LogoUrl)}var n,t={Title:{presence:!0,length:{maximum:100}},PhoneNumber:{presence:!0,length:{maximum:20}},Company:{length:{maximum:100}},Bio:{length:{maximum:500}},BringsToGroup:{length:{maximum:100}},GoalsForProgram:{length:{maximum:100}}};$(function(){$("#btn-edit-profile").click(function(){n&&($("#Title").val(n.Title),$("#PhoneNumber").val(n.PhoneNumber),$("#Company").val(n.Company),$("#Bio").val(n.Bio),$("#BringsToGroup").val(n.BringsToGroup),$("#GoalsForProgram").val(n.GoalsForProgram));$("#view-profile").hide();$("#edit-profile").show()});$("#btn-cancel").click(function(){$("#edit-profile").hide();$("#view-profile").show()});$("#btn-save-profile").click(i);$("input,textarea").on("input",function(){if(this.value.length>this.maxLength)return!1;var n=this.maxLength-this.value.length;$(`#${this.id}Help`).html(n+" characters remaining.")});r()})})();