(function(){function r(){axios.get("/api/select-options/companies").then(function(n){initSelect2($("#CompanyId"),n.data)}).catch(function(n){toastr.error(n.response.data)})}function u(n){var r,e,u,o,f;if(n.preventDefault(),r=$(this),e=r.html(),setLoadingButton(r),u=$("#register-form"),initializeValidation(u,i),o=isValidForm(u,i),o){showValidationToast(o);resetLoadingButton(r,e);return}f=formDataToJson(u);f.companyId=parseInt(f.companyId);axios.post("/api/auth/register",f).then(function(){localStorage.setItem("token",response.data);t(response.data)}).catch(function(n){toastr.error(n.response.data)}).then(function(){resetLoadingButton(r,e)})}function f(t){t.preventDefault();toastr.info("Please be patient while we complete your login process.");gapi.load("auth2",function(){gapi.auth2.init({client_id:"819390282854-j5g7iabuau4c524le3oqfuv94ihhr22e.apps.googleusercontent.com"}).then(function(t){if(t.isSignedIn.get()){var r=t.currentUser.get(),i=r.getBasicProfile();externalLoginVm.email=i.getEmail();externalLoginVm.providerKey=r.getId();externalLoginVm.photoUrl=i.getImageUrl();externalLoginVm.firstName=i.getGivenName();externalLoginVm.lastName=i.getFamilyName();externalLoginVm.loginProvider=loginProviders.GOOGLE;n(externalLoginVm)}else t.signIn({scope:"profile email"}).then(function(t){var i=t.getBasicProfile();externalLoginVm.email=i.getEmail();externalLoginVm.providerKey=t.getId();externalLoginVm.photoUrl=i.getImageUrl();externalLoginVm.firstName=i.getGivenName();externalLoginVm.lastName=i.getFamilyName();externalLoginVm.loginProvider=loginProviders.GOOGLE;n(externalLoginVm)})})})}function n(n){axios.post("/api/auth/externallogin",n).then(function(n){localStorage.setItem("token",n.data);t(n.data)}).catch(function(n){var t=n.response.data;toastr.error(t)}).finally(function(){resetLoadingButton(thisBtn,thisBtnText)})}function t(n){axios.post(`/account/login`,n).then(function(){toastr.success("Successfully logged in to App!");window.location.href=appConstants.LOGIN_REDIRECT_PATH}).catch(function(n){var t=n.response.data;toastr.error(t)}).finally(function(){resetLoadingButton(thisBtn,thisBtnText)})}$(function(){r();$("#btn-register").on("click",u);$("#login-google").on("click",f)});var i={Email:{presence:!0,email:!0},FirstName:{presence:!0},LastName:{presence:!0},Password:{presence:!0,length:{minimum:6,maximum:20}}}})();